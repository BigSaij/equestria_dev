add_namespace = katzen_AF


country_event = { #Kaiser pops up
	id = katzen_AF.1
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.1"}
	title = katzen_AF.1.t
	desc = katzen_AF.1.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = { 
		name = katzen_AF.1.a
		hidden_effect = {
			ABY_AF_kaiser_kattail = {
				promote_leader = yes
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = fascism_ideology
						expire = "1965.1.1.1"
					}
				}
			}
		}
	}
}
country_event = { #gaslighting done
	id = katzen_AF.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.2"}
	title = katzen_AF.2.t
	desc = katzen_AF.2.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.2.a
	}
}
country_event = { #just before continental conquests - Player is given option to stop
	id = katzen_AF.111
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.111"}
	title = katzen_AF.111.t
	desc = katzen_AF.111.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.111.a
		set_country_flag = ABY_AF_endgame_start_flag
		mark_focus_tree_layout_dirty = yes
		custom_effect_tooltip = katzen_AF.111.a.t
	}
	option = {
		name = katzen_AF.111.b
		hidden_effect = {
			set_country_flag = ABY_AF_kaiser_left
			remove_decision = ABY_AF_clock_is_ticking_kattail_mission
			add_popularity = {
				ideology = neutrality
				popularity = 0.50
			}
		}
		retire_country_leader = yes
		set_cosmetic_tag = ABY_AF_loris_cosmetic
		set_rule = {
			can_not_declare_war = no
			can_puppet = yes
		}
		ABY_AF_Loris = {
			promote_leader = yes
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = despotism
					expire = "1965.1.1.1"
				}
			}
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
			long_name = ABY_AF_kattail_n_longname
			name = ABY_AF_kattail_n_shortname
		}
		if = { #Loris fixes it yay isn't he so cool?
			limit = { has_idea = ABY_AF_taking_too_long }
			remove_ideas = ABY_AF_taking_too_long
		}
		custom_effect_tooltip = katzen_AF.111.b.t
	}
}
country_event = { # world conquest complete
	id = katzen_AF.12
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.12"}
	title = katzen_AF.12.t
	desc = katzen_AF.12.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.12.a
	}
}
country_event = { # mondkanone done now fuck off
	id = katzen_AF.13
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.13"}
	title = katzen_AF.13.t
	desc = katzen_AF.13.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.13.a
	}
}
country_event = { #investigating magic
	id = katzen_AF.21
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.21"}
	title = katzen_AF.21.t
	desc = katzen_AF.21.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.21.a
	}
}
country_event = { #katzen takes over
	id = katzen_AF.22
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.22"}
	title = katzen_AF.22.t
	desc = katzen_AF.22.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.22.a
		retire_country_leader = yes
		ABY_sheba_taddlepaw = {
			retire = yes
		}
		ABY_AF_kaiser_kattail = {
			promote_leader = yes
			add_country_leader_role = {
				promote_leader = yes
				country_leader = {
					ideology = nazism
					expire = "1965.1.1.1"
				}
			}
		}
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
			long_name = ABY_AF_kattail_longname
			name = ABY_AF_kattail_shortname
		}
		set_rule = {
			can_not_declare_war = yes
			can_puppet = no
		}
		hidden_effect = {
			add_popularity = {
				ideology = fascism
				popularity = 1.00
			}
			set_party_name = {
				ideology = neutrality
				long_name = ABY_AF_kattail_n_longname
				name = ABY_AF_kattail_n_shortname
			}
			set_party_name = {
				ideology = democratic
				long_name = ABY_AF_kattail_h_longname
				name = ABY_AF_kattail_h_shortname
			}
			set_party_name = {
				ideology = communism
				long_name = ABY_AF_kattail_c_longname
				name = ABY_AF_kattail_c_shortname
			}
			set_cosmetic_tag = ABY_AF_earlygame_cosmetic
		}
	}
}

country_event = { #new imperium
	id = katzen_AF.23
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.23"}
	title = katzen_AF.23.t
	desc = katzen_AF.23.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.23.a
	}
}

country_event = { #zebtropa plan event
	id = katzen_AF.24
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.24"}
	title = katzen_AF.24.t
	desc = katzen_AF.24.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.24.a
	}
}

country_event = { #omg eine blokkate??
	id = katzen_AF.25
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.25"}
	title = katzen_AF.25.t
	desc = katzen_AF.25.d
	picture = GFX_event_aby_af_pawtton
	
	is_triggered_only = yes
	
	option = { #shoo it
		name = katzen_AF.25.a
		hidden_effect = { country_event = { id = katzen_AF.251 } }
	}
	option = { #shoot it
		name = katzen_AF.25.b
		hidden_effect = { country_event = { id = katzen_AF.252 } }
	}
	option = { #talk to it
		name = katzen_AF.25.c
		hidden_effect = { country_event = { id = katzen_AF.253 } }
	}
}

#Shoo blokkat
country_event = {
	id = katzen_AF.251
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.251"}
	title = katzen_AF.251.t
	desc = katzen_AF.251.d
	picture = GFX_event_aby_af_blokkat
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.251.a
		ABY_AF_Pawtton = {
			add_attack = 1
			add_defense = 1
			add_logistics = 1
			add_planning = 1
			add_skill_level = 2
			add_trait = { trait = expert_delegator }
			add_trait = { trait = skilled_staffer }
		}
	}
}

#Shoot blokkat
country_event = {
	id = katzen_AF.252
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.252"}
	title = katzen_AF.252.t
	desc = katzen_AF.252.d
	picture = GFX_event_aby_af_blokkat
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.252.a
		775 = {
			damage_building = {
				type = infrastructure
				damage = 1
			}
			damage_building = {
				type = industrial_complex
				damage = 1
			}
			damage_building = {
				type = arms_factory
				damage = 1
			}
		}
	}
}

#talk to blokkat
country_event = {
	id = katzen_AF.253
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.253"}
	title = katzen_AF.253.t
	desc = katzen_AF.253.d
	picture = GFX_event_aby_af_blokkat
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.253.a
		add_corps_commander_role = {
			character = ABY_AF_Blokkat
			desc = "ABY_AF_Blokkat_desc"

			traits = { skilled_staffer expert_delegator organizer logistics_wizard brilliant_strategist offensive_doctrine defensive_doctrine unyielding_defender aggressive_assaulter }
			skill = 5
			attack_skill = 5
			defense_skill = 5
			planning_skill = 5
			logistics_skill = 5
		}
	}

	option = {
		name = katzen_AF.253.b
		add_advisor_role = {
			character = ABY_AF_Blokkat
			advisor = {
				desc = "ABY_AF_Blokkat_desc"
				slot = political_advisor
				idea_token = ABY_AF_Blokkat
				cost = 100
				traits = { ABY_AF_Blokkat_trait }
			}
		}
	}

	option = {
		name = katzen_AF.253.c
		add_political_power = 50
	}
}

country_event = { #aeternum artifact event
	id = katzen_AF.26
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.26"}
	title = katzen_AF.26.t
	desc = katzen_AF.26.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.26.a
		custom_effect_tooltip = katzen_AF.26_tt
		add_to_variable = {
			var = ABY_AF_aeternum_relics_available
			value = 1
		}
		activate_mission = ABY_AF_searching_the_vaults_mission
		add_political_power = 50
		add_stability = 0.01
	}
}

country_event = { #zebhara project
	id = katzen_AF.27
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.27"}
	title = katzen_AF.27.t
	desc = katzen_AF.27.d
	picture = GFX_event_zebrica_2
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.27.a
		add_political_power = -50
	}
}

country_event = { #story event war
	id = katzen_AF.271
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.271"}
	title = katzen_AF.271.t
	desc = katzen_AF.271.d
	picture = GFX_event_crystal_university
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.27.a
		country_event = katzen_AF.271
	}
}

country_event = { #story event war 2
	id = katzen_AF.272
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.272"}
	title = katzen_AF.272.t
	desc = katzen_AF.272.d
	picture = GFX_event_crystal_university
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.272.a
		add_stability = 0.01
	}
}

country_event = { #story event victory parades
	id = katzen_AF.273
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.273"}
	title = katzen_AF.273.t
	desc = katzen_AF.273.d
	picture = GFX_event_aby_af_kattail
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.273.a
		add_stability = 0.015
		add_war_support = 0.015
	}
}

country_event = { #hyperdiversity
	id = katzen_AF.274
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.274"}
	title = katzen_AF.274.t
	desc = katzen_AF.274.d
	picture = GFX_event_griffon_back
	fire_only_once = yes
	
	trigger = {
		tag = ABY
		has_completed_focus = ABY_AF_new_world_old_acquaintances
		ROOT = {
			owns_state = 1099
		}
	}

	option = {
		name = katzen_AF.274.a
		add_stability = -0.05
	}
}

country_event = { #revenge!!!
	id = katzen_AF.275
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.275"}
	title = katzen_AF.275.t
	desc = katzen_AF.275.d
	picture = GFX_event_stormlands_castle
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.275.a
		every_state = {
			limit = { 
				OR = { 
					is_core_of = SLC 
					is_core_of = STM
					is_core_of = GYZ
					is_core_of = THU
				}
				is_controlled_by = ABY
			}
			add_compliance = 25
			add_resistance = 25
		}
	}
}

country_event = { #legend of everfree
	id = katzen_AF.276
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.276"}
	title = katzen_AF.276.t
	desc = katzen_AF.276.d
	picture = GFX_event_everfree_attrition
	is_triggered_only = yes

	option = {
		name = katzen_AF.276.a
	}
}

country_event = { #Magehold
	id = katzen_AF.277
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.277"}
	title = katzen_AF.277.t
	desc = katzen_AF.277.d
	picture = GFX_event_magehold
	fire_only_once = yes
	
	trigger = {
		tag = ABY
		has_completed_focus = ABY_AF_new_world_old_acquaintances
		ROOT = {
			controls_state = 416
		}
	}

	option = {
		name = katzen_AF.277.a
		add_war_support = 0.05
	}
}

country_event = { #built the riesiger
	id = katzen_AF.28
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.28"}
	title = katzen_AF.28.t
	desc = katzen_AF.28.d
	picture = GFX_event_devastation_nature1
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.28.a
	}
}

country_event = { #fired the riesiger, this is to everyone
	id = katzen_AF.29
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.29"}
	title = katzen_AF.29.t
	desc = katzen_AF.29.d
	picture = GFX_event_devastation_nature1
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.29.a
	}
}

country_event = { #deciding which way
	id = katzen_AF.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.3"}
	title = katzen_AF.3.t
	desc = katzen_AF.3.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = { #end game here
		name = katzen_AF.3.a
	}
	option = { #wc time
		name = katzen_AF.3.b
		set_country_flag = ABY_AF_endgame_start_flag
		mark_focus_tree_layout_dirty = yes
	}
}
country_event = { #kaiser ruminating
	id = katzen_AF.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.4"}
	title = katzen_AF.4.t
	desc = katzen_AF.4.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.4.a
		add_political_power = 150
	}
}
country_event = { #meeting posada
	id = katzen_AF.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.5"}
	title = katzen_AF.5.t
	desc = katzen_AF.5.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = { #yay
		name = katzen_AF.5.a
		set_country_flag = HIP_posada_joined_govt
		custom_effect_tooltip = HIP_posada_joins_tt
	}
}
country_event = { #kaiser dreams of things to come
	id = katzen_AF.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.6"}
	title = katzen_AF.6.t
	desc = katzen_AF.6.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.6.a
	}
}
country_event = { #ships done
	id = katzen_AF.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.7"}
	title = katzen_AF.7.t
	desc = katzen_AF.7.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = { #yay
		name = katzen_AF.7.a
		if = {
			limit = {
				has_dlc = "Man the Guns"
			}
			hidden_effect = {
				set_technology = {
					basic_ship_hull_light = 1
					improved_ship_torpedo_launcher = 1
				}
				create_equipment_variant = {
					name = "Herzogkatzenschiff Class"
					type = ship_hull_light_2
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_battery_1
						fixed_ship_anti_air_slot = empty
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = light_ship_engine_2
						fixed_ship_torpedo_slot = ship_torpedo_2
						mid_1_custom_slot = ship_torpedo_2
						rear_1_custom_slot = ship_torpedo_2
					}
				}
				create_equipment_variant = {
					name = "Katzenkriegbaron Class"
					type = ship_hull_cruiser_1
					parent_version = 0
					modules = {
						fixed_ship_battery_slot = ship_light_medium_battery_1
						fixed_ship_anti_air_slot = empty
						fixed_ship_fire_control_system_slot = ship_fire_control_system_0
						fixed_ship_radar_slot = empty
						fixed_ship_engine_slot = cruiser_ship_engine_1
						mid_1_custom_slot = ship_torpedo_2
						mid_2_custom_slot = ship_torpedo_2
						rear_1_custom_slot = ship_light_medium_battery_1
					}
				}
				for_loop_effect = {
					end = 100
					create_ship = { type = ship_hull_light_2 equipment_variant = "Herzogkatzenschiff Class" creator = ROOT }
				}
				for_loop_effect = {
					end = 40
					create_ship = { type = ship_hull_cruiser_1 equipment_variant = "Katzenkriegbaron Class" creator = ROOT }
				}					
			}
			else = {
				set_technology = {
					basic_destroyer = 1
					early_light_cruiser = 1 
				}
				for_loop_effect = {
					end = 100
					create_ship = { 
						type = basic_destroyer 
						name = "Herzogkatzenschiff Class" 
						creator = ROOT 
					}
				}
				for_loop_effect = {
					end = 60
					create_ship = { 
						type = early_light_cruiser 
						name = "Katzenkriegbaron Class" 
						creator = ROOT 
					}
				}		
			}
		}
		if = {
			limit = {
				OR = {
					has_tech = naval_bomber1
					has_tech = iw_small_airframe
				}
		    }
		    if = {
            	limit = {
             	   has_dlc = "By Blood Alone"
           	 	}
				add_tech_bonus = {
					name = naval_air
					bonus = 0.75
					uses = 1
					category = naval_air
				}
				add_tech_bonus = {
					name = plane_modules_tech
					bonus = 0.75
					uses = 1
					category = plane_modules_tech
				}
			}
			else = {
				add_tech_bonus = {
					name = nav_bomber_bonus
					bonus = 1.0
					uses = 1
					category = naval_bomber
				}
			}
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				set_technology = {
					early_bombs = 1
					engines_1 = 1
				}
				generic_basic_nav_bomber = yes
				add_equipment_to_stockpile = {
					type = small_plane_naval_bomber_airframe_1
					variant_name = "Basic Naval Bomber"
					amount = 500
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = nav_bomber_equipment_1
					amount = 500
				}
			}
		}
		else = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				set_technology = {
					iw_small_airframe = 1
					early_bombs = 1
					engines_1 = 1
				}
				generic_basic_nav_bomber = yes
				add_equipment_to_stockpile = {
					type = small_plane_airframe_0
					variant_name = "Basic Naval Bomber"
					amount = 500
				}
			}
			else = {
				set_technology = {
					naval_bomber1 = 1
				}
				add_equipment_to_stockpile = {
					type = nav_bomber_equipment_1
					amount = 500
				}
			}
		}
	}
}
country_event = { #they find the relic
	id = katzen_AF.81
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.8"}
	title = katzen_AF.81.t
	desc = katzen_AF.81.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.81.a
		custom_effect_tooltip = katzen_AF.81_tt
		add_to_variable = {
			var = ABY_AF_aeternum_relics_available
			value = 1
		}
	}
}
country_event = { #lob nukes at the fuckers in the abyss
	id = katzen_AF.10
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.10"}
	title = katzen_AF.10.t
	desc = katzen_AF.10.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.10.a
		add_political_power = 1
	}
}

country_event = { #hidden event to name the pyramid
	id = katzen_AF.11
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.11"}
	hidden = yes
	is_triggered_only = yes
	
	option = {
		set_province_name = {
			id = 15718
			name = ABY_AF_kattown_pyramid_locckey
		}
	}
}
country_event = { #kaiser vanishes
	id = katzen_AF.14
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.998"}
	title = katzen_AF.14.t
	desc = katzen_AF.14.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	trigger = {
		original_tag = ABY
		if = {
			limit = {
				has_country_flag = has_built_kattown_pyramid 
			}
			NOT = {
				controls_province = 15718
			}
		}
		else = {
			surrender_progress > 0.15
		}
	}
	
	option = {
		name = katzen_AF.14.a
		add_ideas = ABY_AF_the_kaiser_vanishes
		retire_country_leader = yes
		load_focus_tree = {
			tree = ABY_april_fools_tree_failure
			keep_completed = no
		}
	}
}

country_event = { #kaiser rant
	id = katzen_AF.999
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.999"}
	title = katzen_AF.999.t
	desc = katzen_AF.999.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.999.a
		add_ideas = ABY_AF_taking_too_long
	}
}

country_event = { #WC done
	id = katzen_AF.1000
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.100"}
	title = katzen_AF.1000.t
	desc = katzen_AF.1000.d
	picture = GFX_event_magehold
	fire_only_once = yes
	mean_time_to_happen = {
		days = 7
	}
	trigger = {
		tag = ABY
		has_completed_focus = ABY_AF_the_kattown_pyramid
		all_other_country = {
			OR = {
				tag = ZRS
				exists = no
				is_subject_of = ROOT
			}
		}
	}
	option = {
		name = katzen_AF.1000.a
		set_country_flag = ABY_AF_world_conquest_done_flag
		mark_focus_tree_layout_dirty = yes
	}
}

country_event = { #griffonia war event - kaiser gets notified
	id = katzen_AF.99800
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99800"}
	title = katzen_AF.99800.t
	desc = katzen_AF.99800.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	option = {
		name = katzen_AF.99800.a
		hidden_effect = {
			every_other_country  = {
				limit = {
				  is_griffon_continent_country = yes
				  has_war = yes
				}
				every_enemy_country = {
				  limit = { 
					NOT = { original_tag = ABY }
				  }
				  white_peace = PREV
				}
			  }
			GRI = {
				annex_country = {
					target = FEA
					transfer_troops = yes
				}
				annex_country = {
					target = STW
					transfer_troops = yes
				}
				annex_country = {
					target = BRZ
					transfer_troops = yes
				}
				annex_country = {
					target = YAL
					transfer_troops = yes
				}
				annex_country = {
					target = PYT
					transfer_troops = yes
				}
				annex_country = {
					target = ROU
					transfer_troops = yes
				}
				annex_country = {
					target = ANG
					transfer_troops = yes
				}
				annex_country = {
					target = KAT
					transfer_troops = yes
				}
				annex_country = {
					target = TRD
					transfer_troops = yes
				}
				inherit_technology = TRD
				inherit_technology = KAT
				inherit_technology = ANG
				inherit_technology = ROU
				inherit_technology = PYT
				inherit_technology = YAL
				inherit_technology = BRZ
				inherit_technology = STW
				inherit_technology = FEA

				country_event = katzen_AF.99801
			}
			every_other_country = {
				limit = {
					is_griffon_empire_country_tag = yes
					NOT = { original_tag = GRI }
				}
				transfer_units_fraction= {
					target = GRI
					size = 1.0
				}
			}
			JER = {	
				every_other_country = {
					limit = {
						is_jer_country = yes
						NOT = { tag = JER }
					}
					transfer_units_fraction= {
						target = JER
						size = 1.0
					}
				}
				annex_country = {
					target = JFT
					transfer_troops = yes
				}
				annex_country = {
					target = JEB
					transfer_troops = yes
				}
				annex_country = {
					target = JRR
					transfer_troops = yes
				}
				annex_country = {
					target = VIN
					transfer_troops = yes
				}
				annex_country = {
					target = FEZ
					transfer_troops = yes
				}
				annex_country = {
					target = HEL
					transfer_troops = yes
				}
				annex_country = {
					target = FLO
					transfer_troops = yes
				}
				annex_country = {
					target = POM
					transfer_troops = yes
				}
				annex_country = {
					target = AET
					transfer_troops = yes
				}
				inherit_technology = JFT
				inherit_technology = JEB
				inherit_technology = JRR
				inherit_technology = VIN
				inherit_technology = FEZ
				inherit_technology = HEL
				inherit_technology = FLO
				inherit_technology = POM
				inherit_technology = AET

				country_event = katzen_AF.99801
			}
			every_other_country = {
				limit = {
					has_war_with = GRI
				}
				white_peace = GRI
			}
			every_other_country = {
				limit = {
					has_war_with = WNG
				}
				white_peace = WNG
			}
			every_other_country = {
				limit = {
					has_war_with = MIT
				}
				white_peace = MIT
			}
			RCT = {
				complete_national_focus = RIV_dreams_of_a_federation
				unlock_national_focus = RIV_science_society
				complete_national_focus = RIV_found_the_rcsc
				complete_national_focus = RIV_develop_DEP
				complete_national_focus = RIV_develop_DEP
				complete_national_focus = RIV_build_roads_in_DEP
				complete_national_focus = RIV_development_grants_DEP
				complete_national_focus = RIV_develop_FRE
				complete_national_focus = RIV_build_roads_in_FRE
				complete_national_focus = RIV_development_grants_FRE
				complete_national_focus = RIV_found_the_rdc
				complete_national_focus = RIV_found_the_rec
				complete_national_focus = RIV_rdc_rail_projects
				complete_national_focus = RIV_rdc_industry_projects
				complete_national_focus = RIV_rdc_local_investment_funds
				complete_national_focus = RIV_eastern_transport_fund
				complete_national_focus = RIV_social_fund
				complete_national_focus = RIV_beings_rights
				complete_national_focus = RIV_river_parliament
				complete_national_focus = RIV_free_movement
				complete_national_focus = RIV_centeral_bank
				complete_national_focus = RIV_the_rivbit
				complete_national_focus = RIV_the_river_union
				complete_national_focus = RIV_river_army
				complete_national_focus = RIV_river_government
				unlock_national_focus = RIV_the_federation

				set_variable = { annexed_riv_members = 1 }

				if = {
					limit = { has_dlc = "Together for Victory" }
					add_to_tech_sharing_group = RIV_science_society_group
				}
				else = {
					add_tech_bonus = {
						name = industrial_bonus
						bonus = 0.65
						uses = 1
						category = industry
						category = electronics
					}
				}
			}
	
			every_country = {
				limit = {
					is_in_faction_with = RCT
					NOT = { tag = RCT }
				}
				every_country = {
					limit = {
						is_subject_of = PREV
					}
					hidden_effect = {
						get_current_autonomy_level = yes
						get_current_government_type = yes
						end_puppet_this = yes
					}
					RCT = {
						puppet = PREV
					}
					hidden_effect = {
						restore_previous_government_type = yes
						set_previous_autonomy_level = yes
					}
				}
				
				every_state = {
					limit = {
						is_core_of = PREV
					}
					add_core_of = RCT
				}
				
				every_unit_leader = {
					set_nationality = RCT
				}
				
				RCT = {
					transfer_technology = yes
					RIV_add_country_idea_on_annex = yes
					set_country_flag = RIV_annexed_@PREV
					annex_country = { target = PREV transfer_troops = yes }
					add_to_variable = { annexed_riv_members = 1 }
					RIV_get_cosmetic_tag = yes
				}
			}

			RCT = {
				set_country_flag = river_federation_founder
				set_global_flag = river_federation_founded
				save_global_event_target_as = RivFed
				if = {
					limit = { NOT = { has_idea = modern_society } }
					add_ideas = modern_society
				}
				if = {
					limit = { NOT = { has_idea = proper_science_base } }
					set_country_flag = proper_science_base_unlocked
					add_ideas = proper_science_base
				}
			}
			HLQ = {
				annex_country = {
					target = LNS
					transfer_troops = yes
				}
				annex_country = {
					target = LSM
					transfer_troops = yes
				}
				annex_country = {
					target = LSC
					transfer_troops = yes
				}
			}
			every_other_country = {
				limit = {
					is_griffon_continent_country = yes
					is_faction_leader = yes
				}
				dismantle_faction = yes
			}
			RCT = {
				country_event = katzen_AF.99802
			}
			HAU = {
				unlock_national_focus = HAU_empire_of_the_isles
			}
		}
	}
}
country_event = { # Griffonia unification event. GRI gets cores on Herzland + Aquileia on Periphérie
	id = katzen_AF.99801
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99801"}
	hidden = yes
	is_triggered_only = yes
	option = {
		ROOT = {
			every_owned_state = {
				add_core_of = ROOT
			}
		}
	}
}
country_event = { #griffonia unification event - war begins
	id = katzen_AF.99802
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99802"}
	hidden = yes
	is_triggered_only = yes
	option = {
		create_faction = ABY_AF_united_griffonia_faction
		every_other_country = {
			limit = {
				is_griffon_continent_country = yes
				is_faction_leader = no
				NOT = {
					original_tag = HLR
				}
				NOT = {
					original_tag = DED
				}
			}
			country_event = katzen_AF.99803
		}
		declare_war_on = {
			target = ABY
			type = annex_everything
		}
		GRI = {
			unlock_national_focus = GRI_attack_GRF
		}
	}
}
country_event = { #griffonia unification event - every other country joins
	id = katzen_AF.99803
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99802"}
	hidden = yes
	is_triggered_only = yes
	option = {
		RCT = {
			add_to_faction = ROOT
		}
		add_to_war = {
			targeted_alliance = RCT
			enemy = ABY
			hostility_reason = asked_to_join
		}
		ROOT = {
			if = {
				limit = {
					is_ai = yes
				}
				add_ideas = ABY_AF_AI_country_gigawar_buff_idea
				add_ideas = ABY_AF_AI_country_gigawar_buff_griffonia_idea
			}
		}
	}
}
country_event = { #equus war event - Kaiser gets notified that shit is going down in Equus
	id = katzen_AF.99900
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99900"}
	title = katzen_AF.99900.t
	desc = katzen_AF.99900.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.99900.a
		every_other_country  = {
			limit = {
			  is_equestrian_continent_country = yes
			  has_war = yes
			}
			every_enemy_country = {
			  limit = { 
				NOT = { original_tag = ABY }
			  }
			  white_peace = PREV
			}
		  }
		hidden_effect = {
			if = {
				limit = {
					NLR = {
						owns_state = 3
					}
				}
				every_other_country = {
					limit = {
						is_eqs_civil_war_tag_tag = yes
						NOT = { tag = NLR }
					}
					transfer_units_fraction= {
						target = NLR
						size = 1.0
					}
				}
				NLR = {
					annex_country = {
						target = LSP
						transfer_troops = yes
					}
					annex_country = {
						target = EQS
						transfer_troops = yes
					}
					annex_country = {
						target = SCS
						transfer_troops = yes
					}
					annex_country = {
						target = VAN
						transfer_troops = yes
					}
					annex_country = {
						target = BAL
						transfer_troops = yes
					}
					annex_country = {
						target = NMS
						transfer_troops = yes
					}
					annex_country = {
						target = CES
						transfer_troops = yes
					}
					annex_country = {
						target = JUN
						transfer_troops = yes
					}
					annex_country = {
						target = TEM
						transfer_troops = yes
					}
					complete_national_focus = EQS_Civil_War_End 
					declare_war_on = {
						target = ABY
						type = annex_everything
					}
					inherit_technology = SCS
					inherit_technology = VAN
					inherit_technology = BAL
					inherit_technology = NMS
					inherit_technology = CES
					inherit_technology = JUN
					inherit_technology = EQS
				}
			}
			else = {
				every_other_country = {
					limit = {
						is_eqs_civil_war_tag_tag = yes
						NOT = { tag = EQS }
					}
					transfer_units_fraction= {
						target = EQS
						size = 1.0
					}
				}
				EQS = {
					annex_country = {
						target = LSP
						transfer_troops = yes
					}
					annex_country = {
						target = NLR
						transfer_troops = yes
					}
					annex_country = {
						target = SCS
						transfer_troops = yes
					}
					annex_country = {
						target = VAN
						transfer_troops = yes
					}
					annex_country = {
						target = BAL
						transfer_troops = yes
					}
					annex_country = {
						target = NMS
						transfer_troops = yes
					}
					annex_country = {
						target = CES
						transfer_troops = yes
					}
					annex_country = {
						target = JUN
						transfer_troops = yes
					}
					annex_country = {
						target = TEM
						transfer_troops = yes
					}
					complete_national_focus = EQS_Civil_War_End 
					declare_war_on = {
						target = ABY
						type = annex_everything
					}
					inherit_technology = SCS
					inherit_technology = VAN
					inherit_technology = BAL
					inherit_technology = NMS
					inherit_technology = CES
					inherit_technology = JUN
					inherit_technology = NLR
				}
			}
			YAK = {
				annex_country = {
					target = JAK
					transfer_troops = yes
				}
			}
			GRF = {
				annex_country = {
					target = GFF
					transfer_troops = yes
				}
			}
			every_other_country = {
				limit = {
					has_war_with = EQS
				}
				white_peace = EQS
			}
			every_other_country = {
				limit = {
					is_on_equestrian_continent = yes
					is_faction_leader = yes
					NOT = {
						original_tag = EQS
					}
				}
				dismantle_faction = yes
			}
			every_other_country = {
				limit = {
					is_on_equestrian_continent = yes
				}
				country_event = katzen_AF.99901
			}
		}
	}
}
country_event = { #equus war debug event 2
	id = katzen_AF.99901
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99901"}
	hidden = yes 	
	is_triggered_only = yes
	
	option = {
		EQS = {
			add_to_faction = ROOT
		}
		add_to_war = {
			targeted_alliance = EQS
			enemy = ABY
			hostility_reason = asked_to_join
		}
		add_to_tech_sharing_group = equestrian_research
		ROOT = {
			if = {
				limit = {
					is_ai = yes
				}
				add_ideas = ABY_AF_AI_country_gigawar_buff_idea
				add_ideas = ABY_AF_AI_country_gigawar_buff_equus_idea
			}
		}
	}
}

country_event = { #zebrica war debug event
	id = katzen_AF.99997
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99997"}
	title = katzen_AF.99997.t
	desc = katzen_AF.99997.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.99997.a
		hidden_effect = {
				every_other_country = {
					limit = {
						is_zebrican_continent_country = yes
					}
					declare_war_on = {
						target = ABY
						type = annex_everything
					}
				}
				every_other_country = {
					limit = {
						is_zebrican_continent_country = yes
						is_ai = yes
					}
					add_ideas = ABY_AF_AI_country_gigawar_buff_idea
					add_ideas = ABY_AF_AI_country_gigawar_buff_zebrica_idea
				}
		}
	}
}


country_event = { #debug event for spawning in dams
	id = katzen_AF.99999
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99999"}
	title = katzen_AF.99999.t
	desc = katzen_AF.99999.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.99999.a
		create_entity = {
			entity = tno_reference
			id = 9999999
			var = zebtropa_i_dam
			x = 11.3
			y = -1.5
			z = -0.1
			state = 869
			province = 14632
			scale = 1.0
			rotation = 2.5
			min_zoom = 3000.0
		}
	}
	option = {
		name = katzen_AF.99999.b
		create_entity = {
			entity = tno_reference
			id = 9999995
			var = jezeragrad_i_dam
			x = 0
			y = 4.6
			z = -0.1
			state = 387
			province = 12249
			scale = 0.5
			rotation = -1.5
			min_zoom = 3000.0
		}
	}
	option = {
		name = katzen_AF.99999.c
		create_entity = {
			entity = tno_reference
			id = 9999994
			var = ponezega_i_dam
			x = 0
			y = 9.4
			z = -0.1
			state = 615
			province = 4501
			scale = 0.5
			rotation = -2
			min_zoom = 3000.0
		}
	}
	option = {
		name = katzen_AF.99999.e
		create_entity = {
			entity = tno_reference
			id = 9999993
			var = vinnin_i_dam
			x = 1
			y = 6
			z = -0.1
			state = 405
			province = 11961
			scale = 0.5
			rotation = -2.4
			min_zoom = 3000.0
		}
	}
}
country_event = { #debug event for reactivating dockyard decisions
	id = katzen_AF.99998
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.99998"}
	title = katzen_AF.99998.t
	desc = katzen_AF.99998.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	option = {
		name = katzen_AF.99998.a
		activate_targeted_decision = { target = 695 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 696 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 693 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 692 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 784 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 1199 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 1198 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 1197 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 1196 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 1195 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 1994 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 1193 decision = ABY_AF_giga_shipyards_decision }
		activate_targeted_decision = { target = 4 decision = ABY_AF_giga_shipyards_decision }
	}
	option = {
		name = katzen_AF.99999.b
		activate_decision = ABY_AF_griffonian_power_dam_jezeragrad_decision
	}
	option = {
		name = katzen_AF.99999.c
		activate_decision = ABY_AF_zebhara_decision
		for_each_loop = {
			array = ABY_AF_zebhara_states_array
			value = state_id
			var:state_id = {
				add_extra_state_shared_building_slots = 2
				add_manpower = 50000
				increase_state_category = yes
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

country_event = { #fallback crusade
	id = katzen_AF.5000
	immediate = {log = "[GetDateText]: [Root.GetName]: event katzen_AF.100"}
	title = katzen_AF.5000.t
	desc = katzen_AF.5000.d
	picture = GFX_event_aby_af_kattail

	is_triggered_only = yes

	option = {
		name = katzen_AF.5000.a
		set_rule = {
			can_not_declare_war = no
		}
		add_ideas = ABY_AF_grand_crusade_idea
	}
}

country_event = { #world unification
	id = katzen_AF.5001
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event katzen_AF.5001"
		set_global_flag = ABY_AF_world_united_against_kattail
	}
	title = katzen_AF.5001.t
	desc = katzen_AF.5001.d
	picture = GFX_event_canterlot
	fire_only_once = yes

	trigger = {
		NOT = { has_global_flag = ABY_AF_world_united_against_kattail }
		tag = ABY
		has_country_flag = ABY_AF_endgame_start_flag
		OR = {
			check_variable = {
				num_owned_controlled_states > 700 #About two thirds of the planet
			}
			check_variable = {
				num_of_civilian_factories  > 300
			}
			check_variable = {
				num_of_military_factories   > 400
			}
		}
		NOT = { #Not in MP
			any_country = {
				is_ai = no
				NOT = { tag = ABY }
			}
		}
	}

	option = {
		name = katzen_AF.5001.a
		custom_effect_tooltip = katzen_AF.5001.a.tt
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_idea = ABY_AF_grand_crusade_idea }
				}
				country_event = { id = katzen_AF.5000 days = 30 }
			}
			random_country = {
				limit = {
					NOT = { tag = ABY }
					is_major = yes
					has_war_with = ABY
				}
				save_global_event_target_as = ABY_AF_world_federation
				every_country = {
					limit = {
						is_ai = yes
						NOT = { tag = ABY }
						NOT = { has_idea = detached_country }
					}
					if = {
						limit = { NOT = { has_war_with = ABY } }
						declare_war_on = {
							target = ABY
							type = annex_everything
						}
					}
					transfer_units_fraction= {
						target = event_target:ABY_AF_world_federation
						target_organization = 1
						source_organization = 1
						keep_unit_leaders_trigger = { always = yes }
						size = 1
						stockpile_ratio = 1.0
						army_ratio = 1.0
						navy_ratio = 1.0
						air_ratio = 1.0
					}
					every_unit_leader = { set_nationality = event_target:ABY_AF_world_federation }
					event_target:ABY_AF_world_federation = {
						inherit_technology = PREV
						annex_country = {
							target = PREV
							transfer_troops = yes
						}
					}
				}
			}
			event_target:ABY_AF_world_federation = {
				set_research_slots = 7 #It's the entire world
				increase_society_development = yes
				increase_society_development = yes
				increase_society_development = yes
				decrease_poverty = yes
				decrease_poverty = yes
				decrease_poverty = yes
				set_cosmetic_tag = ABY_AF_UFS
				every_state = { add_core_of = event_target:ABY_AF_world_federation }
				add_ideas = ABY_AF_world_federation_last_stand
				set_politics = {
					ruling_party = democratic
					elections_allowed = no
					long_name = "ABY_AF_UFS_party_name"
					name = "ABY_AF_UFS_party_name"
				}
				hidden_effect = {
					add_popularity = {
						ideology = democratic
						popularity = 1.00
					}
				}
				load_focus_tree = BAR_empty_tree
				declare_war_on = {
					target = ABY
					type = annex_everything
				}
				if = {
					limit = { is_in_faction = yes }
					leave_faction = yes
				}
				country_event = { id = katzen_AF.5002 days = 2 }
			}
			ABY_AF_UFS_Leader = {
				set_nationality = event_target:ABY_AF_world_federation
				promote_leader = yes
				add_country_leader_role = {
					promote_leader = yes
					country_leader = {
						ideology = alicornrule
						expire = "1965.1.1.1"
					}
				}
			}
		}
	}
}

country_event = { #give UFS cosmetic tag again just in case
	id = katzen_AF.5002
	immediate = {
		log = "[GetDateText]: [Root.GetName]: event katzen_AF.5002"
		set_cosmetic_tag = ABY_AF_UFS
	}
	hidden = yes
	fire_only_once = yes
	is_triggered_only = yes
}