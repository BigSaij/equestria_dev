add_namespace = bronzehill
add_namespace = bronzehill_industrial
add_namespace = bronzehill_politicalintroduction
add_namespace = bronzehill_council
add_namespace = bronzehill_loyalist
add_namespace = bronzehill_revenge
add_namespace = bronzehill_news

#The Emperor is Dead
country_event = {
	id = bronzehill.1
	immediate = {log = "[Root.GetName]: event bronzehill.1"}#Auto-logging
	title = bronzehill.1.t
	desc = bronzehill.1.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	fire_only_once = yes
	option = {
		name = bronzehill.1.a
		add_stability = -0.25
		
		add_timed_idea = {
			idea = BRZ_the_mourning
			days = 150
		}
		
		set_country_flag = BRZ_grover_v_dead
	}
}

# Story events for the industrial tree

# Ravensburg Dam
country_event = {
	id = bronzehill_industrial.1
	immediate = {log = "[Root.GetName]: event bronzehill_industrial.1"}#Auto-logging
	title = bronzehill_industrial.1.t
	desc = bronzehill_industrial.1.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_industrial.1.a
	}
}

# Argument in the Family
country_event = {
	id = bronzehill_industrial.2
	immediate = {log = "[Root.GetName]: event bronzehill_industrial.2"}#Auto-logging
	title = bronzehill_industrial.2.t
	desc = bronzehill_industrial.2.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_industrial.2.a
	}
}

# Story events for the political introduction tree

# The Chairdogship
country_event = {
	id = bronzehill_politicalintroduction.1
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.1"}#Auto-logging
	title = bronzehill_politicalintroduction.1.t
	desc = bronzehill_politicalintroduction.1.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.1.a
	}
}

# The old reformer
country_event = {
	id = bronzehill_politicalintroduction.2
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.2"}#Auto-logging
	title = bronzehill_politicalintroduction.2.t
	desc = bronzehill_politicalintroduction.2.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.2.a
	}
}

# An usual guest
country_event = {
	id = bronzehill_politicalintroduction.3
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.3"}#Auto-logging
	title = bronzehill_politicalintroduction.3.t
	desc = bronzehill_politicalintroduction.3.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.3.a
	}
}

# Word with Loudbark
country_event = {
	id = bronzehill_politicalintroduction.4
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.4"}#Auto-logging
	title = bronzehill_politicalintroduction.4.t
	desc = bronzehill_politicalintroduction.4.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.4.a
	}
}

# Up in the Hills
country_event = {
	id = bronzehill_politicalintroduction.5
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.5"}#Auto-logging
	title = bronzehill_politicalintroduction.5.t
	desc = bronzehill_politicalintroduction.5.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.5.a
	}
}

# A Meeting in Ravensburg
country_event = {
	id = bronzehill_politicalintroduction.6
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.6"}#Auto-logging
	title = bronzehill_politicalintroduction.6.t
	desc = bronzehill_politicalintroduction.6.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.6.a
	}
}

# Finishing the list
country_event = {
	id = bronzehill_politicalintroduction.7
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.7"}#Auto-logging
	title = bronzehill_politicalintroduction.7.t
	desc = bronzehill_politicalintroduction.7.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.7.a
		
		set_country_flag = BRZ_luxembark_in_the_council
	}
	
	option = {
		name = bronzehill_politicalintroduction.7.b
		
		custom_effect_tooltip = bronzehill_politicalintroduction.7.b_tooltip
		
		hidden_effect = {
			country_event = {
				id = bronzehill_politicalintroduction.8
				days = 5
			}
		}
	}
}

# Barking-Sun deposes Luxembark
country_event = {
	id = bronzehill_politicalintroduction.8
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.8"}#Auto-logging
	title = bronzehill_politicalintroduction.8.t
	desc = bronzehill_politicalintroduction.8.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.8.a
		
		add_country_leader_role = {
			character = BRZ_kimball_barking_sun
			country_leader = {
				desc = BRZ_BARKINGSUN_DESC
				expire = "1965.1.1"
				ideology = juche
				traits = { champion_of_the_great_leader }
			}
			promote_leader = yes
		}
		
		set_party_name = {
			ideology = communism
			name = BRZ_communism_party_kim
			long_name = BRZ_communism_party_kim_long
		}
	}
}

# The Council Votes
country_event = {
	id = bronzehill_politicalintroduction.9
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.9"}#Auto-logging
	title = bronzehill_politicalintroduction.9.t
	
	desc = {
		text = bronzehill_politicalintroduction.9.d
		trigger = {
			has_country_flag = BRZ_luxembark_in_the_council
		}
	}
	desc = {
		text = bronzehill_politicalintroduction.9.d_no_lux
	}
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.9.a
	}
}

# The Fallout (Old Loyalties)
country_event = {
	id = bronzehill_politicalintroduction.10
	immediate = {log = "[Root.GetName]: event bronzehill_politicalintroduction.10"}#Auto-logging
	title = bronzehill_politicalintroduction.10.t
	desc = bronzehill_politicalintroduction.10.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_politicalintroduction.10.a
	}
}

## Council events

# Powerstruggle starts
country_event = {
	id = bronzehill_council.1
	immediate = {log = "[Root.GetName]: event bronzehill_council.1"}#Auto-logging
	title = bronzehill_council.1.t
	
	desc = {
		text = bronzehill_council.1.d
		trigger = {
			has_country_flag = BRZ_luxembark_in_the_council
		}
	}
	desc = {
		text = bronzehill_council.1.d_no_lux
	}
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			country_event = {
				id = bronzehill_council.4
				days = 30
			}
			country_event = {
				id = bronzehill_council.5
				days = 65
			}
			country_event = {
				id = bronzehill_council.6
				days = 100
			}
			country_event = {
				id = bronzehill_council.7
				days = 140
			}
			country_event = {
				id = bronzehill_council.8
				days = 180
			}
			
			add_ideas = BRZ_powerstruggle_in_the_council
			
			activate_mission = BRZ_council_timeout_mission
			
			activate_mission = BRZ_copperhill_influence_mission
			activate_mission = BRZ_loudbark_influence_mission
			if = {
				limit = {
					has_country_flag = BRZ_luxembark_in_the_council
				}
				activate_mission = BRZ_luxembark_influence_mission
			} else = {
				activate_mission = BRZ_barkingsun_influence_mission
			}
			
			# Initialize the variables for powerstruggle
			set_variable = {
				BRZ_council_powerstruggle_influence_copperhill = 20
			}
			set_variable = {
				BRZ_council_powerstruggle_influence_loudbark = 20
			}
			if = {
				limit = {
					has_country_flag = BRZ_luxembark_in_the_council
				}
				set_variable = {
					BRZ_council_powerstruggle_influence_luxembark = 3
				}
			} else = {
				set_variable = {
					BRZ_council_powerstruggle_influence_luxembark = 0
				}
			}
			if = {
				limit = {
					has_country_flag = BRZ_luxembark_in_the_council
				}
				set_variable = {
					BRZ_council_powerstruggle_radicalization = 0
				}
			} else = {
				set_variable = {
					BRZ_council_powerstruggle_radicalization = 20
				}
			}
		}
	}
	
	option = {
		name = bronzehill_council.1.a
		
		effect_tooltip = {
			add_ideas = BRZ_powerstruggle_in_the_council
			
			activate_mission = BRZ_council_timeout_mission
			
			activate_mission = BRZ_copperhill_influence_mission
			activate_mission = BRZ_loudbark_influence_mission
			if = {
				limit = {
					has_country_flag = BRZ_luxembark_in_the_council
				}
				activate_mission = BRZ_luxembark_influence_mission
			} else = {
				activate_mission = BRZ_barkingsun_influence_mission
			}
		}
	}
}

# Result (Not Barking-Sun)
country_event = {
	id = bronzehill_council.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_council.2"}
	title = bronzehill_council.2.t
	desc = bronzehill_council.2.d
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = { # Calculate relative scores
		hidden_effect = {
			BRZ = {
				set_variable = {
					var = temp_copperhill_loudbark_comparison 
					value = BRZ_council_powerstruggle_influence_copperhill
				}
				subtract_from_variable = {
					var = temp_copperhill_loudbark_comparison
					value = BRZ_council_powerstruggle_influence_loudbark
				}
				set_variable = {
					var = temp_copperhill_luxembark_comparison
					value = BRZ_council_powerstruggle_influence_copperhill
				}
				subtract_from_variable = {
					var = temp_copperhill_luxembark_comparison
					value = BRZ_council_powerstruggle_influence_luxembark
				}
				set_variable = {
					var = temp_loudbark_luxembark_comparison
					value = BRZ_council_powerstruggle_influence_loudbark
				}
				subtract_from_variable = {
					var = temp_loudbark_luxembark_comparison
					value = BRZ_council_powerstruggle_influence_luxembark
				}
			}
			
			if = {
				limit = {
					is_subject_of = GRI
				}
				GRI = {
					end_puppet = ROOT
				}
			}
			if = {
				limit = {
					is_in_faction_with = GRI
				}
				leave_faction = yes
			}

			add_ai_strategy = {
				type = befriend
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = support
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = alliance
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = antagonize
				id = GRI
				value = 200
			}
			
			news_event = {
				id = bronzehill_news.1
				days = 2
			}
		}
	}
	
	option = { # Copperhill wins
		trigger = {
			check_variable = { temp_copperhill_loudbark_comparison > 0 } # Copperhill wins over Loudbark
			check_variable = { temp_copperhill_luxembark_comparison > 0 } # Copperhill wins over Luxembark
		}
		
		name = bronzehill_council.2.a
		
		# Remove any active council struggle missions
		if = {
			limit = {
				has_active_mission = BRZ_council_timeout_mission
			}
			remove_mission = BRZ_council_timeout_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_copperhill_influence_mission
			}
			remove_mission = BRZ_copperhill_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_loudbark_influence_mission
			}
			remove_mission = BRZ_loudbark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_luxembark_influence_mission
			}
			remove_mission = BRZ_luxembark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_barkingsun_influence_mission
			}
			remove_mission = BRZ_barkingsun_influence_mission
		}
		
		add_ideas = BRZ_unruly_nobility
		add_ideas = BRZ_socialist_discontent
		add_ideas = BRZ_disloyal_army
		
		set_politics = {
			ruling_party = democratic
		}
		
		clear_variable = temp_copperhill_loudbark_comparison
		clear_variable = temp_copperhill_luxembark_comparison
		clear_variable = temp_loudbark_luxembark_comparison
		
		effect_tooltip = {
			if = {
				limit = {
					is_subject_of = GRI
				}
				GRI = {
					end_puppet = ROOT
				}
			}
			if = {
				limit = {
					is_in_faction_with = GRI
				}
				leave_faction = yes
			}
		}
	}
	
	option = { # Loudbark wins
		trigger = {
			check_variable = { temp_copperhill_loudbark_comparison < 0 } # Loudbark wins over Copperhill
			check_variable = { temp_loudbark_luxembark_comparison > 0 } # Loudbark wins over Luxembark
		}
		
		name = bronzehill_council.2.b
		
		# Remove any active council struggle missions
		if = {
			limit = {
				has_active_mission = BRZ_council_timeout_mission
			}
			remove_mission = BRZ_council_timeout_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_copperhill_influence_mission
			}
			remove_mission = BRZ_copperhill_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_loudbark_influence_mission
			}
			remove_mission = BRZ_loudbark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_luxembark_influence_mission
			}
			remove_mission = BRZ_luxembark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_barkingsun_influence_mission
			}
			remove_mission = BRZ_barkingsun_influence_mission
		}
		
		set_politics = {
			ruling_party = fascism
		}
		
		add_ideas = BRZ_unruly_nobility
		add_ideas = BRZ_socialist_agitation
		
		clear_variable = temp_copperhill_loudbark_comparison
		clear_variable = temp_copperhill_luxembark_comparison
		clear_variable = temp_loudbark_luxembark_comparison
		
		effect_tooltip = {
			if = {
				limit = {
					is_subject_of = GRI
				}
				GRI = {
					end_puppet = ROOT
				}
			}
			if = {
				limit = {
					is_in_faction_with = GRI
				}
				leave_faction = yes
			}
		}
	}
	option = { # Luxembark wins
		trigger = {
			check_variable = { temp_copperhill_luxembark_comparison < 0 } # Luxembark wins over Copperhill
			check_variable = { temp_loudbark_luxembark_comparison < 0 } # Luxembark wins over Loudbark
		}
		
		name = bronzehill_council.2.c
		
		# Remove any active council struggle missions
		if = {
			limit = {
				has_active_mission = BRZ_council_timeout_mission
			}
			remove_mission = BRZ_council_timeout_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_copperhill_influence_mission
			}
			remove_mission = BRZ_copperhill_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_loudbark_influence_mission
			}
			remove_mission = BRZ_loudbark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_luxembark_influence_mission
			}
			remove_mission = BRZ_luxembark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_barkingsun_influence_mission
			}
			remove_mission = BRZ_barkingsun_influence_mission
		}
		
		set_politics = {
			ruling_party = communism
		}
		
		add_ideas = BRZ_hostile_ignatius
		add_ideas = BRZ_unruly_nobility
		add_ideas = BRZ_disloyal_army
		
		clear_variable = temp_copperhill_loudbark_comparison
		clear_variable = temp_copperhill_luxembark_comparison
		clear_variable = temp_loudbark_luxembark_comparison
		
		effect_tooltip = {
			if = {
				limit = {
					is_subject_of = GRI
				}
				GRI = {
					end_puppet = ROOT
				}
			}
			if = {
				limit = {
					is_in_faction_with = GRI
				}
				leave_faction = yes
			}
		}
	}
}

# Barking-Sun's Takeover
country_event = {
	id = bronzehill_council.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_council.3"}
	title = bronzehill_council.3.t
	desc = bronzehill_council.3.d
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					is_subject_of = GRI
				}
				GRI = {
					end_puppet = ROOT
				}
			}
			if = {
				limit = {
					is_in_faction_with = GRI
				}
				leave_faction = yes
			}

			add_ai_strategy = {
				type = befriend
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = support
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = alliance
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = antagonize
				id = GRI
				value = 200
			}
			
			news_event = {
				id = bronzehill_news.1
				days = 2
			}
		}
	}
	
	option = {
		name = bronzehill_council.3.a
		
		# Remove any active council struggle missions
		if = {
			limit = {
				has_active_mission = BRZ_council_timeout_mission
			}
			remove_mission = BRZ_council_timeout_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_copperhill_influence_mission
			}
			remove_mission = BRZ_copperhill_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_loudbark_influence_mission
			}
			remove_mission = BRZ_loudbark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_luxembark_influence_mission
			}
			remove_mission = BRZ_luxembark_influence_mission
		}
		if = {
			limit = {
				has_active_mission = BRZ_barkingsun_influence_mission
			}
			remove_mission = BRZ_barkingsun_influence_mission
		}
		
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		
		add_ideas = BRZ_unruly_nobility
		add_ideas = BRZ_disloyal_army
		add_ideas = BRZ_unrest_in_academia
		
		effect_tooltip = {
			if = {
				limit = {
					is_subject_of = GRI
				}
				GRI = {
					end_puppet = ROOT
				}
			}
			if = {
				limit = {
					is_in_faction_with = GRI
				}
				leave_faction = yes
			}
		}
	}
}

# City Councils deliberate
country_event = {
	id = bronzehill_council.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_council.4"}
	title = bronzehill_council.4.t
	desc = bronzehill_council.4.d
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { # Yay copperhill
		name = bronzehill_council.4.a
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_copperhill
			value = 5
			tooltip = BRZ_copperhill_influence_rise_5
		}
	}
	option = { # Yay Loudbark
		name = bronzehill_council.4.b
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_loudbark
			value = 5
			tooltip = BRZ_loudbark_influence_rise_5
		}
	}
	option = { # Yay Luxembark
		trigger = {
			has_country_flag = BRZ_luxembark_in_the_council
		}
	
		name = bronzehill_council.4.c
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_luxembark
			value = 5
			tooltip = BRZ_luxembark_influence_rise_5
		}
	}
}

# Clashes in the streets
country_event = {
	id = bronzehill_council.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_council.5"}
	title = bronzehill_council.5.t
	desc = bronzehill_council.5.d
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { # Loudbark wins in the streets
		name = bronzehill_council.5.a
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_loudbark
			value = 10
			tooltip = BRZ_loudbark_influence_rise_10
		}
		if = {
			limit = {
				has_country_flag = BRZ_luxembark_in_the_council
			}
			subtract_from_variable = {
				var = BRZ_council_powerstruggle_influence_luxembark
				value = 3
				tooltip = BRZ_luxembark_influence_shrink_3
			}
		}
	}
	option = { # Violence against workers gets condemned
	
		name = bronzehill_council.5.b
		
		if = {
			limit = {
				has_country_flag = BRZ_luxembark_in_the_council
			}
			add_to_variable = {
				var = BRZ_council_powerstruggle_influence_luxembark
				value = 10
				tooltip = BRZ_luxembark_influence_rise_10
			}
			subtract_from_variable = {
				var = BRZ_council_powerstruggle_influence_loudbark
				value = 3
				tooltip = BRZ_loudbark_influence_shrink_3
			}
		} else = {
			add_stability = 0.02
			add_war_support = -0.02
			
			subtract_from_variable = {
				var = BRZ_council_powerstruggle_influence_loudbark
				value = 3
				tooltip = BRZ_loudbark_influence_shrink_3
			}
		}
	}
}

# Swaying the nobles
country_event = {
	id = bronzehill_council.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_council.6"}
	title = bronzehill_council.6.t
	desc = bronzehill_council.6.d
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { # more nobles side with copperhill
		name = bronzehill_council.6.a
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_copperhill
			value = 10
			tooltip = BRZ_copperhill_influence_rise_10
		}
		subtract_from_variable = {
			var = BRZ_council_powerstruggle_influence_loudbark
			value = 3
			tooltip = BRZ_loudbark_influence_shrink_3
		}
	}
	option = { # more nobles side with loudbark
		name = bronzehill_council.6.b
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_loudbark
			value = 10
			tooltip = BRZ_loudbark_influence_rise_10
		}
		subtract_from_variable = {
			var = BRZ_council_powerstruggle_influence_copperhill
			value = 3
			tooltip = BRZ_copperhill_influence_shrink_3
		}
	}
}

# The student movement
country_event = {
	id = bronzehill_council.7
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_council.7"}
	title = bronzehill_council.7.t
	
	desc = {
		text = bronzehill_council.7.d_lux
		trigger = {
			has_country_flag = BRZ_luxembark_in_the_council
		}
	}
	desc = {
		text = bronzehill_council.7.d_no_lux
	}
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { # students side with copperhill
		name = bronzehill_council.7.a
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_copperhill
			value = 10
			tooltip = BRZ_copperhill_influence_rise_10
		}
		if = {
			limit = {
				has_country_flag = BRZ_luxembark_in_the_council
			}
			subtract_from_variable = {
				var = BRZ_council_powerstruggle_influence_luxembark
				value = 3
				tooltip = BRZ_luxembark_influence_shrink_3
			}
		}
	}
	option = { # students side with luxembark
		trigger = {
			has_country_flag = BRZ_luxembark_in_the_council
		}
	
		name = bronzehill_council.7.b
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_luxembark
			value = 10
			tooltip = BRZ_luxembark_influence_rise_10
		}
		subtract_from_variable = {
			var = BRZ_council_powerstruggle_influence_copperhill
			value = 3
			tooltip = BRZ_copperhill_influence_shrink_3
		}
	}
	option = { # students remain silent, but the workers won't
		trigger = {
			NOT = { has_country_flag = BRZ_luxembark_in_the_council }
		}
	
		name = bronzehill_council.7.c
		
		add_stability = -0.02
		add_war_support = 0.02
	}
}

# The last unaligned
country_event = {
	id = bronzehill_council.8
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_council.8"}
	title = bronzehill_council.8.t
	desc = bronzehill_council.8.d
	
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = { # Yay copperhill
		name = bronzehill_council.8.a
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_copperhill
			value = 5
			tooltip = BRZ_copperhill_influence_rise_5
		}
	}
	option = { # Yay Loudbark
		name = bronzehill_council.8.b
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_loudbark
			value = 5
			tooltip = BRZ_loudbark_influence_rise_5
		}
	}
	option = { # Yay Luxembark
		trigger = {
			has_country_flag = BRZ_luxembark_in_the_council
		}
	
		name = bronzehill_council.8.c
		
		add_to_variable = {
			var = BRZ_council_powerstruggle_influence_luxembark
			value = 5
			tooltip = BRZ_luxembark_influence_rise_5
		}
	}
	option = { # All bogged down
		trigger = {
			NOT = { has_country_flag = BRZ_luxembark_in_the_council }
		}
		
		name = bronzehill_council.8.e # no d
	}
}

## Loyalist Events

# Trip to Mirabelle
country_event = {
	id = bronzehill_loyalist.1
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.1"}#Auto-logging
	title = bronzehill_loyalist.1.t
	desc = bronzehill_loyalist.1.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.1.a
		custom_effect_tooltip = bronzehill_loyalist.1.a_tooltip
	}
}

# Visit from Bronzekreuz
country_event = {
	id = bronzehill_loyalist.2
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.2"}#Auto-logging
	title = bronzehill_loyalist.2.t
	desc = bronzehill_loyalist.2.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.2.a
		custom_effect_tooltip = bronzehill_loyalist.2.a_tooltip
	}
}

# Griffenheim is informed
country_event = {
	id = bronzehill_loyalist.3
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.3"}#Auto-logging
	title = bronzehill_loyalist.3.t
	desc = bronzehill_loyalist.3.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.3.a
		custom_effect_tooltip = bronzehill_loyalist.3.a_tooltip
	}
}

# Strawberry at war - Bronzehill joins
country_event = {
	id = bronzehill_loyalist.4
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.4"}#Auto-logging
	title = bronzehill_loyalist.4.t
	desc = bronzehill_loyalist.4.d
	picture = GFX_event_griffon_back
	
	trigger = {
		tag = BRZ
		has_completed_focus = BRZ_trip_to_readewetter
		
		NOT = { has_war_with = GRI }	
	
		STW = {
			has_war_with = GRI
		}
	}
	
	# No mean time to happen - fire as fast as possible
	
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.4.a
		
		# Add claims to Herzland, so that Bronzehill annexes everything
		add_state_claim = 382
		add_state_claim = 405
		add_state_claim = 397
		add_state_claim = 437
		add_state_claim = 555
		
		declare_war_on = {
			target = GRI
			type = annex_everything
		}
	}
}

# Question of the Herzland (Gabriela controls Griffenheim - Ignatius concedes)
country_event = {
	id = bronzehill_loyalist.5
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.5"}#Auto-logging
	title = bronzehill_loyalist.5.t
	desc = bronzehill_loyalist.5.d
	picture = GFX_event_griffon_back
	
	trigger = {
	
		tag = BRZ
		
		has_completed_focus = BRZ_trip_to_readewetter
		
		STW = { # Gabriela owns Griffenheim
			owns_state = 382 # Griffenheim
		}
	}
	
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.5.a
		
		add_stability = 0.1
		add_political_power = 100
		
		STW = {
			country_event = {
				id = bronzehill_loyalist.6
				days = 2
			}
		}
		
		STW = { 
			puppet = BRZ
		}
		
		382 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		405 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		397 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		437 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		555 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
	}
}

# Strawberry is informed that Ignatius concedes
country_event = {
	id = bronzehill_loyalist.6
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.6"}#Auto-logging
	title = bronzehill_loyalist.6.t
	desc = bronzehill_loyalist.6.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.6.a
		
		add_stability = 0.05
	}
}

# Question of the regency (Bronzehill controls Griffenheim - Ignatius has the choice)
country_event = {
	id = bronzehill_loyalist.7
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.7"}#Auto-logging
	title = bronzehill_loyalist.7.t
	desc = bronzehill_loyalist.7.d
	picture = GFX_event_griffon_back
	
	trigger = {
	
		tag = BRZ
		
		has_completed_focus = BRZ_a_trip_to_readewetter
		
		BRZ = { # Bronzehill owns Griffenheim
			owns_state = 382 # Griffenheim
		}
	}
	
	fire_only_once = yes
	
	option = { # Grant the regency to Gabriela
		name = bronzehill_loyalist.7.a
		trigger = {
			country_exists = STW # If Gabriela lost she can't become regent... should be rare though
		}
		custom_effect_tooltip = bronzehill_loyalist.7.b_tooltip
		
		add_stability = 0.1
		add_political_power = 100
		
		STW = { 
			country_event = {
				id = bronzehill_loyalist.8
				days = 2
			}
		}
		
		STW = { 
			puppet = BRZ
		}
		
		382 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		405 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		397 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		437 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
		555 = {
			remove_claim_by = BRZ
			if = {
				limit = {
					is_owned_by = BRZ
				}
				transfer_state_to = STW
			}
		}
	}
	
	option = { # Claim the regency
		name = bronzehill_loyalist.7.b
		trigger = {
			country_exists = STW
		}
		custom_effect_tooltip = bronzehill_loyalist.7.b_tooltip
		
		add_stability = -0.05 # Bad Dogs
		
		# (potential) Hostility towards Strawberry
		add_ai_strategy = {
			type = befriend
			id = STW
			value = -200
		}
		add_ai_strategy = {
			type = protect
			id = STW
			value = -200
		}
		add_ai_strategy = {
			type = send_volunteers_desire
			id = STW
			value = -200
		}
		add_ai_strategy = {
			type = support
			id = STW
			value = -200
		}
		add_ai_strategy = {
			type = alliance
			id = STW
			value = -200
		}
		add_ai_strategy = {
			type = antagonize
			id = STW
			value = 200
		}
		
		STW = {
			country_event = {
				id = bronzehill_loyalist.9
				days = 2
			}
		}
	}
	
	option = { # Claim the regency - no Gabriela
		name = bronzehill_loyalist.7.c
		trigger = {
			NOT = { country_exists = STW }
		}
		
		set_country_flag = can_declare_empire
	}
}

# Strawberry is informed (Regency granted to Gabriela)
country_event = {
	id = bronzehill_loyalist.8
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.8"}#Auto-logging
	title = bronzehill_loyalist.8.t
	desc = bronzehill_loyalist.8.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.8.a
		
		add_stability = 0.05
		# add_ideas = BRZ_best_dogs # As a reward for Gabriela
	}
}

# Ignatius claims the regency and demands annexation
country_event = {
	id = bronzehill_loyalist.9
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.9"}#Auto-logging
	title = bronzehill_loyalist.9.t
	desc = bronzehill_loyalist.9.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = { # He has gone insane
		name = bronzehill_loyalist.9.a
		
		add_war_support = 0.05
		
		declare_war_on = {
			target = BRZ
			type = annex_everything
		}
		
		BRZ = {
			country_event = {
				id = bronzehill_loyalist.10
				days = 2
			}
		}
		
		ai_chance = {
			base = 1
			
			modifier = { # If less than half the troops of Bronzehill, always accept
				strength_ratio = {
					tag = BRZ # Bronzehill
					ratio < 0.5
				}
				factor = 0
			}
		}
	}
	
	option = { # Fine
		name = bronzehill_loyalist.8.better
		custom_effect_tooltip = GAME_OVER_TT
		
		BRZ = {
			country_event = {
				id = bronzehill_loyalist.11
				days = 2
			}
		}
		
		ai_chance = {
			base = 1
			
			modifier = { # If more troops than Bronzehill, always refuse
				strength_ratio = {
					tag = BRZ # Bronzehill
					ratio > 1
				}
				factor = 0
			}
		}
	}
}

# Gabriela refuses and declares war - Bronzehill can now declare the Empire
country_event = {
	id = bronzehill_loyalist.10
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.10"}#Auto-logging
	title = bronzehill_loyalist.10.t
	desc = bronzehill_loyalist.10.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.10.a
		
		add_stability = -0.05
		add_war_support = 0.05
		
		set_country_flag = can_declare_empire
	}
}

# Gabriela accepts - Bronzehill annexes her
country_event = {
	id = bronzehill_loyalist.11
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.11"}#Auto-logging
	title = bronzehill_loyalist.11.t
	desc = bronzehill_loyalist.11.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.11.a
		
		annex_country = {
			target = STW
			transfer_troops = yes
		}
		
		set_country_flag = gabriela_peacefully_submitted
		set_country_flag = can_declare_empire
	}
}

# Loyalty to Griffenheim - Griffenheim is informed
country_event = {
	id = bronzehill_loyalist.12
	immediate = {log = "[Root.GetName]: event bronzehill_loyalist.12"}#Auto-logging
	title = bronzehill_loyalist.12.t
	desc = bronzehill_loyalist.12.d
	picture = GFX_event_griffon_back
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = bronzehill_loyalist.12.a
		
		add_political_power = 10
	}
}

##############################
######	REVENGE Events	######
##############################

#The Monsters in the Capital
country_event = {
	id = bronzehill_revenge.1
	immediate = {log = "[Root.GetName]: event bronzehill_revenge.1"}#Auto-logging
	title = bronzehill_revenge.1.t
	desc = bronzehill_revenge.1.d
	picture = GFX_event_griffon_soldier
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			#set_country_flag = BRZ_revenge_tree_loaded
			#load_focus_tree = brz_revenge_tree
		}
	}
	
	fire_only_once = yes
	option = { #Oh No
		name = bronzehill_revenge.1.a
		add_ideas = BRZ_the_chrisis
		OVERLORD = {
			set_autonomy = {
				target = ROOT
				autonomy_state = autonomy_free
			}
		}
		leave_faction = yes
		add_opinion_modifier = {
			target = GRI
			modifier = sworn_enemies
		}
		add_opinion_modifier = {
			target = GRI
			modifier = BRZ_murdered_the_emperor
		}
		effect_tooltip = {
			load_focus_tree = brz_revenge_tree
		}

		hidden_effect = {
			set_country_flag = herzland_diplomacy_blocked
			add_ai_strategy = {
				type = befriend
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = support
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = alliance
				id = GRI
				value = -200
			}
			add_ai_strategy = {
				type = antagonize
				id = GRI
				value = 200
			}
		}
	}
}

###############
# News events #
###############
# To be adjusted

news_event = { # Bronzehill Takes Griffonhime
	id = bronzehill_news.2
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_news.2"}
	title = bronzehill_news.2.t
	desc = bronzehill_news.2.d
	picture = GFX_news_bronzhill_fighting

	major = yes

	is_triggered_only = yes

	option = {
		name = bronzehill_news.2.a
		trigger = { tag = BRZ }
	}
	option = {
		name = bronzehill_news.2.b
		trigger = {
			NOT = { tag = BRZ }
		}
	}
}

news_event = { # Bronzehill Takes Griffonhime - Emperor Dead :(
	id = bronzehill_news.3
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_news.3"}
	title = bronzehill_news.3.t
	desc = bronzehill_news.3.d
	picture = GFX_news_bronzhill_fighting

	major = yes

	is_triggered_only = yes

	option = {
		name = bronzehill_news.3.a
		trigger = { tag = BRZ }
	}
	option = {
		name = bronzehill_news.3.b
		trigger = {
			NOT = { tag = BRZ }
		}
	}
}

news_event = { # The Funeral of the Emperor
	id = bronzehill_news.4
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_news.4"}
	title = bronzehill_news.4.t
	desc = bronzehill_news.4.d
	picture = GFX_news_griffenheim

	major = yes

	is_triggered_only = yes

	option = {
		name = bronzehill_news.4.a
		trigger = { tag = BRZ }
	}
	option = {
		name = bronzehill_news.4.b
		trigger = {
			NOT = { tag = BRZ }
		}
	}
}

news_event = { # The Funeral of the Emperor
	id = bronzehill_news.5
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_news.5"}
	title = bronzehill_news.5.t
	desc = bronzehill_news.5.d
	picture = GFX_news_griffenheim

	major = yes

	is_triggered_only = yes

	option = {
		name = bronzehill_news.5.a
	}
}
news_event = { #The Empire Strikes Back but it's dogs
	id = bronzehill_news.6
	immediate = {log = "[GetDateText]: [Root.GetName]: event bronzehill_news.6"}
	title = bronzehill_news.6.t
	desc = bronzehill_news.6.d
	picture = GFX_news_griffonia_landscape
	is_triggered_only = yes
	major = yes

	option = {
		name = bronzehill_news.6.a
	}
}