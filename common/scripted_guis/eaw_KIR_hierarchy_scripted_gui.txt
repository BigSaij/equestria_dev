scripted_gui = {
	kir_hierarchy_gui = {
		context_type = decision_category
		parent_window_token = decision_tab

		window_name = "kir_hierarchy_window"

		effects = {
			kir_hierarchy_character_button_click = {
				if = {  # if hch is already selected
					limit = { has_variable = selected_hch_value }
					if = {  # if the same hch was clicked, remove selection
						limit = {
							check_variable = { selected_hch_value = hch_value }
						}
						kir_clear_selection_effect = yes  # clear the selection
					} else = {  # other hch slot was clicked
						kir_move_select_hch_var_setup_effect = yes
						if = {  # if current selection is empty, select the other slot
							limit = {
								check_variable = { selected_hch_id = 0 }
							}
							kir_select_hch_var_setup_effect = yes
						}
						else = {  # else do moving
							if = {  # if the slot we clicked is empty, move our selected hch
								limit = {
									check_variable = { move_hch_id = 0 }
								}
								move_hch_effect = yes
							}  # if second slot is taken, do nothing
							kir_clear_move_selection_effect = yes  # clean the second slot vars
							kir_clear_selection_effect = yes  # clear the selection
						}
					}
				}
				else = {  # if hch not selected, select one
					kir_select_hch_var_setup_effect = yes
				}
			}
		}

		triggers = {
			kir_hch_selected_glow_visible = {
				check_variable = { var:hch_value = var:selected_hch_value }
			}
		}

		properties = {
			kir_hierarchy_character_button = {
				image = "[GetHCHgfx]"
			}
		}

		dynamic_lists = {
			kir_hierarchy_level_1_gridbox = {
				array = level_1_hchs_array
				entry_container = "kir_hierarchy_character_entry"
				value = hch_value
			}
			kir_hierarchy_level_2_gridbox = {
				array = level_2_hchs_array
				entry_container = "kir_hierarchy_character_entry"
				value = hch_value
			}
			kir_hierarchy_level_3_gridbox = {
				array = level_3_hchs_array
				entry_container = "kir_hierarchy_character_entry"
				value = hch_value
			}
			kir_hierarchy_level_4_gridbox = {
				array = level_4_hchs_array
				entry_container = "kir_hierarchy_character_entry"
				value = hch_value
			}
			kir_hierarchy_level_5_gridbox = {
				array = level_5_hchs_array
				entry_container = "kir_hierarchy_character_entry"
				value = hch_value
			}
		}
	}
}
