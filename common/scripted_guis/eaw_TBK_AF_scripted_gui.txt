scripted_gui = {
	TBK_AF_state_view = {
		context_type = selected_state_context
		parent_window_token = selected_state_view
		window_name = "TBK_AF_state_view"
		dirty = THIS.TBK_AF_state_view_gui_reloading
		
		properties = {
			TBK_AF_state_view_progress_bar = {
				frame = THIS.TBK_AF_state_view_jadd_progress
			}
		}
		
		effects = {
			state_view_button1_off_click = {
				set_variable = { THIS.TBK_AF_state_view_mode^1 = 1 }
				add_to_variable = { THIS.TBK_AF_state_view_jadd_progress_daily_coef_bonus = 0.1 }
				EAW_af_TBK_recalc_daily = yes
			}
			state_view_button2_off_click = {
				set_variable = { THIS.TBK_AF_state_view_mode^2 = 1 }
				add_to_variable = { THIS.TBK_AF_state_view_jadd_progress_daily_coef_bonus = 0.2 }
				EAW_af_TBK_recalc_daily = yes
			}
			state_view_button3_off_click = {
				set_variable = { THIS.TBK_AF_state_view_mode^3 = 1 }
				add_to_variable = { THIS.TBK_AF_state_view_jadd_progress_daily_coef_bonus = 0.3 }
				EAW_af_TBK_recalc_daily = yes
			}
			state_view_button1_on_click = {
				set_variable = { THIS.TBK_AF_state_view_mode^1 = 0 }
				add_to_variable = { THIS.TBK_AF_state_view_jadd_progress_daily_coef_bonus = -0.1 }
				EAW_af_TBK_recalc_daily = yes
			}
			state_view_button2_on_click = {
				set_variable = { THIS.TBK_AF_state_view_mode^2 = 0 }
				add_to_variable = { THIS.TBK_AF_state_view_jadd_progress_daily_coef_bonus = -0.2 }
				EAW_af_TBK_recalc_daily = yes
			}
			state_view_button3_on_click = {
				set_variable = { THIS.TBK_AF_state_view_mode^3 = 0 }
				add_to_variable = { THIS.TBK_AF_state_view_jadd_progress_daily_coef_bonus = -0.3 }
				EAW_af_TBK_recalc_daily = yes
			}
		}
		
		triggers = {
			state_view_button1_off_visible = {
				THIS = {
					is_owned_by = TBK
					NOT = {
						check_variable = { TBK_AF_state_view_mode^1 = 1 }
					}
				}
			}
			state_view_button2_off_visible = {
				THIS = {
					is_owned_by = TBK
					NOT = {
						check_variable = { TBK_AF_state_view_mode^2 = 1 }
					}
				}
			}
			state_view_button3_off_visible = {
				THIS = {
					NOT = {
						check_variable = { TBK_AF_state_view_mode^3 = 1 }
					}
				}
			}
			state_view_button1_on_visible = {
				THIS = {
					is_owned_by = TBK
					check_variable = { TBK_AF_state_view_mode^1 = 1 }
				}
			}
			state_view_button2_on_visible = {
				THIS = {
					is_owned_by = TBK
					check_variable = { TBK_AF_state_view_mode^2 = 1 }
				}
			}
			state_view_button3_on_visible = {
				THIS = {
					check_variable = { TBK_AF_state_view_mode^3 = 1 }
				}
			}
			state_view_button1_broken_visible = {
				THIS = {
					NOT = {
						is_owned_by = TBK
					}
				}
			}
			state_view_button2_broken_visible = {
				THIS = {
					NOT = {
						is_owned_by = TBK
					}
				}
			}
			TBK_AF_state_view_progress_label_1_off_visible = {
				THIS = {
					check_variable = { TBK_AF_state_view_jadd_progress < 25 }
				}
			}
			TBK_AF_state_view_progress_label_1_on_visible = {
				THIS = {
					check_variable = {
						var = TBK_AF_state_view_jadd_progress
						value = 25
						compare = greater_than_or_equals
					}
				}
			}
			TBK_AF_state_view_progress_label_2_off_visible = {
				THIS = {
					check_variable = { TBK_AF_state_view_jadd_progress < 50 }
				}
			}
			TBK_AF_state_view_progress_label_2_on_visible = {
				THIS = {
					check_variable = {
						var = TBK_AF_state_view_jadd_progress
						value = 50
						compare = greater_than_or_equals
					}
				}
			}
			TBK_AF_state_view_progress_label_3_off_visible = {
				THIS = {
					check_variable = { TBK_AF_state_view_jadd_progress < 75 }
				}
			}
			TBK_AF_state_view_progress_label_3_on_visible = {
				THIS = {
					check_variable = {
						var = TBK_AF_state_view_jadd_progress
						value = 75
						compare = greater_than_or_equals
					}
				}
			}
			TBK_AF_state_view_progress_label_4_off_visible = {
				THIS = {
					check_variable = { TBK_AF_state_view_jadd_progress < 100 }
				}
			}
			TBK_AF_state_view_progress_label_4_on_visible = {
				THIS = {
					check_variable = {
						var = TBK_AF_state_view_jadd_progress
						value = 100
						compare = greater_than_or_equals
					}
				}
			}
		}

		visible = {
			THIS = {
				OR = {
					is_owned_by = TBK
					check_variable = { TBK_AF_state_view_enabled = 1 }
				}
			}
			ROOT = {
				tag = TBK
				has_country_flag = TBK_AF_state_view_flag
			}
		}
		
	}
}