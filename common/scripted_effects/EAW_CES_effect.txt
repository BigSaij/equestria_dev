CES_setup_solar_characters_effect = {
	if = {
		limit = { 
			NOT = {
				OR = {
					has_completed_focus = CES_harmony_3_1
					has_completed_focus = CES_harmony_3_2
					has_completed_focus = CES_harmony_3_3
					has_completed_focus = CES_harmony_3_4
				}
			}
		}
		hidden_effect = {
			add_country_leader_role = {
				character = CES_republic_congress
				country_leader = {
					desc = CES_republic_congress_desc
					expire = "1965.1.1"
					ideology = liberalism
				}
				promote_leader = yes
			}
			add_country_leader_role = {
				character = CES_republic_congress
				country_leader = {
					desc = CES_republic_congress_desc
					expire = "1965.1.1"
					ideology = theocracy_subideology
				}
				promote_leader = yes
			}
		}
		add_country_leader_role = {
			character = CES_republic_congress
			country_leader = {
				desc = CES_republic_congress_desc
				expire = "1965.1.1"
				ideology = falangism
			}
			promote_leader = yes
		}
	}
	hidden_effect = {
		if = {
			limit = {
				has_completed_focus = CES_harmony_3_1
			}
			add_country_leader_role = {
				character = CES_good_word
				country_leader = {
					desc = CES_good_word_desc
					expire = "1965.1.1"
					ideology = falangism
				}
				promote_leader = yes
			}
			#Turn into Burned Man
		}
		if = {
			limit = {
				has_completed_focus = CES_harmony_3_2
			}
			add_country_leader_role = {
				character = CES_crescent_glow
				country_leader = {
					desc = CES_crescent_glow_desc
					expire = "1965.1.1"
					ideology = falangism
				}
				promote_leader = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = CES_harmony_3_3
			}
			add_country_leader_role = {
				character = CES_chief_maita
				country_leader = {
					desc = CES_chief_maita_desc
					expire = "1965.1.1"
					ideology = falangism
				}
				promote_leader = yes
			}
		}
		if = {
			limit = {
				has_completed_focus = CES_harmony_3_4
			}
			add_country_leader_role = {	
				character = JUN_doctor_caballeron
				country_leader = {
					desc = JUN_doctor_caballeron_for_CES_desc
					expire = "1965.1.1"
					ideology = falangism
				}
				promote_leader = yes
			}
		}
	}
}

CES_setup_shadow_path_effect = {
	hidden_effect = {
		#Load Shadow Path
		
		clr_country_flag = CES_loyalist_path
		clr_country_flag = CES_resistance_path
		clr_country_flag = CES_solar_path
		clr_country_flag = CES_initiate_solar_path
		set_country_flag = CES_shadow_path
		swap_ideas = {
			remove_idea = modern_society
			add_idea = detached_country
		}
		set_research_slots = 0
		add_ideas = CES_shadow_realm
		every_country = {
			limit = {
				has_war_with = CES
			}
			set_country_flag = { flag = bypass_on_peaceconference_ended days = 1 value = 1 }
			white_peace = CES
		}
		add_popularity = { 
		    ideology = fascism 
		    popularity = 1
		}
		set_party_name = {
			ideology = fascism
			name = CES_fascism_shadow_party 
			long_name = CES_fascism_shadow_party_long 
		}
		custom_effect_tooltip = JUN_new_focus_tree_tp
		hidden_effect = {
			set_party_name = {
				ideology = democratic
				name = CES_democratic_shadow_party 
				long_name = CES_democratic_shadow_party_long 
			}
			set_party_name = {
				ideology = neutrality
				name = CES_neutrality_shadow_party 
				long_name = CES_neutrality_shadow_party_long 
			}		
			set_party_name = {
				ideology = communism
				name = CES_communism_shadow_party 
				long_name = CES_communism_shadow_party_long 
			}
			if = {
				limit = { country_exists = EQS }
				remove_opinion_modifier = {
					target = EQS
					modifier = besties
				}
				EQS = {
					remove_opinion_modifier = {
						target = CES
						modifier = besties
					}
				}
			}
		}
		load_focus_tree = celestial_state_shadow_cw
		delete_unit = { 
			disband = no 
		}
		EQS = {
			end_puppet = CES
		}
		leave_faction = yes
		every_owned_state = {
			remove_core_of = CES
		}
		add_manpower = -1000000
		221 = { set_demilitarized_zone = yes }
		52 = { set_demilitarized_zone = yes }
		79 = { set_demilitarized_zone = yes }
		25 = { set_demilitarized_zone = yes }
		33 = { set_demilitarized_zone = yes }
		351 = { set_demilitarized_zone = yes }
		34 = { set_demilitarized_zone = yes }
		15 = { set_demilitarized_zone = yes }
		26 = { set_demilitarized_zone = yes }
		86 = { set_demilitarized_zone = yes }
		50 = { set_demilitarized_zone = yes }
		81 = { set_demilitarized_zone = yes }
		35 = { set_demilitarized_zone = yes }
		353 = { set_demilitarized_zone = yes }
		36 = { set_demilitarized_zone = yes }
		32 = { set_demilitarized_zone = yes }
		30 = { set_demilitarized_zone = yes }
		17 = { set_demilitarized_zone = yes }
		24 = { set_demilitarized_zone = yes }
		83 = { set_demilitarized_zone = yes }
		352 = { set_demilitarized_zone = yes }
		16 = { set_demilitarized_zone = yes }
		88 = { set_demilitarized_zone = yes }
		348 = { set_demilitarized_zone = yes }
		350 = { set_demilitarized_zone = yes }
		37 = { set_demilitarized_zone = yes }
		31 = { set_demilitarized_zone = yes }
		90 = { set_demilitarized_zone = yes }
		82 = { set_demilitarized_zone = yes }
		13 = { set_demilitarized_zone = yes }
		27 = { set_demilitarized_zone = yes }
		28 = { set_demilitarized_zone = yes }
		every_character = {
			#No one supports this person
			limit = {
				NOT = {
					OR = {
						is_character = CES_pony_of_shadows
						is_character = CES_nobody
					}
				}
			}
			set_nationality = EQS
		}
		add_country_leader_role = {
			character = CES_nobody
			country_leader = {
				expire = "1965.1.1"
				ideology = magocracy
				desc = CES_nobody_desc
			}
			promote_leader = yes
		}
		drop_cosmetic_tag = yes
		set_cosmetic_tag = CES_shadow_realm
		remove_ideas = CES_acclimatization_idea
		remove_ideas = CES_acclimatization_idea_2
		remove_ideas = JUN_discontent_in_cities
		remove_ideas = JUN_discontent_in_cities_2
		remove_ideas = JUN_economic_backwater
		remove_ideas = JUN_economic_backwater_2
		remove_ideas = CES_no_real_government_0
		remove_ideas = CES_no_real_government_1
		remove_ideas = CES_no_real_government_2
		remove_ideas = CES_lunar_remnants_2
		remove_ideas = CES_native_resistance_2
		remove_ideas = CES_native_political_front
		remove_ideas = NMS_native_resistance
		remove_ideas = JUN_lunar_remnants
		remove_ideas = CES_harmonist_political_front
		remove_ideas = CES_worker_rights
		remove_ideas = CES_solarist_worker_rights
		remove_ideas = CES_legalised_unions
		remove_ideas = CES_solarist_state_union
		remove_ideas = CES_collective_workers_agreement
		remove_ideas = CES_solarist_worker_agreement
		remove_ideas = CES_common_education
		remove_ideas = CES_solarist_education
		remove_ideas = CES_inclusive_education
		remove_ideas = CES_solarist_expansive_state_education
		remove_ideas = CES_native_autonomy_protected
		remove_ideas = CES_native_autonomy_removed
		remove_ideas = CES_constitution
		remove_ideas = CES_solarist_constitution
		remove_ideas = CES_solarist_naval_tactic
		remove_ideas = CES_solarist_naval_tactic_2
		remove_ideas = CES_celestial_special_forces_idea
		remove_ideas = CES_celestial_special_forces_idea_2
		remove_ideas = CES_celestial_special_forces_idea_3
		remove_ideas = CES_celestial_special_forces_idea_4
		remove_ideas = CES_liberation_army_idea
		remove_ideas = CES_liberation_army_idea_2
		remove_ideas = CES_liberation_army_idea_3
		remove_ideas = CES_liberation_army_idea_4
		remove_ideas = CES_admirality_idea
		remove_ideas = CES_night_fliers_idea
		remove_ideas = CES_expert_fliers_idea
		remove_ideas = CES_jungle_exploitation
		remove_ideas = CES_jungle_exploitation_2
		remove_ideas = CES_industrial_development
		remove_ideas = CES_industrial_development_2
		remove_ideas = CES_economic_boom
		remove_ideas = CES_harmonic_stratocracy
		remove_ideas = CES_harmonic_stratocracy_1
		remove_ideas = CES_harmonic_stratocracy_2
		remove_ideas = CES_harmonic_stratocracy_3
		remove_ideas = CES_harmony_calls_for_heroes
		remove_ideas = CES_harmony_calls_for_heroes_2
		remove_ideas = CES_harmony_calls_for_heroes_3
		remove_ideas = CES_harmony_calls_for_heroes_4
		remove_ideas = CES_harmony_against_solarism
		remove_ideas = CES_harmony_against_lunarism
		remove_ideas = CES_harmony_against_radicalism
		remove_ideas = CES_harmony_against_tyranny
		remove_ideas = TRD_trading_with_skyfall_1
		remove_ideas = TRD_trading_with_skyfall_2
	}
}

CES_more_reverent_effect = {
	modify_country_flag = {
		flag = good_word_emotion
		value = -1
	}
	custom_effect_tooltip = CES_more_reverent_effect_tt
	hidden_effect = {
		CES_update_good_word_portrait_effect = yes
	}
}

CES_more_vindictive_effect = {
	modify_country_flag = {
		flag = good_word_emotion
		value = 1
	}
	custom_effect_tooltip = CES_more_vindictive_effect_tt
	hidden_effect = {
		CES_update_good_word_portrait_effect = yes
	}
}

CES_update_good_word_portrait_effect = {
	if = {
		limit = { has_country_flag = { flag = good_word_emotion value < -1 } }
		set_portraits = {
			character = CES_good_word 
			civilian={
				large="gfx/leaders/CES/GoodWord_reverent.tga"
			}
		}
	}
	else_if = {
		limit = { has_country_flag = { flag = good_word_emotion value < 2 } }
		set_portraits = {
			character = CES_good_word 
			civilian={
				large="gfx/leaders/CES/GoodWord_zealous.tga"
			}
		}
	}
	else = {
		set_portraits = {
			character = CES_good_word 
			civilian={
				large="gfx/leaders/CES/GoodWord_vindictive.tga"
			}
		}
	}
}