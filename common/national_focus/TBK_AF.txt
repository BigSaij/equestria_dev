focus_tree = {
	id = TBK_AF_jaddars_arrival
	country = {
		factor = 0
		modifier = {
			add = 10
			original_tag = TBK
		}
	}
	default = no
	continuous_focus_position = { x = 500 y = 0 }

	shared_focus = TBK_AF_herald_arrives
}

focus_tree = {
	id = TBK_AF_jadd_empire
	country = {
		factor = 0
		modifier = {
			add = 10
			original_tag = TBK
		}
	}
	default = no
	continuous_focus_position = { x = 500 y = 0 }
	shared_focus = TBK_AF_time_to_transform_country
	shared_focus = TBK_AF_mil_intro
	shared_focus = TBK_AF_modern_mercantile_knowledge
}

### Arrival tree ###

	shared_focus = {
		id = TBK_AF_herald_arrives
		icon = GFX_goal_unknown
		cost = 1
		x = 0
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_herald_arrives"
			country_event = { id = TBK_AF_event_start.3 }
		}
	}

	shared_focus = {
		id = TBK_AF_his_task
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_herald_arrives
		prerequisite = { focus = TBK_AF_herald_arrives }
		x = 0
		y = 2

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_his_task"
			country_event = { id = TBK_AF_event_start.7 }
		}
	}

	shared_focus = {
		id = TBK_AF_i_am_jaddar
		icon = GFX_goal_unknown
		cost = 4
		relative_position_id = TBK_AF_his_task
		prerequisite = { focus = TBK_AF_his_task }
		x = 0
		y = 2

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_i_am_jaddar"
			country_event = { id = TBK_AF_event_start.10 }
		}
	}

### Jaddar Empire tree ###

	shared_focus = {
		id = TBK_AF_time_to_transform_country
		icon = GFX_goal_unknown
		cost = 3
		x = 16
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_time_to_transform_country"
			add_political_power = 300

		}
	}

	shared_focus = {
		id = TBK_AF_empire_administration
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_time_to_transform_country
		prerequisite = { focus = TBK_AF_time_to_transform_country }
		x = -2
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_empire_administration"
			swap_ideas = {
				remove_idea = TBK_fake_republic
				add_idea = TBK_AF_divine_administration
			}
		}
	}

	shared_focus = {
		id = TBK_AF_cult_of_sun
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_empire_administration
		prerequisite = { focus = TBK_AF_empire_administration }
		x = -3
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_cult_of_sun"
			add_ideas = TBK_jadd_faith
		}
	}

	shared_focus = {
		id = TBK_AF_lightbringers_order
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_cult_of_sun
		prerequisite = { focus = TBK_AF_cult_of_sun }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_lightbringers_order"
			### unlocks Lightbringer decision, tooltip that explains what this does (IMPORTANT! Explain player can now spread faith to foreign states)
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				if = {
					limit = {
						has_intelligence_agency = no
					}
					create_intelligence_agency = {
						name = "The Lightbringers"
						icon = "GFX_intelligence_agency_logo_lightbringers"
					}
				}
			}
			### tooltip about TBK_AF_light_bringer getting corps commander role
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = TBK_AF_light_bringer
		}
	}

	shared_focus = {
		id = TBK_AF_kindful_rays
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_empire_administration
		prerequisite = { focus = TBK_AF_empire_administration }
		x = -1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_kindful_rays"
			decrease_poverty = yes
			### Jaddar zealot experience
		}
	}
	
	shared_focus = {
		id = TBK_AF_tobuck_grand_temple
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_lightbringers_order
		prerequisite = { focus = TBK_AF_lightbringers_order }
		prerequisite = { focus = TBK_AF_kindful_rays }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_tobuck_grand_temple"
			### add monument/state modifier to Tobuck state?
			### call it "Eduz Tobuck"
		}
	}

	shared_focus = {
		id = TBK_AF_able_advisors
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_empire_administration
		prerequisite = { focus = TBK_AF_empire_administration }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_able_advisors"
			custom_effect_tooltip = available_political_advisor
			set_portraits = {
				character = TBK_pea_shooter
				civilian = {
					small = "gfx/interface/ideas/Advisors/TBK_AF/TBK_AF_Pea_Shooter_alternative_1.tga"
					large = "gfx/leaders/TBK_AF/TBK_AF_Pea_Shooter_alternative_1.tga"
				}
			}
			TBK_pea_shooter = {
				add_advisor_role = {
					advisor = {
						slot = political_advisor
						idea_token = TBK_pea_shooter
						cost = 150
						traits = { TBK_AF_arms_trader }
						desc = pea_shooter_desc ### need to make a modified desc
					}
				}
			}
			add_ideas = TBK_pea_shooter
			### start series of events where Pea tries to escape Tobuck
			### Jaddar sovereign experience
		}
	}

	shared_focus = {
		id = TBK_AF_holy_texts
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_kindful_rays
		prerequisite = { focus = TBK_AF_kindful_rays focus = TBK_AF_able_advisors }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_cult_of_sun"
			decrease_illiteracy = yes ### maybe make this into an event chain?
		}
	}

	shared_focus = {
		id = TBK_AF_holy_cause
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_empire_administration
		prerequisite = { focus = TBK_AF_empire_administration }
		x = 3
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_holy_cause"
			custom_effect_tooltip = SOL_Faith_Sacrifice_Worship_tp
			custom_effect_tooltip = super_combat_abilities_tt
			hidden_effect = {
				set_technology = {
					popup = no
					berserker_charge = 1
				}
				set_rule = {
					can_use_kamikaze_pilots = yes
				}
				set_country_flag = kamikaze_flag
			}
			swap_ideas = {
				remove_idea = TBK_warlord_reliance
				add_idea = TBK_holy_war_doctrine_1
			}
			### tooltip about getting TBK_AF_necorin as corps commander
		}
	}

	shared_focus = {
		id = TBK_AF_dutiful_faitful
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_holy_cause
		prerequisite = { focus = TBK_AF_holy_cause }
		x = -1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_holy_cause"
			add_manpower = 18000
			one_random_arms_factory = yes
		}
	}

	shared_focus = {
		id = TBK_AF_laws_of_the_empire
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_able_advisors
		prerequisite = { focus = TBK_AF_able_advisors }
		prerequisite = { focus = TBK_AF_dutiful_faitful }
		x = 0
		y = 2
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_holy_cause"
			swap_ideas = {
				remove_idea = TBK_AF_divine_administration_1
				add_idea = TBK_AF_divine_administration_2
			}
		}
	}

	shared_focus = {
		id = TBK_AF_herald_of_surael
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_tobuck_grand_temple
		prerequisite = { focus = TBK_AF_tobuck_grand_temple }
		prerequisite = { focus = TBK_AF_holy_texts }
		prerequisite = { focus = TBK_AF_laws_of_the_empire }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_holy_cause"
			TBK_AF_jaddar_jexiszuir = {
				add_country_leader_trait = TK_AF_herald_of_surael
			}
		}
	}

	shared_focus = {
		id = TBK_AF_zarantia_spread_message
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_time_to_transform_country
		prerequisite = { focus = TBK_AF_time_to_transform_country }
		x = 2
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_land_of_light"
			## activate conversion mechanic and add faith to bordering ZAR states
		}
	}

	shared_focus = {
		id = TBK_AF_zarantia_war
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_time_to_transform_country
		prerequisite = { focus = TBK_AF_time_to_transform_country }
		x = 4
		y = 1
		available = {
			ZAR = {
				exists = yes
				NOT = {
					is_puppet_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		bypass = {
			ZAR = {
				exists = no
			}
		}
		will_lead_to_war_with = ZAR
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_land_of_light"
			hidden_effect = {
				create_wargoal = {
					target = ZAR
					type = annex_everything
				}
			}
			declare_war_on = {
				target = ZAR
				type = annex_everything
			}
		}
	}

	shared_focus = {
		id = TBK_AF_zarantia_integration
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_zarantia_spread_message
		prerequisite = { focus = TBK_AF_zarantia_spread_message focus = TBK_AF_zarantia_war  }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_land_of_light"
			### different reward depending on what route was chosen ?
			### add many ZAR characters to TBK
			remove_ideas = TBK_zarantian_loyalism
			ZAR = { add_to_ROOT_potential_cores = yes }
		}
	}

	shared_focus = {
		id = TBK_AF_for_the_faith
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_holy_cause
		prerequisite = { focus = TBK_AF_holy_cause }
		prerequisite = { focus = TBK_AF_zarantia_integration }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_for_the_faith"
			add_war_support = 0.15
			EAW_raise_conscription_law = yes
		}
	}

	shared_focus = {
		id = TBK_AF_sun_pegasi
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_for_the_faith
		prerequisite = { focus = TBK_AF_for_the_faith }
		x = -1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_sun_pegasi"
			### spawn elite pegasus division
		}
	}

	shared_focus = {
		id = TBK_AF_operation_redoubt
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_for_the_faith
		prerequisite = { focus = TBK_AF_for_the_faith }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_land_of_light"
			### add forts for the Tobuck encirclement strategy
		}
	}

	shared_focus = {
		id = TBK_AF_faitful_dunes
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_zarantia_integration
		prerequisite = { focus = TBK_AF_zarantia_integration }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_faitful_dunes"
			every_controlled_state = {
				limit = {
					is_core_of = ZAR
					has_active_resistance = yes
				}
				add_compliance = 30
				add_resistance_target = {
					amount = -15
					days = 180
				}
			}
			random_controlled_state = {
				limit = {
					is_core_of = ZAR
					NOT = {
						is_core_of = TBK
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_controlled_state = {
				limit = {
					is_core_of = ZAR
					NOT = {
						is_core_of = TBK
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			add_stability = 0.1
		}
	}

	shared_focus = {
		id = TBK_AF_zebrahas_finest_warriors
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_faitful_dunes
		prerequisite = { focus = TBK_AF_faitful_dunes }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_zebrahas_finest_warriors"
			### spawn Imazeeb units
		}
	}
	
	shared_focus = {
		id = TBK_AF_stand_against_darkness
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_sun_pegasi
		prerequisite = { focus = TBK_AF_sun_pegasi }
		prerequisite = { focus = TBK_AF_zebrahas_finest_warriors }
		x = 2
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_zebrahas_finest_warriors"
			swap_ideas = {
				remove_idea = TBK_holy_war_doctrine_1
				add_idea = TBK_holy_war_doctrine_2
			}
		}
	}
	
	shared_focus = {
		id = TBK_AF_war_against_chiropterra
		icon = GFX_goal_unknown
		cost = 5
		relative_position_id = TBK_AF_herald_of_surael
		prerequisite = { focus = TBK_AF_herald_of_surael }
		prerequisite = { focus = TBK_AF_stand_against_darkness }
		x = 2
		y = 1
		will_lead_to_war_with = BAT
		bypass = {
			AND = {
				BAT = {
					OR = {
						exists = no
						is_puppet_of = ROOT
						is_in_faction_with = ROOT
					}
				}
			}
		}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_zebrahas_finest_warriors"
			if = {
				limit = {
					NOT = {
						has_war_with = BAT
					}
				}
				hidden_effect = {
					create_wargoal = {
						target = ZAR
						type = annex_everything
					}
				}
				declare_war_on = {
					target = ZAR
					type = annex_everything
				}
			}
			add_ideas = TBK_AF_BAT_war_idea
		}
	}
		
	shared_focus = {
		id = TBK_AF_offer_redemption_to_chiropterrans
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_war_against_chiropterra
		prerequisite = { focus = TBK_AF_war_against_chiropterra }
		x = -1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_offer_redemption_to_chiropterrans"
			### event about Jaddar approaching BAT characters who would be useful (transfers these characters over to TBK)
			every_owned_state = {
				limit = {
					is_core_of = BAT
					has_active_resistance = yes
				}
				add_resistance_target = -0.20
			}
		}
	}

	shared_focus = {
		id = TBK_AF_free_chiropterran_slaves
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_war_against_chiropterra
		prerequisite = { focus = TBK_AF_war_against_chiropterra }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_free_chiropterran_slaves"
			add_manpower = 31000
			every_owned_state = {
				limit = {
					is_core_of = BAT
					has_active_resistance = yes
				}
				add_compliance = 20
			}
		}
	}

	shared_focus = {
		id = TBK_AF_celebrate_chiropterra_victory
		icon = GFX_goal_unknown
		cost = 3
		relative_position_id = TBK_AF_offer_redemption_to_chiropterrans
		prerequisite = { focus = TBK_AF_offer_redemption_to_chiropterrans }
		prerequisite = { focus = TBK_AF_free_chiropterran_slaves }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_celebrate_chiropterra_victory"
			### fire event where Jaddar sets out his plan to spread light of Surael across Zebrica
			add_stability = 0.1
			TBK_AF_jaddar_jexiszuir = {
				swap_country_leader_traits = {
					remove = TK_AF_herald_of_surael
					add = TK_AF_herald_of_surael_expanded
				}
			}
		}
	}

	#### Economy tree

	shared_focus = {
		id = TBK_AF_modern_mercantile_knowledge
		icon = GFX_goal_unknown
		cost = 2
		x = 26
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_modern_mercantile_knowledge"
			
		}
	}

	#### Military tree
	
	shared_focus = {
		id = TBK_AF_mil_intro
		icon = GFX_goal_unknown
		cost = 2
		x = 6
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_mil_intro"
			country_event = TBK_AF_event_military.1
		}
	}
	shared_focus = {
		id = TBK_AF_desert_expertise
		icon = GFX_goal_unknown
		cost = 2
		relative_position_id = TBK_AF_mil_intro
		prerequisite = { focus = TBK_AF_mil_intro }
		x = -2
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_desert_expertise"
			hidden_effect = {
				set_technology = {
					popup = no
					desert_warfare = 1
				}
			}
			custom_effect_tooltip = TBK_desert_warfare_training_tp
			TBK_AF_jaddar_jexiszuir = {
				add_defense = 1
				add_attack = 1
				add_planning = 1
				add_logistics = 1
			}
		}
	}
	shared_focus = {
		id = TBK_AF_gunpowder_wonder_weapons
		icon = GFX_goal_unknown
		cost = 2
		relative_position_id = TBK_AF_mil_intro
		prerequisite = { focus = TBK_AF_mil_intro }
		x = 0
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_gunpowder_wonder_weapons"
			add_tech_bonus = {
				name = infantry_weapons_bonus
				bonus = 1.0
				uses = 2
				category = infantry_weapons
			}
			multiply_variable = {
				var = TBK_guns_pile
				value = 25
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment_0
				amount = TBK_guns_pile
			}
			TBK_AF_jaddar_jexiszuir = {
				add_defense = 1
				add_attack = 1
				add_planning = 1
				add_logistics = 1
			}
		}
	}
	shared_focus = {
		id = TBK_AF_survival_expertise
		icon = GFX_goal_unknown
		cost = 2
		relative_position_id = TBK_AF_mil_intro
		prerequisite = { focus = TBK_AF_mil_intro }
		x = 2
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_survival_expertise"
			add_ideas = TBK_AF_survival_expertise_idea
			TBK_AF_jaddar_jexiszuir = {
				add_defense = 1
				add_attack = 1
				add_planning = 1
				add_logistics = 1
			}
		}
	}
	shared_focus = {
		id = TBK_AF_new_kind_of_cavalry
		icon = GFX_goal_unknown
		cost = 4
		relative_position_id = TBK_AF_gunpowder_wonder_weapons
		prerequisite = { focus = TBK_AF_gunpowder_wonder_weapons }
		prerequisite = { focus = TBK_AF_desert_expertise }
		x = -1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_new_kind_of_cavalry"
			if = {
				limit = {
					NOT = {
						has_tech = motorised_infantry
					}
				}
				set_technology = {
					motorised_infantry = 1
				}
			}
			if = {
				limit = { 
					NOT = { 
						has_template = "Desert Phoenixes"
					}
				}
				division_template = {
					name = "Desert Phoenixes"
					regiments = {
						motorized = { x = 0 y = 0 }
						motorized = { x = 0 y = 1 }
						motorized = { x = 0 y = 2 }
						motorized = { x = 1 y = 0 }
						motorized = { x = 1 y = 1 }
						motorized = { x = 1 y = 2 }
					}
					support = {
						mot_recon = { x = 0 y = 0 }
					}
					priority = 2
				}
			}
			capital_scope = { 
				create_unit = {
					division = "name = \"Desert Phoenixes\" division_template = \"Desert Phoenixes\" start_experience_factor = 0.2 start_equipment_factor = 1.0"
					owner = ROOT
				}
			}
		}
	}
	shared_focus = {
		id = TBK_AF_jaddari_legions
		icon = GFX_goal_unknown
		cost = 2
		relative_position_id = TBK_AF_gunpowder_wonder_weapons
		prerequisite = { focus = TBK_AF_gunpowder_wonder_weapons }
		prerequisite = { focus = TBK_AF_survival_expertise }
		x = 1
		y = 1
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus TBK_AF_jaddari_legions"
			add_ideas = TBK_AF_jaddari_legions_idea
		}
	}
	
