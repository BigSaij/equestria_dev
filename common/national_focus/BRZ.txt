# In the rework, all focuses will be in one document. We will only use shared focuses, to make moving and redesigning trees easier

# Focus filters to use: 
# FOCUS_FILTER_INTERNAL_AFFAIRS - story events
# FOCUS_FILTER_INDUSTRY - industry (factories, output bonuses)
# FOCUS_FILTER_POLITICAL - political power
# FOCUS_FILTER_STABILITY - stability
# FOCUS_FILTER_WAR_SUPPORT - war support
# FOCUS_FILTER_ARMY_BONUS - anything that adds to the army
# FOCUS_FILTER_AIRFORCE_BONUS - anything that adds to the airforce
# FOCUS_FILTER_NAVY_BONUS - anything that adds to the navy
# FOCUS_FILTER_MANPOWER - ponypower
# FOCUS_FILTER_RESEARCH - research slots, research speed bonuses, one-time bonuses for specific research
# FOCUS_FILTER_ANNEXATION - any wargoals/wars
# Please add appropriate filters when creating a focus. Do not add any additional filters, it will break the UI. If in doubt, ping me in Project Heartlands. Thank you! - HerrB

# To make future understanding of the code easier, when referencing a state id, please comment the state name for clarity. Thank you! - HerrB

# Initial tree for Bronzehill, containing the starting industrial, military and policial trees. The focus tree will get expanded once the regency is declared
focus_tree = {
	id = bronzehill_initial_tree
	
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = BRZ
			NOT = { has_country_flag = BRZ_revenge_tree_loaded }
		}
	}
	
	shared_focus = BRZ_finish_the_grover_v_industrial_park
	shared_focus = BRZ_military_budget_review
	shared_focus = BRZ_call_the_bronzehill_council
}

###########################
# Industrial Tree Section #
###########################

# Initial Industrial Tree
shared_focus = {
	id = BRZ_finish_the_grover_v_industrial_park
	icon = GFX_BRZ_county_of_bronzehill
	
	x = 5
	y = 0
	
	cost = 4
	
	ai_will_do = { factor = 10 }
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_finish_the_grover_v_industrial_park"#Auto-logging
		
		add_offsite_building = {
			type = industrial_complex
			level = 1
		}
		424 = { # Ravensburg
			add_extra_state_shared_building_slots = 2
		}
		
		country_event = bronzehill_industrial.1
	}
	
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_INTERNAL_AFFAIRS }
}

shared_focus = {
	id = BRZ_paving_the_roads
	icon = GFX_BRZ_county_of_bronzehill
	
	x = -1
	y = 1
	relative_position_id = BRZ_finish_the_grover_v_industrial_park
	
	cost = 4
	
	ai_will_do = { factor = 10 }
	
	prerequisites = {
		focus = BRZ_finish_the_grover_v_industrial_park
	}
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_paving_the_roads"#Auto-logging
		
		424 = { # Ravensburg
			add_extra_state_shared_building_slots = 1
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
		}
		
		country_event = bronzehill_industrial.1
	}
	
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

shared_focus = {
	id = BRZ_invite_griffenheim_engineers
	icon = GFX_BRZ_county_of_bronzehill
	
	x = 1
	y = 1
	relative_position_id = BRZ_finish_the_grover_v_industrial_park
	
	cost = 4
	
	ai_will_do = { factor = 10 }
	
	prerequisites = {
		focus = BRZ_finish_the_grover_v_industrial_park
	}
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_invite_griffenheim_engineers"#Auto-logging
		
		add_tech_bonus = {
			name = BRZ_invite_griffenheim_engineers
			bonus = 1.0
			uses = 2
			category = industry
		}
	}
	
	search_filters = { FOCUS_FILTER_RESEARCH }
}

shared_focus = {
	id = BRZ_contracts_with_the_businessgriffs
	icon = GFX_BRZ_county_of_bronzehill
	
	x = 1
	y = 1
	relative_position_id = BRZ_paving_the_roads
	
	cost = 4
	
	ai_will_do = { factor = 10 }
	
	
	prerequisites = {
		focus = BRZ_paving_the_roads
	}
	prerequisites = {
		focus = BRZ_invite_griffenheim_engineers
	}
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_contracts_with_the_businessgriffs"#Auto-logging
		
		swap_ideas = {
			remove_idea = BRZ_imperial_industry
			add_idea = BRZ_imperial_industry_2
		}
		
		country_event = bronzehill_industrial.2
	}
	
	search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_INTERNAL_AFFAIRS }
}

# Main industrial branch / Autonomist side
shared_focus = {
	id = BRZ_nationalize_the_grover_v_industrial_park
	icon = GFX_BRZ_county_of_bronzehill
	
	x = -3
	y = 1
	relative_position_id = BRZ_contracts_with_the_businessgriffs
	
	cost = 3
	
	ai_will_do = { factor = 10 }
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_continue_grover_v_industrial_park"#Auto-logging
		
		# TODO
	}
	
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

# Main industrial branch / Loyalty side
shared_focus = {
	id = BRZ_negotiations_with_kraehe_stahl
	icon = GFX_BRZ_county_of_bronzehill
	
	x = 3
	y = 1
	relative_position_id = BRZ_contracts_with_the_businessgriffs
	
	cost = 3
	
	ai_will_do = { factor = 10 }
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_continue_grover_v_industrial_park"#Auto-logging
		
		# TODO
	}
	
	search_filters = { FOCUS_FILTER_INDUSTRY }
}

############################
# Initial(?) Military Tree #
############################
shared_focus = {
	id = BRZ_military_budget_review
	icon = GFX_BRZ_county_of_bronzehill
	
	x = 15
	y = 0
	
	cost = 5
	
	ai_will_do = { factor = 10 }
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_military_budget_review"#Auto-logging
		
		# TEMP
		army_experience = 30
	}
	
	search_filters = { FOCUS_FILTER_ARMY_BONUS }
}

##########################
# Initial Political Tree #
##########################

# Political introduction
shared_focus = {
	id = BRZ_call_the_bronzehill_council
	icon = GFX_BRZ_county_of_bronzehill
	
	x = 40
	y = 0
	
	cost = 5
	
	ai_will_do = { factor = 10 }
	
	available = {
	}
	
	bypass = {
	}
	
	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no
	
	completion_reward = {
		log = "[Root.GetName]: Focus BRZ_call_the_bronzehill_council"#Auto-logging
		
		# TEMP
		add_political_power = 50
	}
	
	search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INTERNAL_AFFAIRS }
}