EQS_prewar_diplomacy_category = {
	EQS_support_the_yaks = {
		icon = celestia
		available = {
			has_equipment = {
				infantry_equipment > 1999
			}
			has_equipment = {
				support_equipment > 199
			}
		}
		visible = {
			YAK = {
				exists = yes
			}
			JAK = {
				exists = yes
			}
			has_completed_focus = EQS_look_northward
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_support_the_yaks"
			send_equipment = { target = YAK type = infantry_equipment amount = 2000 }
			send_equipment = { target = YAK type = support_equipment amount = 200 }
			YAK = {
				country_event = equestria.3
			}
			custom_effect_tooltip = EQS_YAK_harmonic_influence_tt
		}
	}
	EQS_yak_pony_friendship_treaty = {
		icon = celestia
		available = {
			YAK = {
				exists = yes
				has_government = democratic
				has_completed_focus = YAK_harmony_win
				has_war = no
			}
			JAK = {
				exists = no
			}
		}
		visible = {
			YAK = {
				exists = yes
				has_government = democratic
			}
			has_completed_focus = EQS_look_northward
		}
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_yak_pony_friendship_treaty"
			give_guarantee = YAK
			add_opinion_modifier = { target = YAK modifier = EQS_friendship_treaty }
			YAK = {
				add_opinion_modifier = { target = ROOT modifier = EQS_friendship_treaty }
			}
			YAK = {
				country_event = equestria.4
			}
			custom_effect_tooltip = EQS_YAK_help_available_tt
			set_country_flag = EQS_YAK_friendship_treaty
		}
	}
	EQS_shelter_prince_rutherford = {
		icon = celestia
		available = {
			YAK = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_look_northward
			NOT = {
				has_country_flag = EQS_YAK_friendship_treaty
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_prince_rutherford"
			country_event = equestria.5
		}
	}
	EQS_reapproach_stalliongrad = {
		icon = celestia
		available = {
			STG = {
				has_country_leader = {
					character = STG_vasiliy_pantsushenko
					ruling_only = yes
				}
			}
		}
		visible = {
			has_completed_focus = EQS_look_northward
			NOT = {
				has_country_flag = EQS_dealt_with_stalliongrad
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_reapproach_stalliongrad"
			STG = {
				country_event = equestria.6
			}
			custom_effect_tooltip = EQS_STG_less_aggression_tt
		}
	}
	EQS_issue_stalliongradian_embargo = {
		icon = celestia
		available = {
			OR = {
				STG = {
					has_country_leader = {
						character = STG_sinister_serov
						ruling_only = yes
					}
				}
				has_country_flag = EQS_STG_reconcilation_denied
			}
		}
		visible = {
			has_completed_focus = EQS_look_northward
			NOT = {
				has_country_flag = EQS_dealt_with_stalliongrad
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_issue_stalliongradian_embargo"
			set_country_flag = EQS_dealt_with_stalliongrad
			STG = {
				country_event = equestria.9
			}
			every_other_country = {
				limit = {
					exists = yes
					is_subject_of = EQS
				}
				country_event = equestria.10
			}
		}
	}
	EQS_buffalo_integration = {
		icon = celestia
		available = {
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			BUF = {
				exists = yes
				is_subject = no
			}
			NOT = {
				has_country_flag = EQS_BUF_hostile_war
			}
		}
		cost = 50
		ai_will_do = {
			factor = 110
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_buffalo_integration"
			BUF = {
				country_event = equestria.11
			}
		}
	}
	EQS_save_the_buffalo = {
		icon = celestia
		available = {
			BUF = {
				has_government = fascism
			}
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			BUF = {
				exists = yes
				is_subject = no
				has_government = fascism
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		days_remove = 20
		war_with_target_on_remove = yes
		targets = { BUF }
		target_trigger = {
			FROM = { tag = BUF }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_save_the_buffalo"
			set_country_flag = EQS_BUF_hostile_war
		}
		remove_effect = {
			declare_war_on = {
				target = BUF
				type = annex_everything
			}
		}
	}
	EQS_integrate_buffalo_states = {
		icon = celestia
		available = {
			owns_state = 78
			owns_state = 89
			owns_state = 80
			owns_state = 91
			owns_state = 92
			owns_state = 93
			BUF = {
				exists = no
			}
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			BUF = {
				exists = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_integrate_buffalo_states"
			every_state = {
				limit = {
					OR = {
						state = 78
						state = 89
						state = 80
						state = 91
						state = 92
						state = 93
					}
				}
				add_core_of = EQS
			}
			set_country_flag = EQS_buffalo_integrated
			custom_effect_tooltip = EQS_buffalo_divisions_tt
			hidden_effect = {
				load_oob = "EQS_buffalo_volunteers"
			}
			country_event = equestria.14
		}
	}
	EQS_dragon_diplomacy = {
		icon = celestia
		available = {
			DRG = {
				owns_state = 17
				has_government = democratic
			}
		}
		visible = {
			has_completed_focus = EQS_dragons_and_buffalo
			DRG = {
				exists = yes
				is_subject = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_dragon_diplomacy"
			DRG = {
				country_event = equestria.15
			}
		}
	}
	EQS_bolster_the_empire = {
		icon = celestia
		available = {
			CRY = {
				has_war = no
			}
			has_manpower > 9999
		}
		visible = {
			has_completed_focus = EQS_support_crystal_empire
			CRY = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bolster_the_empire"
			custom_effect_tooltip = EQS_CRY_sombra_bonuses_tt
			add_manpower = -10000
			CRY = {
				country_event = equestria.18
			}
		}
	}
	EQS_industrialize_rainbow_falls = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 3
			98 = { is_owned_and_controlled_by = CRY }
		}
		visible = {
			has_completed_focus = EQS_support_crystal_empire
			CRY = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		days_remove = 50
		modifier = {
			civilian_factory_use = 4
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_industrialize_rainbow_falls"
			98 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_crystal_magitech_center = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 4
			142 = { is_owned_and_controlled_by = CRY }
		}
		visible = {
			has_completed_focus = EQS_support_crystal_empire
			CRY = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		days_remove = 60
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_crystal_magitech_center"
			142 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_aid_economic_recovery = {
		icon = celestia
		available = {
		}
		visible = {
			has_completed_focus = EQS_support_new_mareland
			EQC = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		days_remove = 100
		modifier = {
			consumer_goods_factor = 0.05
			political_power_gain = -0.1
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_economic_recovery"
			EQC = {
				country_event = equestria.19
			}
		}
	}
	EQS_new_manehattan_investments = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 3
			362 = { is_owned_and_controlled_by = EQC }
		}
		visible = {
			has_completed_focus = EQS_support_new_mareland
			EQC = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		days_remove = 40
		modifier = {
			civilian_factory_use = 4
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_new_manehattan_investments"
			362 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_applelaide_arms_factor = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 4
			357 = { is_owned_and_controlled_by = EQC }
		}
		visible = {
			has_completed_focus = EQS_support_new_mareland
			EQC = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 30
		}
		fire_only_once = yes
		days_remove = 60
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_applelaide_arms_factory"
			357 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_fund_port_expansion = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 1
			1194 = { is_owned_and_controlled_by = PCB }
		}
		visible = {
			has_completed_focus = EQS_support_puerto_caballo
			PCB = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		days_remove = 20
		modifier = {
			civilian_factory_use = 2
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_fund_port_expansion"
			1194 = {
				add_building_construction = {
					type = naval_base
					level = 2
					province = 20724
					instant_build = yes
				}
			}
			PCB = {
				add_stability = 0.05
				add_political_power = 50
			}
		}
	}
	EQS_support_matrotanzas_manufacturing = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 2
			1194 = { is_owned_and_controlled_by = PCB }
		}
		visible = {
			has_completed_focus = EQS_support_puerto_caballo
			PCB = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 30
		}
		fire_only_once = yes
		days_remove = 40
		modifier = {
			civilian_factory_use = 3
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_support_matrotanzas_manufacturing"
			1194 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	EQS_expand_puerto_caballo_dockyards = {
		icon = celestia
		available = {
			num_of_civilian_factories_available_for_projects > 2
			1193 = { is_owned_and_controlled_by = PCB }
		}
		visible = {
			has_completed_focus = EQS_support_puerto_caballo
			PCB = {
				exists = yes
				is_in_faction_with = EQS
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 20
		}
		fire_only_once = yes
		days_remove = 40
		modifier = {
			civilian_factory_use = 3
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_expand_puerto_caballo_dockyards"
			1193 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}
	EQS_shelter_olenians = {
		icon = celestia
		available = {
			OLE = {
				NOT = {
					has_government = democratic
					is_subject_of = CHN
				}
				has_country_flag = OLE_situation_stable
				has_war = no
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			OLE = {
				exists = yes
				NOT = {
					has_government = democratic
					is_subject_of = CHN
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 90
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_olenians"
			country_event = equestria.22
		}
	}
	EQS_aid_velvet = {
		icon = celestia
		available = {
			OLE = {
				has_government = democratic
				has_war_with = CHN
			}
			has_equipment = {
				infantry_equipment > 1999
			}
			has_equipment = {
				support_equipment > 399
			}
			has_equipment = {
				artillery_equipment > 399
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			OLE = {
				exists = yes
				has_government = democratic
				NOT = {
					is_in_faction_with = EQS
				}
			}
			CHN = {
				NOT = {
					has_government = democratic
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_velvet"
			send_equipment = { target = OLE type = infantry_equipment amount = 2000 }
			send_equipment = { target = OLE type = support_equipment amount = 400 }
			send_equipment = { target = OLE type = artillery_equipment amount = 400 }
			OLE = {
				country_event = equestria.23
			}
		}
	}
	EQS_aid_nova_griffonia = {
		icon = celestia
		available = {
			GRF = {
				has_government = democratic
				has_war_with = STG
			}
			has_equipment = {
				infantry_equipment > 1999
			}
			has_equipment = {
				support_equipment > 399
			}
			has_equipment = {
				artillery_equipment > 399
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			GRF = {
				exists = yes
				has_government = democratic
				NOT = {
					is_in_faction_with = EQS
				}
			}
			STG = {
				NOT = {
					has_government = democratic
					is_subject_of = EQS
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_nova_griffonia"
			send_equipment = { target = GRF type = infantry_equipment amount = 2000 }
			send_equipment = { target = GRF type = support_equipment amount = 400 }
			send_equipment = { target = GRF type = artillery_equipment amount = 400 }
			GRF = {
				country_event = equestria.24
			}
		}
	}
	EQS_shelter_dragon_lord = {
		icon = celestia
		available = {
			DRG = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			DRG = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 60
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_dragon_lord"
			country_event = equestria.25
		}
	}
	EQS_griffonstone_refugees = {
		icon = celestia
		available = {
			389 = {
				owner = {
					NOT = {
						has_government = democratic
						has_government = neutrality
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			389 = {
				owner = {
					NOT = {
						has_government = democratic
						has_government = neutrality
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 80
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_griffonstone_refugees"
			country_event = equestria.26
		}
	}
	EQS_shelter_hippogriffian_royal_family = {
		available = {
			HIP = {
				OR = {
					exists = no
					AND = {
						has_government = fascism
						NOT = {
							has_idea = HIP_hostage_novo
						}
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			HIP = {
				OR = {
					exists = no
					AND = {
						has_government = fascism
						NOT = {
							has_idea = HIP_hostage_novo
						}
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 40
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_hippogriffian_royal_family"
			country_event = equestria.27
		}
	}
	EQS_aid_hippogriffia = {
		available = {
			HIP = {
				exists = yes
				has_government = democratic
				has_war = yes
			}
			has_equipment = {
				infantry_equipment > 1999
			}
			has_equipment = {
				support_equipment > 399
			}
			has_equipment = {
				artillery_equipment > 399
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			HIP = {
				exists = yes
				has_government = democratic
				has_war = yes
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_hippogriffia"
			send_equipment = { target = HIP type = infantry_equipment amount = 2000 }
			send_equipment = { target = HIP type = support_equipment amount = 400 }
			send_equipment = { target = HIP type = artillery_equipment amount = 400 }
			HIP = {
				country_event = equestria.28
			}
		}
	}
	EQS_mend_arabian_ties = {
		available = {
			OR = {
				SDS = {
					exists = yes
					has_war = no
				}
				SDL = {
					exists = yes
					has_war = no
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			OR = {
				SDS = {
					exists = yes
				}
				SDL = {
					exists = yes
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 30
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_mend_arabian_ties"
			if = {
				limit = {
					SDL = {
						exists = yes
					}
				}
				SDL = {
					country_event = equestria.31
				}
			}
			else = {
				SDS = {
					country_event = equestria.31
				}
			}
		}
	}
	EQS_shelter_somnambula = {
		available = {
			MGY = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			MGY = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_somnambula"
			country_event = equestria.34
		}
	}
	EQS_aid_thorax = {
		available = {
			CCN = {
				exists = yes
				has_war_with = CHN
				has_government = democratic
			}
			has_equipment = {
				infantry_equipment > 1999
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			CCN = {
				exists = yes
				has_war_with = CHN
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 70
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_aid_thorax"
			send_equipment = { target = CCN type = infantry_equipment amount = 2000 }
			CCN = {
				country_event = equestria.35
			}
		}
	}
	EQS_invite_changeling_students = {
		available = {
			CCN = {
				exists = yes
				has_war = no
				has_government = democratic
			}
		}
		visible = {
			has_completed_focus = EQS_our_friends_abroad
			CCN = {
				exists = no
				has_war = no
				has_government = democratic
			}
		}
		cost = 50
		ai_will_do = {
			factor = 110
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_invite_changeling_students"
			country_event = equestria.36
		}
	}
	EQS_shelter_thoraxians = {
		available = {
			CCN = {
				exists = no
			}
		}
		visible = {
			CHN = {
				has_completed_focus = thoraxian_betrayal
			}
			CCN = {
				exists = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 110
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_shelter_thoraxians"
			country_event = equestria.37
		}
	}
}

EQS_construction_projects_category = {
	EQS_central_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
			num_of_civilian_factories_available_for_projects > 4
		}
		cost = 35
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 3
			}
		}
		modifier = {
			civilian_factory_use = 5
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_central_equestria_railroads"
			set_country_flag = EQS_central_railroads_built
			build_railway = {
				level = 1
				path = { 9375 3381 11372 11414 3884 6930 11856 974 3893 }
			}
			build_railway = {
				level = 1
				path = { 6023 9148 9068 6886 3833 907 3879 9902 9888 3893 11905 893 6597 754 3575 9334 6808 9806 }
			}
			build_railway = {
				level = 1
				path = { 849 13282 3851 9921 11081 11115 13205 124 }
			}
			build_railway = {
				level = 1
				path = { 11100 9216 102 13270 6116 7211 13272 6560 480 13274 6598 }
			}
			build_railway = {
				level = 1
				path = { 179 13058 6975 3090 188 3093 11100 3111 168 9154 3162 6118 11135 9032 3844 6111 9069 9208 }
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 103
						state = 105
						state = 129
						state = 126
						state = 179
						state = 178
						state = 176
						state = 40
						state = 177
						state = 183
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			3 = {
				add_extra_state_shared_building_slots = 2
			}
			74 = {
				add_extra_state_shared_building_slots = 1
			}
			70 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_eastern_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
			num_of_civilian_factories_available_for_projects > 4
		}
		cost = 35
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 75
			}
		}
		modifier = {
			civilian_factory_use = 5
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_eastern_equestria_railroads"
			set_country_flag = EQS_eastern_railways_built
			build_railway = {
				level = 1
				path = { 3887 857 9870 6936 903 10024 4098 4095 3953 }
			}
			build_railway = {
				level = 1
				path = { 6598 3447 3402 9561 9725 6962 9723 6931 }
			}
			build_railway = {
				level = 1
				path = { 9725 11058 11112 6185 11052 3113 11067 9093 6161 1119 12096 }
			}
			build_railway = {
				level = 1
				path = { 6931 6915 6817 6812 3816 6836 11875 }
			}
			build_railway = {
				level = 1
				path = { 11877 958 896 6867 12289 6749 11885 6996 }
			}
			build_railway = {
				level = 1
				path = { 351 11299 6320 3876 11792 3788 784 }
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 109
						state = 107
						state = 186
						state = 188
						state = 40
						state = 223
						state = 232
						state = 349
						state = 154
						state = 158
						state = 653
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			157 = {
				add_extra_state_shared_building_slots = 1
			}
			187 = {
				add_extra_state_shared_building_slots = 1
			}
			525 = {
				add_extra_state_shared_building_slots = 1
			}
			231 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_western_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
			num_of_civilian_factories_available_for_projects > 4
		}
		cost = 35
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 59
			}
		}
		modifier = {
			civilian_factory_use = 5
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_western_equestria_railroads"
			set_country_flag = EQS_western_railroads_built
			build_railway = {
				level = 1
				path = { 9806 9871 6938 9579 11272 3313 2085 11353 11220 7554 9351 323 11241 4477 4545 6763 11633 11678 6753 748 }
			}
			build_railway = {
				level = 1
				path = { 511 6578 522 3580 457 }
			}
			build_railway = {
				level = 1
				path = { 721 3573 12866 10026 9983 5053 4970 13145 }
			}
			build_railway = {
				level = 1
				path = { 9677 9696 6768 3752 6292 11271 9396 9241 9351 6293 3668 7624 3774 }
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 61
						state = 73
						state = 173
						state = 72
						state = 169
						state = 54
						state = 175
						state = 174
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			136 = {
				add_extra_state_shared_building_slots = 1
			}
			132 = {
				add_extra_state_shared_building_slots = 1
			}
			59 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_southwestern_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
			has_country_flag = EQS_buffalo_integrated
			num_of_civilian_factories_available_for_projects > 4
		}
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 38
			}
		}
		modifier = {
			civilian_factory_use = 5
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_southwestern_equestria_railroads"
			set_country_flag = EQS_southwestern_railroads_built
			every_owned_state = {
				limit = {
					OR = {
						state = 38
						state = 89
						state = 92
						state = 51
						state = 19
						state = 80
						state = 100
						state = 94
						state = 23
						state = 91
						state = 93
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			38 = {
				add_extra_state_shared_building_slots = 1
			}
			89 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_southeastern_equestria_railroads = {
		icon = railroad
		available = {
			has_war = no
			has_country_flag = EQS_moonshine_resolved
			num_of_civilian_factories_available_for_projects > 4
		}
		cost = 25
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 155
			}
		}
		fire_only_once = yes
		visible = {
		}
		highlight_states = {
			highlight_state_targets = {
				state = 13
			}
		}
		modifier = {
			civilian_factory_use = 5
		}
		days_remove = 80
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_southeastern_equestria_railroads"
			set_country_flag = EQS_southeastern_railroads_built
			every_owned_state = {
				limit = {
					OR = {
						state = 113
						state = 90
						state = 348
						state = 16
						state = 24
						state = 30
						state = 50
						state = 352
						state = 351
						state = 34
						state = 15
					}
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			16 = {
				add_extra_state_shared_building_slots = 1
			}
			30 = {
				add_extra_state_shared_building_slots = 1
			}
		}
	}
	EQS_canterlot_industry = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 40
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 3
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 130
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_canterlot_industry"
			3 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_south_severyanian_reconstruction = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 40
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 157
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 130
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_south_severyanian_reconstruction"
			157 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_baltimare_economic_retuning = {
		icon = railroad
		available = {
			has_war = no
			has_country_flag = EQS_moonshine_resolved
		}
		cost = 40
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 13
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 130
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_baltimare_economic_retuning"
			13 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	EQS_las_pegasus_toasters = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 50
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 66
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 150
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_las_pegasus_toasters"
			66 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = industrial_complex
					level = 3
					instant_build = yes
				}
			}
		}
	}
	EQS_coltifoalnian_investment = {
		icon = railroad
		available = {
			has_war = no
		}
		cost = 50
		ai_will_do = {
			base = 0
			modifier = {
				add = 10
				has_political_power > 80
			}
		}
		fire_only_once = yes
		visible = {
			has_completed_focus = EQS_civilian_industry_projects
		}
		highlight_states = {
			highlight_state_targets = {
				state = 46
			}
		}
		modifier = {
			political_power_gain = -0.15
		}
		days_remove = 150
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_coltifoalnian_investment"
			46 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			59 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			60 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

EQS_breakaway_diplomacy_category = {
	EQS_integrate_CES_commanders = {
		icon = celestia
		available = {
			CES = {
				exists = no
			}
		}
		visible = {
			CES = {
				exists = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_integrate_CES_commanders"
			CES = {
				CES_daring_do = {
					set_nationality = EQS
					demote_leader = yes
				}
				CES_snap_shutter = {
					set_nationality = EQS
				}
				CES_mane_allgood = {
					set_nationality = EQS
				}
			}
		}
	}
	EQS_reintegrate_southwest = {
		icon = celestia
		available = {
			BUF = {
				OR = {
					exists = no
					is_subject_of = EQS
				}
			}
			SCS = {
				exists = no
			}
			LSP = {
				exists = no
			}
			ROC = {
				exists = no
			}
		}
		visible = {
			#has_country_flag = EQS_autonomous_southwest   #this will come in handy when BUF gets content
			has_completed_focus = EQS_reunify_equestria
		}
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_reintegrate_southwest"
			every_owned_state = {
				limit = {
					OR = {
						is_core_of = BUF
						is_core_of = SCS
						is_core_of = LSP
						is_core_of = ROC
					}
					NOT = {
						is_core_of = EQS
					}
				}
				add_core_of = EQS
			}
		}
	}
	EQS_reintegrate_southeast = {
		icon = celestia
		available = {
			CES = {
				exists = no
			}
			NMS = {
				exists = no
			}
			BAL = {
				exists = no
			}
			JUN = {
				exists = no
			}
		}
		visible = {
			has_country_flag = EQS_autonomous_southeast
			has_completed_focus = EQS_reunify_equestria
		}
		cost = 25
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_reintegrate_southeast"
			every_owned_state = {
				limit = {
					OR = {
						is_core_of = CES
						is_core_of = JUN
						is_core_of = NMS
						is_core_of = BAL
					}
					NOT = {
						is_core_of = EQS
					}
				}
				add_core_of = EQS
			}
		}
	}
	EQS_integrate_crystal_empire = {
		icon = celestia
		available = {
			CRY = {
				exists = no
			}
			owns_state = 344
		}
		visible = {
			CRY = {
				OR = {
					exists = no
					NOT = {
						has_government = democratic
					}
				}
			}
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_integrate_crystal_empire"
			set_country_flag = EQS_CRY_absolestia_integration
			mark_focus_tree_layout_dirty = yes
			if = {
				limit = {
					NOT = {
						has_global_flag = royalty_executed
					}
				}
				country_event = equestria_celestia.21
			}
			else = {
				country_event = equestria_celestia.22
			}
		}
	}
	EQS_integrate_stalliongrad = {
		icon = celestia
		available = {
			STG = {
				exists = no
			}
			owns_state = 153
			owns_state = 166
		}
		visible = {
			OR = {
				AND = {
					STG = {
						exists = no
					}
					OR = {
						owns_state = 153
						owns_state = 166
					}
				}
				has_completed_focus = EQS_a_revolution_rectified
			}
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_integrate_stalliongrad"
			set_country_flag = EQS_STG_absolestia_integration
			mark_focus_tree_layout_dirty = yes
		}
	}
	EQS_balkanize_changelings = {
		icon = celestia
		available = {
			CHN = {
				exists = no
			}
			CCN = {
				exists = no
			}
			owns_state = 251
			owns_state = 252
			owns_state = 259
			owns_state = 309
			owns_state = 262
			owns_state = 316
		}
		visible = {
			CHN = {
				exists = no
			}
			CCN = {
				exists = no
			}
			owns_state = 251
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_balkanize_changelings"
			country_event = equestria_celestia.48
		}
	}
	EQS_generic_faction_demand = {
		icon = celestia
		visible = {
			has_completed_focus = EQS_in_the_frozen_north
			FROM = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = ROOT
				}
			}
		}
		target_root_trigger = {
			is_faction_leader = yes
			has_completed_focus = EQS_in_the_frozen_north
			has_government = democratic
		}
		targets = { OLE YAK JAK GRF GFF PLB PNG }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				OR = {
					original_tag = OLE
					original_tag = YAK
					original_tag = JAK
					original_tag = GRF
					original_tag = GFF
					original_tag = PLB
					original_tag = PNG
				}
			}
		}
		available = {
			FROM = {
				exists = yes
				is_subject = no
				NOT = {
					is_in_faction_with = ROOT
				}
			}
		}
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = no
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_generic_faction_demand"
			if = {
				limit = {
					OR = {
						has_government = democratic
						AND = {
							original_tag = PLB
							has_government = neutrality
						}
						AND = {
							original_tag = GRF
							has_government = communism
						}
					}
				}
				FROM = {
					country_event = equestria_celestia.49
				}
			}
			else = {
				declare_war_on = {
					target = FROM
					type = puppet_wargoal_focus
				}
			}
		}
	}
	EQS_reorganize_zebrican_possessions = {
		icon = celestia
		available = {
			BAT = {
				exists = no
			}
			owns_state = 712
		}
		visible = {
			BAT = {
				exists = no
			}
			owns_state = 712
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_reorganize_zebrican_possessions"
			country_event = equestria_celestia.57
		}
	}
}

EQS_celestia_selfdestruct_category = {
	EQS_celestia_degrade_timer = {
		icon = celestia
		allowed = {
			original_tag = EQS
		}
		visible = {
			has_country_flag = EQS_celestia_selfdestruct_enabled
		}
		available = {
			custom_trigger_tooltip = {
				tooltip = EQS_celestia_nostop_tt
				NOT = {
					has_country_flag = EQS_celestia_selfdestruct_enabled
				}
			}
		}
		days_mission_timeout = 150
		activation = {
			has_country_flag = EQS_celestia_selfdestruct_enabled
		}
		fixed_random_seed = no
		fire_only_once = no
		is_good = no
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout EQS_celestia_degrade_timer"
			custom_effect_tooltip = EQS_celestia_worsen_tt
		}
	}
}

EQS_celestia_DB_meter_category = {
	EQS_become_daybreaker_decision = {
		icon = celestia
		available = {
			hidden_trigger = {
				check_variable = { EQS_celestia_DB_meter > 6 }
			}
			if = {
				limit = { check_variable = { EQS_celestia_DB_meter < 9 }
					OR = {
						AND = {
							has_war = yes
							fascism > 0.3
						}
						fascism > 0.4
					}
				}
			}
		}
		visible = {
			has_country_leader = { character = EQS_princess_celestia ruling_only = yes }
			is_subject = no
			is_EQS_SOL = no
			has_war = yes
			NOT = { has_country_flag = supernova_fired }
		}
		cost = 0
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_become_daybreaker_decision"
			set_country_flag = supernova_by_decision
			country_event = equestria.1000
		}
	}
	EQS_celestia_speech_decision = {
		icon = celestia
		visible = {
			has_war_with = CHN
			has_completed_focus = Extreme_war_comittee

			has_country_leader = { ruling_only = yes character = EQS_princess_celestia }
			
		}
		cost = 25
		ai_will_do = {
			factor = 1000
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_celestia_speech_decision"
			country_event = equestria.143
			hidden_effect = {
				if = {
					limit = { is_ai = yes }
					add_political_power = 300
				}
			}
		}
	}
	EQS_enact_war_plan_decision = {
		icon = war_plan_eqs
		visible = {
		}
		available = {
			NOT = { has_country_flag = war_plan_timeout }
			has_war = yes
			OR = {
				has_war_support > 0.5
				surrender_progress > 0.15
				AND = {
					has_defensive_war = yes
					any_enemy_country = {
						is_major = yes
					}
				}
			}
		}
		cost = 100
		ai_will_do = {
			factor = 1000
			modifier = {
				factor = 0
				surrender_progress < 0.3
				OR = {
					has_stability < 0.75
					has_war_support < 0.75
					surrender_progress < 0.1
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_enact_war_plan_decision"
				country_event = equestria.152
				if = {
					limit = {
						NOT = {
							has_idea = war_economy
							has_idea = tot_economic_mobilisation
						}
					}
					add_ideas = war_economy
				}
			hidden_effect = {
				set_country_flag = { flag = war_plan_timeout days = 60 value = 1 }
			}
		}
	}
	EQS_turn_off_war_plan_decision = {
		icon = war_plan_eqs
		visible = {
		}
		available = {
			NOT = { has_country_flag = war_plan_timeout }
		}
		cost = 50
		ai_will_do = {
			factor = 0
			modifier = {
				add = 10
				surrender_progress < 0.1
				OR = {
					has_stability < 0.75
					has_war_support < 0.75
				}
			}
			modifier = {
				add = 25
				surrender_progress < 0.2
				OR = {
					has_stability < 0.5
					has_war_support < 0.5
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_turn_off_war_plan_decision"
			hidden_effect = {
				set_country_flag = { flag = war_plan_timeout days = 60 value = 1 }
			}
		}
	}
	EQS_support_thorax_decision = {
		icon = rifles
		visible = {
			has_government = democratic
			CHN = { has_war_with = CCN }
		}
		available = {
			has_equipment = { infantry_equipment > 499 }
		}
		cost = 50
		ai_will_do = {
			factor = 100
			modifier = {
				has_global_flag = EQS_evil_celestia
				factor = 0
			}
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_support_thorax_decision"
			send_equipment = { target = CCN type = infantry_equipment amount = 500 }
			reverse_add_opinion_modifier = { target = CCN modifier = OLE_civil_war_support }
			hidden_effect = {
				add_ai_strategy = {
					type = support
					id = "CCN"
					value = 300
				}
				set_country_flag = EQS_helped_CCN
			}
		}
	}
}
SOL_dealing_with_resistance = {
	SOL_resistance_crisis = {
		icon = revolt
		activation = {
			democratic > 0.3
			has_idea = SOL_harmonic_resistance_idea3
			has_war = no
			NOT = {
				CES = {
					exists = yes
					OR = {
						is_ai = no
						AND = {
							has_government = democratic
							has_country_flag = CES_resistance_path
						}
					}
					
				}
			}
		}
		available = {
			NOT = {
				has_idea = SOL_harmonic_resistance_idea3
			}
		}
		cancel_trigger = {
			hidden_trigger = {
				OR = {
					CES = {
						exists = yes
						OR = {
							is_ai = no
							AND = {
								has_government = democratic
								has_country_flag = CES_resistance_path
							}
						}
					}
					has_war = yes 
				}
			}
		}
		is_good = no
		days_mission_timeout = 240
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout SOL_resistance_crisis"
			set_variable = { civ_war_size = party_popularity@democratic }
			multiply_variable = { civ_war_size = 2 }
			clamp_variable = {
				var = civ_war_size
				min = 0.4
				max = 0.65
			}
			add_stability = -0.3
			add_war_support = -0.3
			add_political_power = -250
			start_civil_war = {
				ideology = democratic
				size = civ_war_size
			}
			clear_variable = civ_war_size
			hidden_effect = {
				remove_ideas = SOL_harmonic_resistance_idea3
				random_other_country = {
					limit = {
						original_tag = EQS
						has_government = democratic
					}
					#load_focus_tree = { tree = equestria_focus keep_completed = yes }
					set_capital = { 
						state = 75 
						remember_old_capital = no
					}
					add_political_power = 450
					set_party_name = { ideology = fascism long_name = EQS_fascism_generic_party_long name = EQS_fascism_generic_party }
					set_country_flag = EQS_force_republic
					complete_national_focus = eqs_come_to_compromise
					complete_national_focus = eqs_allow_the_vote
					set_country_flag = congress_president
					set_cosmetic_tag = EQS_DEM1
					set_party_name = { ideology = democratic long_name = EQS_republic_long name = EQS_republic }
					country_event = { hours = 24 id = equestriadem.1 }
					set_country_flag = { flag = celestia_evil_meter value = 0 }
					save_global_event_target_as = equestria
					every_character = {
						limit = {
							is_country_leader = no
							OR = {
								is_character = EQS_prince_blueblood
								is_character = EQS_august_fon_eisenstadt
								is_character = EQS_SOL_comet_trail
								is_character = EQS_SOL_Stormchaser
								is_character = EQS_SOL_comm_rush
								is_character = EQS_SOL_Capsaicin
								is_character = EQS_SOL_midwinter_halo
							}
						}
						set_nationality = event_target:solar_empire
					}
					ROOT = {
						every_character = {
							limit = {
								is_country_leader = no
								OR = {
									is_character = EQS_applejack
									is_character = EQS_sergeant_reckless
									is_character = EQS_big_macintosh
									#has_id = 8
									is_character = EQS_pinkie_pie
									is_character = EQS_caltrop_decay
									is_character = EQS_braeburn
									is_character = EQS_NLR_tempest_wind
									is_character = EQS_NLR_midnight_oil
									is_character = EQS_NLR_bipen
									is_character = EQS_oli_equites
								}
							}
							set_nationality = PREV.PREV
						}
					}
				}
				news_event = { id = news.sol.5 hours = 1 }
			}
		}
	}
	SOL_laws = {
		icon = anti_harmony
		visible = {
			OR = {
				has_completed_focus = SOL_Freedom_from_Fear
				has_completed_focus = SOL_Firm_but_Fair
				has_completed_focus = SOL_Imperial_Inquisition
			}
			OR = {
				has_idea = SOL_harmonic_resistance_idea
				has_idea = SOL_harmonic_resistance_idea2
				has_idea = SOL_harmonic_resistance_idea3
			}
		}
		fire_only_once = yes
		cost = 70
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_laws"
			unlock_decision_tooltip = SOL_wrap_up
			unlock_decision_tooltip = SOL_raids_2
			unlock_decision_tooltip = SOL_raids
			hidden_effect = { set_country_flag = SOL_laws_done }
		}
		ai_will_do = {
			factor = 20
		}
	}
	SOL_raids = {
		icon = anti_harmony
		visible = {
			has_idea = SOL_harmonic_resistance_idea3
		}
		available = {
			has_country_flag = SOL_laws_done
			hidden_trigger = {
				NOT = {
					has_country_flag = block_harmonic_resistance
				}
			}
		}
		cost = 140
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_raids"
			swap_ideas = { add_idea = SOL_harmonic_resistance_idea2 remove_idea = SOL_harmonic_resistance_idea3 }
		}
		modifier = {
			democratic_drift = -0.02
			stability_factor = -0.05
			political_power_cost = 0.2
		}
		ai_will_do = {
			factor = 100
		}
	}
	SOL_raids_2 = {
		icon = anti_harmony
		visible = {
			has_idea = SOL_harmonic_resistance_idea2
		}
		available = {
			has_country_flag = SOL_laws_done
			hidden_trigger = {
				NOT = {
					has_country_flag = block_harmonic_resistance
				}
			}
		}
		cost = 70
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_raids_2"
			swap_ideas = { add_idea = SOL_harmonic_resistance_idea remove_idea = SOL_harmonic_resistance_idea2 }
			hidden_effect = {
				clr_country_flag = SOL_raids_2_in_progress
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOL_raids_2"
			hidden_effect = {
				set_country_flag = SOL_raids_2_in_progress
			}
		}
		modifier = {
			democratic_drift = -0.02
		}
		ai_will_do = {
			factor = 20
		}
	}
	SOL_wrap_up = {
		icon = anti_harmony
		visible = {
			has_idea = SOL_harmonic_resistance_idea
		}
		available = {
			has_country_flag = SOL_laws_done
			hidden_trigger = {
				NOT = {
					has_country_flag = block_harmonic_resistance
				}
			}
		}
		fire_only_once = yes
		cost = 100
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove SOL_wrap_up"
			remove_ideas = SOL_harmonic_resistance_idea
			add_popularity = {
				ideology = democratic
				popularity = -0.05
			}
			hidden_effect = { clr_country_flag = SOL_wrap_up_in_progress }
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOL_wrap_up"
			hidden_effect = {
				set_country_flag = SOL_wrap_up_in_progress
				country_event = { id = solarempire.30 days = 35 }
			}
		}
		ai_will_do = {
			factor = 20
		}
	}
}
SOL_trolling_chiropterra = {
	SOL_bat_puppeting = {
		icon = soljudge
		available = {
		    is_subject = no
		    has_DB_ruler = yes
			BAT = {
			    exists = no
			}
			custom_trigger_tooltip = {
				tooltip = SOL_BAT_decision_req_tt
				all_of_scopes = {
					array = BAT.core_states
					owner = {
						OR = {
							tag = EQS
							is_subject_of = EQS
						}
						PREV = { is_fully_controlled_by = PREV }
					}
				}
			}
		}

		cost = 50

		days_remove = 1

		fire_only_once = yes

        ai_will_do = {
			factor = 100
        }

		visible = {
			has_government = fascism
			is_subject = no
		    has_DB_ruler = yes
			all_of_scopes = {
				array = BAT.core_states
				owner = {
					OR = {
						tag = EQS
						is_subject_of = EQS
					}
					PREV = { is_fully_controlled_by = PREV }
				}
			}
		}

		modifier = {
			political_power_gain = -0.15
		}
		remove_effect = {
			custom_effect_tooltip = SOL_BAT_puppet_tt0
			custom_effect_tooltip = BAR_viira_puppet_break
			custom_effect_tooltip = SOL_BAT_puppet_tt1
			713 = {
				add_manpower = -343468
				set_state_category = wasteland
			}
			set_province_name = {
				id = 18601
				name =  EQS_SOL_port
			}
			set_capital = {
				state = 713
				remember_old_capital = no
			}
			712 = {
				add_manpower = -620322
				set_state_category = wasteland
			}
			custom_effect_tooltip = BAR_viira_puppet_genocide2_5
			custom_effect_tooltip = EQS_SOL_BAT_GAMER1
			add_victory_points = {
				province = 18570
				value = -19
			}
			set_province_name = {
				id = 18570
				name = EQS_SOL_batcityburnt
			}
			690 = {
				add_manpower = -138034
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER2
			add_victory_points = {
				province = 18583
				value = -3
			}
			689 = {
				add_manpower = -356244
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER3
			add_victory_points = {
				province = 18526
				value = -5
			}
			691 = {
				add_manpower = -448210
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER4
			add_victory_points = {
				province = 18499
				value = -3
			}
			815 = {
				add_manpower = -204763
				set_state_category = wasteland
			}
			custom_effect_tooltip = EQS_SOL_BAT_GAMER5
			add_victory_points = {
				province = 18477
				value = -3
			}
			custom_effect_tooltip = BAR_viira_puppet_break
			custom_effect_tooltip = SOL_BAT_puppet_tt3
			show_ideas_tooltip = SOL_BAT_order
			hidden_effect = {
				712 = {
						remove_building = {
							type = arms_factory
							level = 100
						}
						remove_building = {
							type = infrastructure
							level = 5
						}
						remove_building = {
							type = dockyard
							level = 100
						}
						remove_building = {
							type = industrial_complex
							level = 100
						}
				}
				712 = {
						remove_building = {
							type = arms_factory
							level = 100
						}
						remove_building = {
							type = infrastructure
							level = 5
						}
						remove_building = {
							type = dockyard
							level = 100
						}
						remove_building = {
							type = industrial_complex
							level = 100
						}
				}
				create_dynamic_country = {
					original_tag = BAT
					set_country_flag = BAT_SOLAR
					set_politics = {
						ruling_party = fascism
						elections_allowed = no
					}
					set_cosmetic_tag = BAT_SOL
					set_research_slots = 3
					set_AI_strategies_on_every_possible_country_delayed = yes
				}
				EQS_SOL_batcouncil = {
					set_nationality = BTS
				}
				BTS = {
					add_ideas = {
						pony_race
						modern_society
						proper_science_base
						no_lack_of_scientists
						no_poverty
					}
				    add_ideas = SOL_BAT_order
					load_focus_tree = barrad_focus_viira_bonus
					set_party_name = { 
						ideology = fascism 
						name = BAT_SOL_PUPPET_fash
						long_name = BAT_SOL_PUPPET_fash_long
					}
					add_country_leader_role = {
						character = EQS_SOL_batcouncil
						promote_leader = yes

						country_leader = {
							expire = "1965.1.1"
							ideology = falangism
							traits = { }
						}
					}
					transfer_state = 713
					transfer_state = 712
					transfer_state = 690
					transfer_state = 691
					transfer_state = 689
					transfer_state = 815
				    add_state_core = 713
					add_state_core = 712
					add_state_core = 690
					add_state_core = 691
					add_state_core = 689
					add_state_core = 815
				}
            	puppet = BTS
			}
		}
    }
}
political_actions = {
	EQS_oc_general_unlock = {
		icon = generic_army_support
		fire_only_once = yes
		allowed = {
			original_tag = EQS
		}
		cost = 0
		visible = {
			has_country_flag = EQS_wartime_generals
		}
		complete_effect = {
			country_event = equestria_other.1
		}
	}
	SOL_rehabilitate_generals = {

		icon = generic_army_support

		fire_only_once = yes
		allowed = {
			original_tag = EQS
		}
		cost = sol_redemption_cost?200
		visible = {
			is_EQS_SOL = yes
			has_completed_focus = SOL_rehabilitate
			NOT = {
				country_exists = event_target:equestria
			}
			NOT = {
				has_character = EQS_soarin
				has_character = EQS_fast_clip
				has_character = EQS_whiplash
				has_character = EQS_sergeant_reckless
				has_character = EQS_madoor_stronghammer
				has_character = EQS_evening_squall
				has_character = EQS_fizzlepop
				has_character = EQS_bernard_hoofgonery
				has_character = EQS_allen_spark
				has_character = EQS_swift_wing
				has_character = EQS_sun_marble
				has_character = EQS_sentinel
				has_character = EQS_fireflight
			}
		}

		available = {
			is_subject = no
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision SOL_rehabilitate_generals"
			if = {
				limit = { NOT = { has_character = EQS_soarin } }
				every_possible_country = {
					limit = {
						has_character = EQS_soarin
					}
					EQS_soarin = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_fast_clip } }
				every_possible_country = {
					limit = {
						has_character = EQS_fast_clip
					}
					EQS_fast_clip = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_whiplash } }
				every_possible_country = {
					limit = {
						has_character = EQS_whiplash
					}
					EQS_whiplash = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_sergeant_reckless } }
				every_possible_country = {
					limit = {
						has_character = EQS_sergeant_reckless
					}
					EQS_sergeant_reckless = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_fizzlepop } }
				every_possible_country = {
					limit = {
						has_character = EQS_fizzlepop
					}
					EQS_fizzlepop = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_bernard_hoofgonery } }
				every_possible_country = {
					limit = {
						has_character = EQS_bernard_hoofgonery
					}
					EQS_bernard_hoofgonery = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_madoor_stronghammer } }
				every_possible_country = {
					limit = {
						has_character = EQS_madoor_stronghammer
					}
					EQS_madoor_stronghammer = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_evening_squall } }
				every_possible_country = {
					limit = {
						has_character = EQS_evening_squall
					}
					EQS_evening_squall = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_swift_wing } }
				every_possible_country = {
					limit = {
						has_character = EQS_swift_wing
					}
					EQS_swift_wing = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_sentinel } }
				every_possible_country = {
					limit = {
						has_character = EQS_sentinel
					}
					EQS_sentinel = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_sun_marble } }
				every_possible_country = {
					limit = {
						has_character = EQS_sun_marble
					}
					EQS_sun_marble = {
						set_nationality = ROOT 
					}
				}
			}
			if = {
				limit = { NOT = { has_character = EQS_Fireflight } }
				every_possible_country = {
					limit = {
						has_character = EQS_fireflight
					}
					EQS_fireflight = {
						set_nationality = ROOT 
					}
				}
			}
		}

		ai_will_do = {
			factor = 50
		}
	}
	EQS_rename_stalliongrad_decision = {
		icon = anti_communist
		allowed = {
			original_tag = EQS
		}
		visible = {
			owns_state = 153
			#OR = {
			#	has_government = fascism
			#	has_country_flag = war_with_stg
			#}
			NOT = { 
				has_country_flag = stg_renamed_eqs 
				has_global_flag = stg_renamed
				has_government = communism
			}
			NOT = { has_country_flag = EQS_april_fools }
		}


		highlight_states = {
			highlight_state_targets = {
				state = 153
			}
		}

		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_rename_stalliongrad_decision"
			country_event = equestria.133
			hidden_effect = {
				168 = {
					reset_state_name = yes
				}
			}
		}
		ai_will_do = {
			factor = 100
		}
	}
	EQS_generic_rename_stalliongrad_decision = {
		icon = anti_communist
		allowed = {
			NOT = {
				original_tag = EQS
				original_tag = NLR
				original_tag = CHN
				original_tag = MAN
				original_tag = STG
				original_tag = STL
				original_tag = JAK
			}
		}
		visible = {
			NOT = {
				has_global_flag = stg_renamed
				has_government = communism
				has_country_flag = CES_shadow_path
				has_country_flag = HIP_siren_takeover
			}
			owns_state = 153
		}
		highlight_states = {
			highlight_state_targets = {
				state = 153
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_generic_rename_stalliongrad_decision"
			153 = { set_state_name = EQS_vp_trottersburg }
			235 = { set_state_name = EQS_vp_ladimir }
			168 = {
				reset_state_name = yes
			}
			set_global_flag = stg_renamed
		}
	}
}
foreign_politics = {
	EQS_annex_darkwing = {
		icon = stg_cores
		allowed = { original_tag = EQS }
		available = {
			FROM = {
				is_subject_of = ROOT
				has_country_flag = darwking_puppet
				NOT = { has_country_flag = darkwing_not_ready_to_be_annexed }
			}
		}
		visible = {
			has_government = democratic
			FROM = {
				original_tag = STG
				exists = yes
				is_subject_of = ROOT
			}
		}
		target_root_trigger = {
			has_government = democratic
		}
		targets = { STG }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				original_tag = STG
				is_subject_of = ROOT
			}
		}
		cost = 50
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_annex_darkwing target: [From.GetName]"
			FROM = {
				country_event = stalliongrad.143
			}
		}
	}
	EQS_stop_commies = {
		 visible = {
               has_country_flag = EQS_remove_stalliongradian_influence
          }
		icon = red_star

		cost = 200
		
		ai_will_do = {
			factor = 150
		}
		
		fire_only_once = yes
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision YAK_stop_commies"
			add_stability = -0.1
			remove_ideas = internationalism
			remove_ideas = stalliongrad_propaganda
			clr_country_flag = EQS_remove_stalliongradian_influence
		}
	}
}
EQS_bring_back_puppets = {
	EQS_bring_back_puppet = {
		icon = generic_political_actions
		days_re_enable = 30
		visible = {
			is_subject = no
			eqs_not_has_civil_war = yes
			OR = {
				has_completed_focus = SOL_end_of_civil_war
				AND = {
					is_original_EQS = yes
					OR = {
						has_completed_focus = EQS_Civil_War_End
						has_global_flag = equestrian_civil_war_daybreaker_ended
					}
				}
			}
			FROM = {
				exists = yes
				is_subject = no
				has_country_flag = former_EQS_puppet
				is_former_subject = yes
				has_war = no
			}
		}
		target_root_trigger = {
			is_subject = no
			eqs_not_has_civil_war = yes
			OR = {
				has_completed_focus = SOL_end_of_civil_war
				AND = {
					is_original_EQS = yes
					OR = {
						has_completed_focus = EQS_Civil_War_End
						has_global_flag = equestrian_civil_war_daybreaker_ended
					}
				}
			}
		}
		target_array = global.former_EQS_puppets
		target_trigger = {
			FROM = {
				exists = yes
				is_subject = no
				has_country_flag = former_EQS_puppet
				is_former_subject = yes
				has_war = no
			}
		}
		cost = 50
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				OR = {
					enemies_strength_ratio > 1.5
					strength_ratio = { tag = FROM ratio < 1 }
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_puppet target: [From.GetName]"
			if = {
				limit = { is_EQS_SOL = yes }
				FROM = { country_event = { id = solarempire.12 days = 1 } }
			}
			else_if = {
				limit = { is_original_EQS = yes }
				FROM = { country_event = { id = solarempire.123 days = 1 } }
			}
		}
	}
}
EQS_bring_back_civil_war_countries = {
	EQS_bring_back_SCS = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { SCS }
		target_trigger = {
			FROM = {
				tag = SCS
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_SCS target: [From.GetName]"
			country_event = equestria.117
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
	EQS_bring_back_BAL = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { BAL }
		target_trigger = {
			FROM = {
				tag = BAL
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_BAL target: [From.GetName]"
			country_event = equestria.119
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
	EQS_bring_back_JUN = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { JUN }
		target_trigger = {
			FROM = {
				tag = JUN
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_JUN target: [From.GetName]"
			country_event = equestria.112
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
		EQS_bring_back_LSP = {
		icon = generic_political_actions
		visible = {
			has_completed_focus = EQS_United_Equestria
			country_exists = FROM
		}
		available = {
			has_war = no
			FROM = {
				is_subject = no
				has_war = no
			}
		}
		target_root_trigger = {
			has_completed_focus = EQS_United_Equestria
		}
		targets = { LSP }
		target_trigger = {
			FROM = {
				tag = LSP
			}
		}
		fire_only_once = yes
		cost = 10
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_bring_back_LSP target: [From.GetName]"
			country_event = equestria.1170  
		}
		ai_will_do = {
			factor = 100
			#modifier = {
			#	factor = 0
			#	strength_ratio = {
			#		tag = FROM
			#		ratio < 0.8
			#	}
			#}
		}
	}
}
military_training_category = {
	EQS_reform_smile = {
		icon = celestia
		allowed = {
			original_tag = EQS
		}
		available = {
			has_country_flag = EQS_new_royal_captain
			has_war = no
		}
		visible = {
			has_country_flag = EQS_new_royal_captain
			NOT = {
				has_country_flag = EQS_new_smile_director
			}
			has_war = no
		}
		cost = 100
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		complete_effect = {
			country_event = equestria_prewar.5
		}
	}
	EQS_improve_tank = {
		icon = GFX_decision_generic_tank
		allowed = {
			original_tag = EQS
			NOT = {
				has_dlc = "No Step Back"
			}
		}
		visible = {
			has_idea = EQS_bad_tanks
		}
		ai_will_do = {
			factor = 10
		}
		custom_cost_trigger = {
			has_army_experience > 9
		}
		custom_cost_text = decision_cost_army_xp_10
		fire_only_once = yes
		complete_effect = {
			swap_ideas = {
				remove_idea = EQS_bad_tanks
				add_idea = EQS_bad_tanks2
			}
			hidden_effect = {
				army_experience = -10
			}
		}
	}
	EQS_improve_tank2 = {
		icon = GFX_decision_generic_tank
		allowed = {
			original_tag = EQS
			NOT = {
				has_dlc = "No Step Back"
			}
		}
		custom_cost_trigger = {
			has_army_experience > 19
		}
		custom_cost_text = decision_cost_army_xp_20
		visible = {
			has_idea = EQS_bad_tanks2
		}
		ai_will_do = {
			factor = 10
		}
		fire_only_once = yes
		complete_effect = {
			swap_ideas = {
				remove_idea = EQS_bad_tanks2
				add_idea = EQS_bad_tanks3
			}
			hidden_effect = {
				army_experience = -20
			}
		}
	}
	EQS_improve_tank3 = {
		icon = GFX_decision_generic_tank
		allowed = {
			original_tag = EQS
			NOT = {
				has_dlc = "No Step Back"
			}
		}
		custom_cost_trigger = {
			has_army_experience > 29
		}
		custom_cost_text = decision_cost_army_xp_30
		visible = {
			has_idea = EQS_bad_tanks3
		}
		ai_will_do = {
			factor = 10
		}
		fire_only_once = yes
		complete_effect = {
			remove_ideas = EQS_bad_tanks3
			hidden_effect = {
				army_experience = -30
			}
		}
	}
	
}
EQS_militias = {
	EQS_militias_north_central_region = {			#8 divisions
		icon = rifles_whinnyapolis
		available = {
			OR = {
				179 = { is_owned_and_controlled_by = EQS }
				74 = { is_owned_and_controlled_by = EQS }
				178 = { is_owned_and_controlled_by = EQS }
				70 = { is_owned_and_controlled_by = EQS }
			}
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 500
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 20
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_north_central_region"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
						anti_tank = { x = 0 y = 1 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_north_central_region"
			custom_effect_tooltip = EQS_north_cent_militia_tt
			hidden_effect = {
				#load_oob = "EQS_north_central_militia"
				if = {
					limit = { 179 = { is_owned_and_controlled_by = EQS } }
					179 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { NC_militia = 2 }
				}
				if = {
					limit = { 178 = { is_owned_and_controlled_by = EQS } }
					178 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { NC_militia = 2 }
				}
				if = {
					limit = { 74 = { is_owned_and_controlled_by = EQS } }
					74 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { NC_militia = 2 }
				}
				if = {
					limit = { 70 = { is_owned_and_controlled_by = EQS } }
					70 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { NC_militia = 2 }
				}
				if = {						#additinal 2 divs for easy difficulty
					limit = {
						difficulty < 2 
						EQS = { is_ai = no }
					}
					add_to_variable = { NC_militia = 2 }
				}
				if = {						#additinal 2 divs for very easy difficulty
					limit = {
						difficulty < 1 
						EQS = { is_ai = no }
					}
					add_to_variable = { NC_militia = 2 }
				}
				capital_scope = {
					create_unit = {
						division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
						owner = EQS
						count = NC_militia
					}
				}
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_east_coast = {				#10 divisions
		icon = rifles_manehattan
		available = {
			75 = { is_owned_and_controlled_by = EQS }
			110 = { is_owned_and_controlled_by = EQS }
			12 = { is_owned_and_controlled_by = EQS }
			187 = { is_owned_and_controlled_by = EQS }
			230 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 100
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 25
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_east_coast"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
						anti_tank = { x = 0 y = 1 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_east_coast"
			custom_effect_tooltip = EQS_east_coast_militia_tt
			hidden_effect = {
				#load_oob = "EQS_east_coast_militia"
				if = {
					limit = { 230 = { is_owned_and_controlled_by = EQS } }
					230 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EC_militia = 2 }
				}
				if = {
					limit = { 187 = { is_owned_and_controlled_by = EQS } }
					187 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EC_militia = 2 }
				}
				if = {
					limit = { 110 = { is_owned_and_controlled_by = EQS } }
					110 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EC_militia = 2 }
				}
				if = {
					limit = { 75 = { is_owned_and_controlled_by = EQS } }
					75 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EC_militia = 2 }
				}
				if = {
					limit = { 12 = { is_owned_and_controlled_by = EQS } }
					12 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EC_militia = 2 }
				}
				if = {						#additinal 2 divs for easy difficulty
					limit = {
						difficulty < 2 
						EQS = { is_ai = no }
					}
					add_to_variable = { EC_militia = 2 }
				}
				if = {						#additinal 2 divs for very easy difficulty
					limit = {
						difficulty < 1 
						EQS = { is_ai = no }
					}
					add_to_variable = { EC_militia = 2 }
				}
				capital_scope = {
					create_unit = {
						division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
						owner = EQS
						count = EC_militia
					}
				}
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_central_equestria = {		#14 divisions
		icon = rifles_canterlot
		available = {
			1 = { is_owned_and_controlled_by = EQS }
			2 = { is_owned_and_controlled_by = EQS }
			3 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 60
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_central_equestria"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
						anti_tank = { x = 0 y = 1 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_central_equestria"
			custom_effect_tooltip = EQS_equestrian_heart_militia_tt
			hidden_effect = {
				#load_oob = "EQS_equestrian_heart_militia"
				if = {
					limit = { 3 = { is_owned_and_controlled_by = EQS } }
					3 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 6
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EH_militia = 6 }
				}
				if = {
					limit = { 2 = { is_owned_and_controlled_by = EQS } }
					2 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 4
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EH_militia = 4 }
				}
				if = {
					limit = { 1 = { is_owned_and_controlled_by = EQS } }
					1 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 4
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { EH_militia = 4 }
				}
				if = {						#additinal 2 divs for easy difficulty
					limit = {
						difficulty < 2 
						EQS = { is_ai = no }
					}
					add_to_variable = { EH_militia = 2 }
				}
				if = {						#additinal 2 divs for very easy difficulty
					limit = {
						difficulty < 1 
						EQS = { is_ai = no }
					}
					add_to_variable = { EH_militia = 2 }
				}
				capital_scope = {
					create_unit = {
						division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
						owner = EQS
						count = EH_militia
					}
				}
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_south_west = {				#12 divisions
		icon = rifles_appleloosa
		available = {
			OR = {
				66 = { is_owned_and_controlled_by = EQS }
				38 = { is_owned_and_controlled_by = EQS }
				21 = { is_owned_and_controlled_by = EQS }
			}
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 250
		}
		fire_only_once = yes
		visible = {
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 25
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_south_east"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
						anti_tank = { x = 0 y = 1 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_south_east"
			custom_effect_tooltip = EQS_south_east_militia_tt
			hidden_effect = {
				#load_oob = "EQS_south_east_militia"
				if = {
					limit = { 66 = { is_owned_and_controlled_by = EQS } }
					66 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 4
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { SE_militia = 4 }
				}
				if = {
					limit = { 38 = { is_owned_and_controlled_by = EQS } }
					38 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { SE_militia = 2 }
				}
				if = {
					limit = { 21 = { is_owned_and_controlled_by = EQS } }
					21 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { SE_militia = 2 }
				}
				if = {						#additinal 2 divs for easy difficulty
					limit = {
						difficulty < 2 
						EQS = { is_ai = no }
					}
					add_to_variable = { SE_militia = 2 }
				}
				if = {						#additinal 2 divs for very easy difficulty
					limit = {
						difficulty < 1 
						EQS = { is_ai = no }
					}
					add_to_variable = { SE_militia = 2 }
				}
				capital_scope = {
					create_unit = {
						division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
						owner = EQS
						count = SE_militia
					}
				}
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
	EQS_militias_south_east = {				#8 divisions
		icon = rifles_temple
		available = {
			13 = { is_owned_and_controlled_by = EQS }
			16 = { is_owned_and_controlled_by = EQS }
			15 = { is_owned_and_controlled_by = EQS }
			is_EQS_losing_war_20 = yes
		}
		#cost = 40
		ai_will_do = {
			factor = 50
		}
		fire_only_once = yes
		visible = {
			NOT = { BAL = { exists = yes } }
			has_defensive_war = yes
			any_enemy_country = {
				is_major = yes
			}
			eqs_not_has_civil_war = yes
		}
		days_remove = 35
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision complete EQS_militias_south_west"
			if = {
				limit = { NOT = { has_country_flag = militia_division_template } }
				delete_unit_template_and_units = { division_template = "Militia Division" }
				division_template = {
					name = "Militia Division"			#Infantry Division
					priority = 0
					is_locked = yes
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 0 y = 2 }
						militia = { x = 1 y = 0 }
						militia = { x = 1 y = 1 }
						militia = { x = 1 y = 2 }
					}
				
					support = {
						artillery = { x = 0 y = 0 }
						anti_tank = { x = 0 y = 1 }
					}
				}
				set_country_flag = militia_division_template
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_militias_south_west"
			custom_effect_tooltip = EQS_south_west_militia_tt
			hidden_effect = {
				#load_oob = "EQS_south_west_militia"
				if = {
					limit = { 16 = { is_owned_and_controlled_by = EQS } }
					16 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { SW_militia = 2 }
				}
				if = {
					limit = { 15 = { is_owned_and_controlled_by = EQS } }
					15 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { SW_militia = 2 }
				}
				if = {
					limit = { 13 = { is_owned_and_controlled_by = EQS } }
					13 = {
						create_unit = {
							division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
							owner = EQS
							count = 2
							allow_spawning_on_enemy_provs = no
						}
					}
				}
				else = {
					add_to_variable = { SW_militia = 2 }
				}
				if = {						#additinal 2 divs for easy difficulty
					limit = {
						difficulty < 2 
						EQS = { is_ai = no }
					}
					add_to_variable = { SW_militia = 2 }
				}
				if = {						#additinal 2 divs for very easy difficulty
					limit = {
						difficulty < 1 
						EQS = { is_ai = no }
					}
					add_to_variable = { SW_militia = 2 }
				}
				capital_scope = {
					create_unit = {
						division = "division_template = \"Militia Division\" start_experience_factor = 0.01"
						owner = EQS
						count = SW_militia
					}
				}
			}
		}
		modifier = {
			political_power_gain = -2.5
		}
	}
}
EQS_foreign_affairs = {
	EQS_call_yakyakistan_to_war_CHN = {
		icon = rifles

		fire_only_once = yes
		available = {
			surrender_progress > 0.1
		}
		visible = {
			has_completed_focus = pinkie_pie
			has_defensive_war_with = CHN
			FROM = {
				exists = yes 
				is_subject = no
				has_war = no
				has_government = democratic
			}
		}
		target_root_trigger = {
			has_completed_focus = pinkie_pie
			has_defensive_war_with = CHN
		}
		targets = { YAK }
		target_trigger = {
			FROM = { tag = YAK }
		}
		cost = 20
		ai_will_do = {
			factor = 0
			modifier = {
				add = 14
				surrender_progress > 0.1
			}
			modifier = {
				add = 40
				surrender_progress > 0.2
			}
			modifier = {
				add = 70
				surrender_progress > 0.35
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_call_yakyakistan_to_war_CHN target: [From.GetName]"
			YAK = { country_event = equestria.72 }
		}
	}
	EQS_sombra_return_civil_war_help = {
		icon = sombra_return
		available = {
			has_war_support > 0.10
		}
		cost = 50
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes
		targets = { CRY }
		targets_dynamic = yes
		target_trigger = {
			FROM = { original_tag = CRY }
		}

		visible = {
			FROM = { 
				has_civil_war = yes
				exists = yes
				original_tag = CRY
				has_global_flag = sombra_returned 
				has_government = fascism
			}
		}
		cancel_trigger = {
			FROM = {
				has_civil_war = no
			}
		}
		war_with_target_on_remove = yes
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_sombra_return_civil_war_help target: [From.GetName]"
			random_other_country = {
				limit = { original_tag = CRY has_government = democratic}
				save_event_target_as = cry_dem
				add_political_power = 150
				add_manpower = 50000
				custom_effect_tooltip = sombra_civil_war_tt
				hidden_effect = {
					load_oob = "EQS_sombra_civil_war"
					ROOT = {
						add_ai_strategy = {
							type = support
							id = PREV
							value = 300
						}
					}
				}
			}
			country_event = {
				id = equestria.53 days = 1
			}
		}
		modifier = {
			political_power_gain = -0.3
		}
	}
	EQS_sombra_return_war = {
		icon = sombra_return
		available = {
			has_war_support > 0.10
		}
		cost = 50
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes
		targets = { CRY }
		targets_dynamic = yes
		target_trigger = {
			FROM = { original_tag = CRY }
		}

		war_with_on_remove = CRY
		target_root_trigger = {
			has_global_flag = sombra_returned
			has_global_flag = return_of_sombra
		}
		visible = {
			has_global_flag = sombra_returned
			has_global_flag = return_of_sombra
			FROM = {
				original_tag = CRY
				exists = yes
				has_government = fascism
				has_country_leader = { character = CRY_sombra ruling_only = yes }
				has_civil_war = no
			}
		}
		cancel_trigger = {
			FROM = {
				has_war_with = ROOT
			}
		}
		days_remove = 70
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_sombra_return_war target: [From.GetName]"
			country_event = {
				id = equestria.54 days = 1
			}
		}
		modifier = {
			political_power_gain = -0.3
		}
	}
	EQS_operation_sunrise_freedom = {
		icon = rifles
		cost = 100
		ai_will_do = {
			factor = 150
		}
		fire_only_once = yes

		war_with_target_on_remove = yes
		targets = { EQC }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				original_tag = EQC
				has_country_flag = is_maresoc
				has_government = communism
			}
		}
		target_root_trigger = {
			has_country_flag = EQS_will_war_with_maresoc
			is_subject = no
		}
		visible = {
			has_country_flag = EQS_will_war_with_maresoc
			FROM = {
				exists = yes
				original_tag = EQC
				has_country_flag = is_maresoc
				has_government = communism
				NOT = { has_war_with = ROOT }
			}
		}
		days_remove = 70

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision EQS_operation_sunrise_freedom target: [From.GetName]"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = 1000
                }
            }
			FROM = {
				activate_targeted_decision = { target = ROOT decision = EQC_equestria_anti_maresoc }
			}
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove EQS_operation_sunrise_freedom target: [From.GetName]"
			log = "[GetDateText] [Root.GetName]: decision EQS_operation_sunrise_freedom"
			FROM = {
                add_ai_strategy = {
                    type = prepare_for_war
                    id = ROOT
                    value = -1000
                }
            }
			hidden_effect = {
				create_wargoal = { 
					type = puppet_wargoal_focus 
					target = FROM 
				}
			}
			declare_war_on = {
				type = puppet_wargoal_focus
				target = FROM
			}
			every_country ={
				limit = { has_country_flag = will_help_against_maresoc }
				country_event = { id = mareland.63 hours = 2 }
			}
		}

		modifier = {
			war_support_weekly = 0.025
			political_power_gain = -0.05
		}
	}
}
