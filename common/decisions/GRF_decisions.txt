GRF_civil_war_bop_category = {
	GRF_Highhill_parade = {
		icon = rifles
		available = {
			command_power > 100
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 100
			modifier = {
				OR = {
					has_country_flag = GRF_AI_WILHELM
					has_game_rule = {
						rule = GRF_ai_behavior
						option = WILHELM
					}
					has_country_flag = GRF_AI_HEINRICH
					has_game_rule = {
						rule = GRF_ai_behavior
						option = HEINRICH
					}
					has_country_flag = GRF_AI_BLACKPEAK
					has_game_rule = {
						rule = GRF_ai_behavior
						option = BLACKPEAK
					}
				}
				factor = 0.1
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_Highhill_parade"
			add_political_power = 100
			add_command_power = -100
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.025
			}
		}
	}
	GRF_republicans_help = {
		icon = rifles
		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 150
		}
		days_remove = 180
		modifier = {
			political_power_factor = 0.20
			stability_weekly = 0.005
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_republicans_help"
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = -0.025
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.025
			}
		}
	}
	GRF_concessions_to_workers = {
		icon = rifles
		cost = 75
		fire_only_once = yes
		ai_will_do = {
			base = 150
			modifier = {
				factor = 0
				has_idea = GRF_great_winter_strike
			}
		}
		days_remove = 180
		modifier = {
			political_power_factor = 0.10
			stability_weekly = 0.0025
			production_factory_efficiency_gain_factor = 0.1
			industrial_capacity_factory = 0.05
			industrial_capacity_dockyard = 0.05
			consumer_goods_factor = 0.08
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_concessions_to_workers"
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = -0.025
			}
			add_popularity = {
				ideology = communism
				popularity = 0.025
			}
		}
	}
	GRF_claims_STL = {
		icon = rifles
		cost = 25
		fire_only_once = yes
		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_claims_STL"
			add_political_power = 50
			add_war_support = 0.05
			country_event = { id = griffons.97 days = 1 }
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
			set_country_flag = GRF_STG_border_escalation_1
		}
	}
	GRF_claims_STG_border_states = {
		icon = rifles
		cost = 25
		fire_only_once = yes
		visible = {
			has_country_flag = GRF_STG_border_escalation_1
		}
		ai_will_do = {
			factor = 50
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_claims_STG_border_states"
			add_political_power = 50
			add_war_support = 0.1
			country_event = { id = griffons.98 days = 2 }
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
			clr_country_flag = GRF_STG_border_escalation_1
			set_country_flag = GRF_STG_border_escalation_2
		}
	}
	GRF_bunkers_on_STG_border = {
		icon = rifles
		cost = 25
		fire_only_once = yes
		visible = {
			has_country_flag = GRF_STG_border_escalation_2
		}
		ai_will_do = {
			factor = 50
			modifier = {
				has_country_flag = GRF_AI_BLACKPEAK
				has_game_rule = {
					rule = GRF_ai_behavior
					option = BLACKPEAK
				}
				factor = 2
			}
		}
		days_remove = 90
		modifier = {
			consumer_goods_factor = 0.05
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_bunkers_on_STG_border"
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
			add_war_support = 0.05
			GRF = {
                every_owned_state = {
                    limit = {
                        any_neighbor_state = {
                            is_owned_by = STG 
                        }
                    }
                    add_building_construction = {
                        type = bunker
                        level = 2
                        instant_build = yes 
                        province = {
                            all_provinces = yes
                            limit_to_border = yes
                        }
                    }
                }
            }
			clr_country_flag = GRF_STG_border_escalation_2
			set_country_flag = GRF_STG_border_escalation_3
		}
	}
	GRF_goldfeather_offer_to_JAK = {
		allowed = {
			tag = GRF
		}
		available = {
			JAK = { has_war_with = YAK }
		}
		icon = rifles
		cost = 15
		fire_only_once = yes
		ai_will_do = {
			factor = 25
			modifier = {
				OR = {
					has_country_flag = GRF_AI_WILHELM
					has_game_rule = {
						rule = GRF_ai_behavior
						option = WILHELM
					}
					has_country_flag = GRF_AI_HEINRICH
					has_game_rule = {
						rule = GRF_ai_behavior
						option = HEINRICH
					}
					has_country_flag = GRF_AI_BLACKPEAK
					has_game_rule = {
						rule = GRF_ai_behavior
						option = BLACKPEAK
					}
				}
				factor = 0
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_goldfeather_offer_to_JAK"
			JAK = { 
				country_event = { id = griffons.124 }
			}
		}
	}
	GRF_triton_offer_to_YAK = {
		allowed = {
			tag = GRF
		}
		available = {
			YAK = { has_war_with = JAK }
		}
		icon = rifles
		cost = 15
		fire_only_once = yes
		ai_will_do = {
			factor = 15
			modifier = {
				OR = {
					AND = {
						is_historical_focus_on = yes
						has_game_rule = {
							rule = GRF_ai_behavior
							option = DEFAULT
						}
					}
					has_country_flag = GRF_AI_HIGHHILL
					has_game_rule = {
						rule = GRF_ai_behavior
						option = HIGHHILL
					}
					has_country_flag = GRF_AI_SKEIRON
					has_game_rule = {
						rule = GRF_ai_behavior
						option = SKEIRON
					}
					has_country_flag = GRF_AI_IRONCLAW
					has_game_rule = {
						rule = GRF_ai_behavior
						option = IRONCLAW
					}
				}
				factor = 0
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_triton_offer_to_YAK"
			YAK = { 
				country_event = { id = griffons.123 }
			}
		}
	}
	GRF_goldfeather_supports_jaks_inf_eq = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = JAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = JAK
				JAK = { has_war_with = YAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		modifier = {
			consumer_goods_factor = 0.05
			experience_gain_army = 0.5
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 18
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_goldfeather_supports_jaks_inf_eq"
			JAK = { 
				country_event = { id = griffons.112 } 
				set_country_flag = GRF_JAK_goldfeather_sells_inf_eq
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
		}
	}
	GRF_goldfeather_supports_jaks_artillery = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = JAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = JAK
				JAK = { has_war_with = YAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		modifier = {
			consumer_goods_factor = 0.05
			experience_gain_army = 0.5
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 17
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_goldfeather_supports_jaks_artillery"
			JAK = { 
				country_event = { id = griffons.112 } 
				set_country_flag = GRF_JAK_goldfeather_sells_artillery
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
		}
	}
	GRF_goldfeather_supports_jaks_sup_eq = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = JAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = JAK
				JAK = { has_war_with = YAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		modifier = {
			consumer_goods_factor = 0.05
			experience_gain_army = 0.5
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 15
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_goldfeather_supports_jaks_sup_eq"
			JAK = { 
				country_event = { id = griffons.112 } 
				set_country_flag = GRF_JAK_goldfeather_sells_sup_eq
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
		}
	}
	GRF_goldfeather_supports_jaks_military_factory = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = JAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = JAK
				JAK = { has_war_with = YAK }
			}
		}
		icon = rifles
		cost = 15
		days_remove = 30
		ai_will_do = {
			factor = 15
		}
		modifier = {
			consumer_goods_factor = 0.1
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_goldfeather_supports_jaks_military_factory"
			JAK = { 
				country_event = { id = griffons.112 } 
				set_country_flag = GRF_JAK_goldfeather_sells_mil_fac
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
		}
	}
	GRF_goldfeather_supports_jaks_sell_trains = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = JAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = JAK
				JAK = { has_war_with = YAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		ai_will_do = {
			factor = 15
		}
		modifier = {
			consumer_goods_factor = 0.05
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_goldfeather_supports_jaks_sell_trains"
			JAK = { 
				country_event = { id = griffons.112 } 
				set_country_flag = GRF_JAK_goldfeather_sells_trains
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = 0.05
			}
		}
	}
	GRF_triton_supports_yaks_inf_eq= {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = YAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = YAK
				YAK = { has_war_with = JAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		ai_will_do = {
			factor = 18
		}
		modifier = {
			consumer_goods_factor = 0.05
			experience_gain_army = 0.5
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_triton_supports_yaks_inf_eq"
			YAK = { 
				country_event = { id = griffons.113 } 
				set_country_flag = GRF_YAK_triton_sells_inf_equ
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = -0.05
			}
		}
	}
	GRF_triton_supports_yaks_artillery = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = YAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = YAK
				YAK = { has_war_with = JAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		ai_will_do = {
			factor = 17
		}
		modifier = {
			consumer_goods_factor = 0.05
			experience_gain_army = 0.5
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_triton_supports_yaks_artillery"
			YAK = { 
				country_event = { id = griffons.113 } 
				set_country_flag = GRF_YAK_triton_sells_artillery
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = -0.05
			}
		}
	}
	GRF_triton_supports_yaks_sup_eq = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = YAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = YAK
				YAK = { has_war_with = JAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		ai_will_do = {
			factor = 15
		}
		modifier = {
			consumer_goods_factor = 0.05
			experience_gain_army = 0.5
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_triton_supports_yaks_sup_eq"
			YAK = { 
				country_event = { id = griffons.113 } 
				set_country_flag = GRF_YAK_triton_sells_sup_eq
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = -0.05
			}
		}
	}
	GRF_triton_supports_yaks_military_factory = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = YAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = YAK
				YAK = { has_war_with = JAK }
			}
		}
		icon = rifles
		cost = 15
		days_remove = 30
		ai_will_do = {
			factor = 15
		}
		modifier = {
			consumer_goods_factor = 0.1
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_triton_supports_yaks_military_factory"
			YAK = { 
				country_event = { id = griffons.113 } 
				set_country_flag = GRF_YAK_triton_sells_mil_fac
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = -0.05
			}
		}
	}
	GRF_triton_supports_yaks_sell_trains = {
		allowed = {
			tag = GRF
		}
		visible = {
			has_non_aggression_pact_with = YAK
		}
		available = {
			AND = {
				has_non_aggression_pact_with = YAK
				YAK = { has_war_with = JAK }
			}
		}
		icon = rifles
		cost = 25
		days_remove = 30
		ai_will_do = {
			factor = 15
		}
		modifier = {
			consumer_goods_factor = 0.05
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_triton_supports_yaks_sell_trains"
			YAK = { 
				country_event = { id = griffons.113 } 
				set_country_flag = GRF_YAK_triton_sells_trains
			}
			add_power_balance_value = {
				id = GRF_civil_war_bop
				value = -0.05
			}
		}
	}
}
GRF_war_with_GFF_category = {
	GRF_GFF_war_crisis = {
		icon = generic_civil_support
		fire_only_once = yes
		allowed = { always = no }
		activation = { always = no } #Activated by event
		available = {
			FROM = {
				OR = {
					has_capitulated = yes
					exists = no
					is_subject_of = ROOT
				}
			}
		}
		cancel_trigger = {
			hidden_trigger = {
				NOT = { has_war_with = FROM }
			}
		}
		days_mission_timeout = 180
		is_good = no
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_GFF_war_crisis"
			country_event = griffons.28
		}
	}
}

operations = {
	seize_control_of_241 = {
		icon = border_war
		allowed = {
			OR = {
				original_tag = GRF
				original_tag = GFF
			}
		}
		target_root_trigger = {
			eqs_has_civil_war = yes
			NOT = { owns_state = 241 }
		}
		visible = {
			is_subject = no
			FROM = {
				NOT = { has_war_with = ROOT }
				has_war = yes
			}
			241 = {
				is_owned_by = FROM
				is_fully_controlled_by = FROM
				any_neighbor_state = {
					is_fully_controlled_by = ROOT
				}
			}
		}
		targets = { 241.owner }
		target_trigger = {
			FROM = {
				NOT = { tag = ROOT }
				OR = {
					original_tag = EQS
					original_tag = NLR
				}
				has_war = yes
				owns_state = 241
			}
		}
		available = {
			is_subject = no
			FROM = {
				can_have_border_war_with_ROOT = yes
			}
			if = {
				limit = {
					FROM = {
						divisions_in_state = {
							size > 0
							state = 241
						}
					}
				}
				241 = {
					any_neighbor_state = {
						is_fully_controlled_by = ROOT
						ROOT = {
							OR = {
								is_ai = yes
								divisions_in_border_state = {
									state = PREV
									border_state = 241
									size > 0
								}
							}
						}
					}
				}
			}
		}
		highlight_states = {
			highlight_state_targets = {
				state = 241
			}
		}
		cost = 25
		ai_will_do = {
			factor = 30
			modifier = {
				factor = 0
				has_government = democratic
			}
			modifier = {
				factor = 0.25
				FROM = {
					divisions_in_state = {
						size > 0
						state = 241
					}
				}
			}
		}
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision seize_control_of_241 target: [From.GetName]"
			reverse_add_opinion_modifier = { target = FROM modifier = initiated_border_conflict }
			random_owned_state = {
				limit = {
					any_neighbor_state = {
						state = 241
					}
					if = {
						limit = {
							FROM = {
								divisions_in_state = {
									size > 0
									state = 241
								}
							}
						}
						ROOT = {
							OR = {
								is_ai = yes
								divisions_in_border_state = {
									state = PREV
									border_state = 241
									size > 0
								}
							}
						}
					}
				}
				if = {
					limit = {
						FROM = {
							divisions_in_state = {
								size > 0
								state = 241
							}
						}
					}
					ROOT = {
						start_border_war = {
							change_state_after_war = no
							attacker = {
								state = PREV
								num_provinces = 4
								on_win = griffons.45
								on_lose = griffons.46
								on_cancel = griffons.47
							}

							defender = {
								state = 241
								num_provinces = 2
								on_win = griffons.48
								on_lose = griffons.49
								on_cancel = griffons.47
							}
						}
					}
				}
				else = {
					ROOT = {
						transfer_state = 241
						hidden_effect = {
							news_event = { id = newsg.8 hours = 6 }
						}
					}
				}
			}
		}
	}
}

foreign_politics = {
	GRF_STG_border_war_preparation = {
		icon = border_war
		allowed = { always = no }
		available = {
			always = no
		}
		highlight_states = {
			highlight_state_targets = {
				state = 58
				state = 678
			}
		}
		ai_will_do = {
			base = 0
		}
		days_mission_timeout = 30
		is_good = no
		fire_only_once = yes
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_STG_border_war_preparation"
			#activate_targeted_decision = {
			#	target = GRF
			#	decision = GRF_STG_border_war
			#}
			activate_decision = GRF_STG_border_war
			activate_decision = GRF_STG_border_war_timeout
		}
	}
	
	GRF_STG_border_war = {
		icon = border_war
		allowed = { always = no }
		available = {
			58 = { is_owned_and_controlled_by = GRF }
			678 = { is_owned_and_controlled_by = STG }
			if = {
				limit = { is_ai = no }
				divisions_in_state = {
					state = 58
					size > 0
				}
			}
		}
		visible = {
			is_subject = no
			678 = {
				owner = {
					can_have_border_war_with_ROOT = yes
				}
			}
		}
		ai_will_do = {
			factor = 50
		}

		fire_only_once = yes

		highlight_states = {
			highlight_state_targets = {
				state = 678
			}
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_STG_border_war"
			hidden_effect = {
				activate_targeted_decision = {
					target = GRF
					decision = GRF_STG_border_war_timeout
				}
			}
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 58
					num_provinces = 4
					on_win = griffons.103
					on_lose = griffons.102
					on_cancel = griffons.104
				}

				defender = {
					state = 678
					num_provinces = 4
					on_win = griffons.106
					on_lose = griffons.105
					on_cancel = griffons.107
				}
			}
		}
	}
	GRF_STG_border_war_timeout = {
		icon = border_war
		allowed = { always = no }
		available = {
			58 = { has_border_war = no }
			678 = { has_border_war = no }
		}
		highlight_states = {
			highlight_state_targets = {
				state = 58
				state = 678
			}
		}
		ai_will_do = {
			base = 0
		}
		days_mission_timeout = 30
		is_good = no
		fire_only_once = yes
		# Modifier cannot be applied on a timeout mission. Need to apply it another way
		#modifier = {
		#	land_reinforce_rate = 0.15
		#}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_STG_border_war_timeout"
			cancel_border_war = {
				defender = 58
				attacker = 678
			}
		}
	}
	GRF_civil_war_escalation_0 = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				has_civil_war = yes 
				has_idea = GRF_civil_war_stage_0
			}
		}
		days_remove = 90
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_civil_war_escalation_0"
			swap_ideas = {
			    remove_idea = GRF_civil_war_stage_0
				add_idea = GRF_civil_war_stage_1
			}
		}
	}
	GRF_civil_war_escalation_1 = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				has_civil_war = yes 
				has_idea = GRF_civil_war_stage_1
			}
		}
		days_remove = 90
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_civil_war_escalation_1"
			swap_ideas = {
			    remove_idea = GRF_civil_war_stage_1
				add_idea = GRF_civil_war_stage_2
			}
		}
	}
	GRF_civil_war_escalation_2 = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				has_civil_war = yes 
				has_idea = GRF_civil_war_stage_2
			}
		}
		days_remove = 90
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_civil_war_escalation_2"
			remove_ideas = GRF_civil_war_stage_2
			add_ideas = GRF_fight_until_the_end
		}
	}
	GRF_open_communist_weapons_caches = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				has_civil_war = yes 
				has_government = communism
				has_country_flag = GRF_communist_weapons_caches
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_open_communist_weapons_caches"
			add_equipment_to_stockpile = {
			type = infantry_equipment_0
			amount = 2500
			producer = STG
		}
		add_equipment_to_stockpile = {
			type = support_equipment_1
			amount = 100
			producer = STG
		}
		add_equipment_to_stockpile = {
			type = artillery_equipment_1
			amount = 100
			producer = STG
		}
		}
	}
	GRF_left_front_asking_STG_to_help = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				original_tag = GRF
				has_civil_war = yes 
				has_government = communism
			}
		}
		available = { 
			OR = {
				surrender_progress > 0.7
				casualties_k  > 250
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_left_front_asking_STG_to_help"
			STG = { country_event = griffons.120 }
		}
	}
	GRF_left_front_call_to_arms_to_the_international = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				original_tag = GRF
				has_civil_war = yes 
				has_government = communism
				has_country_flag = STG_sent_volonteer_internationalists_to_GRF
			}
		}
		available = { surrender_progress > 0.15 }
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_left_front_call_to_arms_to_the_international"
			add_ideas = GRF_international_brigades
		}
	}
	GRF_Highhill_ask_CHN_for_help = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				original_tag = GRF
				has_civil_war = yes 
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
		}
		available = { 
			AND = {
				CHN = { has_government = fascism }
				OR = {
					casualties_k  > 250
					surrender_progress > 0.45
				}
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_Highhill_ask_CHN_for_help"
			CHN = { 
				country_event = { id = griffons.133 days = 5 } 
			}
		}
	}
	GRF_junta_wanna_deal_with_CHN = {
		icon = rifles
		allowed = { original_tag = GRF }
		visible = {
			AND = {
				is_subject = no 
				has_government = fascism
			}
		}
		available = { 
			CHN = { 
				has_government = fascism 
				has_war_with = STG
			}
		}
		cost = 25
		fire_only_once = yes
		ai_will_do = {
			factor = 500
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_junta_wanna_deal_with_CHN"
			CHN = { 
				country_event = { id = griffons.139 } 
			}
		}
	}
	GRF_send_help_to_EQS = {
		icon = rifles
		allowed = { tag = GRF }
		available = {
			has_war = no 
			is_subject = no
			has_equipment = { infantry_equipment > 1000 }
		}
		targets = { EQS }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				tag = event_target:equestria
			}
		}
		visible = {
			FROM = {
				original_tag = EQS
				exists = yes
				has_war_with = CHN
			}
		}
		cost = 20
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_send_help_to_EQS target: [From.GetName]"
			country_event = griffons.34
			set_country_flag = GRF_helped_EQS
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 2
				has_government = democratic
			}
		}
	}
	GRF_send_help_to_EQS_CW = {
		icon = rifles
		allowed = { tag = GRF }
		available = {
			has_war = no
			is_subject = no
			has_equipment = { infantry_equipment > 1000 }
		}
		targets = { EQS }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				tag = event_target:equestria
			}
		}
		visible = {
			FROM = {
				original_tag = EQS
				exists = yes
				has_war_with = NLR
			}
		}
		cost = 20
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_send_help_to_EQS_CW target: [From.GetName]"
			country_event = griffons.32
			set_country_flag = GRF_helped_EQS_cw
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				has_government = democratic
			}
		}
	}
	GRF_return_STG_to_EQS = {
		icon = anti_communist
		allowed = { tag = GRF }
		available = {
			has_war = no 
			is_subject = no
			any_owned_state = {
				is_core_of = STG
			}
			FROM = {
				has_war = no
			}
		}
		targets = { EQS }
		targets_dynamic = yes
		target_trigger = {
			FROM = {
				tag = event_target:equestria
			}
		}
		visible = {
			STG = {
				OR = {
					exists = no
					is_subject_of = ROOT
				}
			}
			FROM = {
				original_tag = EQS
				exists = yes
				is_subject = no
			}
			OR = {
				has_country_leader = {
					character = GRF_triton_blackpeak
					ruling_only = yes
				}
				has_country_leader = {
					character = GRF_skeiron
					ruling_only = yes
				}
			}
		}
		cost = 20
		fire_only_once = yes
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_return_STG_to_EQS target: [From.GetName]"
			FROM = {
				country_event = griffons.85
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
}

GRF_sending_mercs_cat = {
	GRF_send_mercs_dec = {
		icon = rifles
		available = {
			num_divisions > 15
			check_variable = { offsite_IC < 20 }
			FROM = {
				all_enemy_country = {
					if = {
						limit = { ROOT = { tag = GRF } }
						has_volunteers_amount_from = {
							tag = GRF
							count < 1
						}
					}
					else = {
						has_volunteers_amount_from = {
							tag = TRD
							count < 1
						}
					}
					ROOT = {
						custom_trigger_tooltip = {
							tooltip = GRF_send_mercs_dec_offered_to_enemy
							NOT = {
								has_country_flag = mercs_considered_@PREV
								has_country_flag = agreed_to_mercs_@PREV
							}
						}
					}
				}
			}
		}
		target_root_trigger = {
			if = {
				limit = { tag = GRF }
				has_idea = GRF_send_mercs
			}
			else = {
				has_completed_focus = TRD_robber_baron
			}
		}
		visible = {
			NOT = { has_country_flag = agreed_to_mercs_@FROM }
			FROM = {
				#is_subject = no
				exists = yes
				has_war = yes
				has_capitulated = no
				has_tribal_society = no
				NOT = {
					is_in_faction_with = ROOT
					is_subject_of = ROOT
					has_war_with = ROOT
				}
				NOT = {
					has_idea = detached_country
				}
				does_not_have_communal_society = yes
				has_opinion = {
					target = ROOT
					value > -40
				}
				NOT = { has_country_flag = refused_mercs_from_@ROOT }
				if = {
					limit = { ROOT = { tag = GRF } }
					NOT = {
						has_volunteers_amount_from = {
							tag = GRF
							count > 0
						}
					}
				}
				else = {
					NOT = {
						has_volunteers_amount_from = {
							tag = TRD
							count > 0
						}
					}
				}
			}
		}
		target_trigger = {
			FROM = {
				#is_subject = no
				exists = yes
				has_war = yes
				has_capitulated = no
				has_tribal_society = no
				NOT = {
					is_in_faction_with = ROOT
					is_subject_of = ROOT
					has_war_with = ROOT
				}
				NOT = {
					has_idea = detached_country
				}
				does_not_have_communal_society = yes
				has_opinion = {
					target = ROOT
					value > -40
				}
			}
		}
		days_re_enable = 7
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_send_mercs_dec target: [From.GetName]"
			set_country_flag = mercs_considered_@FROM
			FROM = { country_event = { id = griffons.62 } }
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				check_variable = { volunteers_factor > 0.6 }
			}
			modifier = {
				factor = 0.5
				FROM = { alliance_strength_ratio > 1.2 }
			}
			modifier = {
				factor = 1.5
				FROM = { alliance_strength_ratio < 1 }
			}
			modifier = {
				factor = 2
				FROM = { alliance_strength_ratio > 0.8 }
			}
			modifier = {
				factor = 0.5
				FROM = {
					surrender_progress < 0.1
				}
			}
			modifier = {
				factor = 1.2
				FROM = {
					surrender_progress > 0.2
				}
			}
			modifier = {
				factor = 2
				FROM = {
					surrender_progress > 0.4
				}
			}
			modifier = {
				factor = 3
				FROM = {
					surrender_progress > 0.6
				}
			}
			modifier = {
				factor = 0
				FROM = {
					surrender_progress > 0.9
				}
			}
			modifier = {
				factor = 2
				FROM = {
					has_opinion = {
						target = ROOT
						value > 20
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						has_government = fascism
					}
				}
			}
			modifier = {
				factor = 3
				FROM = {
					num_of_civilian_factories_available_for_projects > 18
				}
			}
		}
	}
	GRF_send_mercs_mis = {
		icon = rifles
		allowed = { always = no } #Activated from effect

		activation = { always = no }

		fire_only_once = yes

		available = {
			FROM = {
				if = {
					limit = { ROOT = { tag = GRF } }
					has_volunteers_amount_from = {
						tag = GRF
						count > 4
					}
				}
				else = {
					has_volunteers_amount_from = {
						tag = TRD
						count > 4
					}
				}
			}
		}

		is_good = no
		days_mission_timeout = 30

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_send_mercs_mis"
			add_ai_strategy = {
				type = support
				id = FROM
				value = -9999
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = FROM
				value = -9999
			}
			add_political_power = -100
			add_war_support = -0.05
			FROM = {
				add_opinion_modifier = { target = ROOT modifier = GRF_failed_to_deliver_mercs }
				set_country_flag = { flag = refused_mercs_from_@ROOT value = 1 days = 180 }
				country_event = griffons.63
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = -500
				}
			}
			clr_country_flag = agreed_to_mercs_@FROM
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_send_mercs_mis"
			hidden_effect = { GRF_recalc_mercs = yes }
			FROM = {
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = -500
				}
			}
			add_ai_strategy = {
				type = support
				id = FROM
				value = -9999
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = FROM
				value = -9999
			}
			if = {
				limit = { NOT = { FROM = { has_country_flag = mercs_delayed_payment } } }
				if = {
					limit = { tag = GRF }
					add_to_variable = { offsite_IC = 4 }
					add_offsite_building = { type = industrial_complex level = 4 }
					FROM = {
						country_event = griffons.64
						add_ideas = GRF_got_mercs
					}
					activate_targeted_decision = { target = FROM decision = GRF_send_mercs_reward }
					else = {
						FROM = {
							country_event = griffons.64
							add_ideas = TRD_got_mercs
						}
						activate_targeted_decision = { target = FROM decision = TRD_send_mercs_reward }
					}
				}
			}
			else = {
				if = {
					limit = { tag = GRF }
						FROM = {
							country_event = griffons.64
							add_ideas = GRF_got_mercs_delayed
							clr_country_flag = mercs_delayed_payment
						}					
					else = {
						FROM = {
							country_event = griffons.64
							add_ideas = TRD_got_mercs_delayed
							clr_country_flag = mercs_delayed_payment
						}
					}
				}
			}
			clr_country_flag = agreed_to_mercs_@FROM
		}

	}
	GRF_send_mercs_reward = {
		icon = rifles
		days_mission_timeout = 99999
		selectable_mission = no
		allowed = { always = no }
		activation = { always = no }
		available = {
			FROM = {
				OR = {
					has_capitulated = yes
					exists = no
					NOT = { has_idea = GRF_got_mercs }
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_send_mercs_reward"
			hidden_effect = { GRF_recalc_mercs = yes }
			add_to_variable = { offsite_IC = -4 }
			add_offsite_building = { type = industrial_complex level = -4 }
			# remove_targeted_decision = {
			# 	target = FROM
			# 	decision = GRF_send_mercs_reward
			# }
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_send_mercs_reward"
			# remove_targeted_decision = {
			# 	target = FROM
			# 	decision = GRF_send_mercs_reward
			# }
		}
	}
	TRD_send_mercs_reward = {
		icon = rifles
		days_mission_timeout = 30
		selectable_mission = no
		days_remove = 0
		allowed = { always = no }
		activation = { always = no }
		available = {
			FROM = {
				OR = {
					has_capitulated = yes
					exists = no
					NOT = { has_idea = TRD_got_mercs }
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRD_send_mercs_reward"
			hidden_effect = { GRF_recalc_mercs = yes }
			# remove_targeted_decision = {
			# 	target = FROM
			# 	decision = TRD_send_mercs_reward
			# }
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout TRD_send_mercs_reward"
			custom_effect_tooltip = TRD_gain_money_05_tp
			add_to_variable = {
				var = bank
				value = 0.5
			}
			hidden_effect = {
				FROM = { save_event_target_as = merc_client }
				country_event = { id = tradefed.1000 hours = 1 }
			}
		}
	}
	GRF_demand_delayed_payment = {
		icon = rifles
		target_root_trigger = {
			if = {
				limit = { tag = GRF }
				has_idea = GRF_send_mercs
			}
			else = {
				has_idea = TRD_mercs_idea
			}
		}
		visible = {
			FROM = {
				has_war = no
				has_variable = delayed_merc_payment_@ROOT
				NOT = { has_country_flag = considering_delaying_payment_@ROOT }
			}
		}
		target_trigger = {
			FROM = {
				exists = yes
				has_war = no
				has_variable = delayed_merc_payment_@ROOT
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_demand_delayed_payment target: [From.GetName]"
			FROM = {
				set_country_flag = considering_delaying_payment_@ROOT
				country_event = { id = griffons.70 days = 4 }
			}
		}
		days_re_enable = 7
	}
	GRF_send_mercs_reward_delayed = {
		icon = rifles
		days_mission_timeout = var:GRF_send_mercs_reward_delayed_duration
		selectable_mission = no
		allowed = { always = no }
		available = {
			FROM = {
				OR = {
					has_capitulated = yes
					exists = no
					NOT = { has_idea = GRF_got_mercs_delayed_payment }
				}
			}
		}
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision GRF_send_mercs_reward_delayed"
			add_to_variable = { offsite_IC = -4 }
			add_offsite_building = { type = industrial_complex level = -4 }
			# remove_targeted_decision = {
			# 	target = FROM
			# 	decision = GRF_send_mercs_reward_delayed
			# }
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout GRF_send_mercs_reward_delayed"
			add_to_variable = { offsite_IC = -4 }
			add_offsite_building = { type = industrial_complex level = -4 }
			# remove_targeted_decision = {
			# 	target = FROM
			# 	decision = GRF_send_mercs_reward_delayed
			# }
		}
	}
	TRD_send_mercs_reward_delayed = {
		icon = rifles
		days_mission_timeout = 30
		selectable_mission = no
		allowed = { always = no }
		available = {
			FROM = {
				OR = {
					has_capitulated = yes
					exists = no
					NOT = { has_idea = TRD_got_mercs_delayed_payment }
				}
			}
		}
		days_remove = 0
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision TRD_send_mercs_reward_delayed"
			# remove_targeted_decision = {
			# 	target = FROM
			# 	decision = TRD_send_mercs_reward_delayed
			# }
		}
		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout TRD_send_mercs_reward_delayed"
			custom_effect_tooltip = TRD_gain_money_05_tp
			add_to_variable = {
				var = bank
				value = 0.5
			}
			subtract_from_variable = {
				TRD_send_mercs_reward_delayed_duration_@FROM = 30
			}
			if = {
				limit = { check_variable = { TRD_send_mercs_reward_delayed_duration_@FROM > -15 } }
				hidden_effect = {
					FROM = { save_event_target_as = merc_client }
					country_event = { id = tradefed.1001 hours = 1 }
				}
			}
		}
	}
}